<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover, shrink-to-fit=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="format-detection" content="telephone=no">
  <title class="glitch-title" data-text="SQUID GAME ORTIZ">SQUID GAME ORTIZ</title>
  <!-- Fuente similar a la de Squid Game -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@900&display=swap" rel="stylesheet">
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
  <style>
    /* Glitch Effect for Document Title */
    title.glitch-title {
      position: relative;
      animation: titleGlitch 4s infinite;
    }
    
    title.glitch-title::before,
    title.glitch-title::after {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0.7;
      pointer-events: none;
    }
    
    title.glitch-title::before {
      animation: titleGlitch-1 3s infinite;
      color: #00ffff;
      z-index: -1;
      text-shadow: 0 0 5px #00ffff;
    }
    
    title.glitch-title::after {
      animation: titleGlitch-2 3.5s infinite;
      color: #ff00ff;
      z-index: -2;
      text-shadow: 0 0 5px #ff00ff;
    }
    
    @keyframes titleGlitch {
      0%, 100% {
        transform: translate(0);
      }
      15% {
        transform: translate(-1px, 1px);
      }
      30% {
        transform: translate(-1px, -1px);
      }
      45% {
        transform: translate(1px, 1px);
      }
      60% {
        transform: translate(1px, -1px);
      }
      75% {
        transform: translate(-1px, 1px);
      }
    }
    
    @keyframes titleGlitch-1 {
      0%, 100% {
        transform: translate(0);
        opacity: 0.7;
      }
      20% {
        transform: translate(1px, -1px);
        opacity: 0.8;
      }
      40% {
        transform: translate(-1px, 1px);
        opacity: 0.6;
      }
      60% {
        transform: translate(1px, 1px);
        opacity: 0.8;
      }
      80% {
        transform: translate(-1px, -1px);
        opacity: 0.6;
      }
    }
    
    @keyframes titleGlitch-2 {
      0%, 100% {
        transform: translate(0);
        opacity: 0.7;
      }
      20% {
        transform: translate(-1px, 1px);
        opacity: 0.6;
      }
      40% {
        transform: translate(1px, -1px);
        opacity: 0.8;
      }
      60% {
        transform: translate(-1px, -1px);
        opacity: 0.6;
      }
      80% {
        transform: translate(1px, 1px);
        opacity: 0.8;
      }
    }
  </style>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      width: 100%;
      max-width: 100vw;
      overflow-x: hidden;
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
      text-size-adjust: 100%;
      touch-action: manipulation;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      box-sizing: border-box;
    }
    body {
      background: radial-gradient(circle at 60% 40%, #e60073 0%, #1a1a1a 80%);
      min-height: 100vh;
      width: 100%;
      max-width: 100vw;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      font-family: 'Orbitron', Arial, sans-serif;
      overflow-x: hidden;
      position: relative;
      box-sizing: border-box;
    }
    .lights {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      pointer-events: none;
      z-index: 0;
    }
    .light {
      position: absolute;
      border-radius: 50%;
      filter: blur(60px);
      opacity: 0.25;
    }
    .light1 { width: 60vw; height: 60vw; background: #e60073; top: 10%; left: 10%; }
    .light2 { width: 40vw; height: 40vw; background: #fff; top: 60%; left: 70%; opacity: 0.12; }
    .light3 { width: 30vw; height: 30vw; background: #e60073; top: 80%; left: 20%; opacity: 0.18; }
    
    /* Floating Shapes Background */
    .floating-shapes {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }
    
    .floating-shape {
      position: absolute;
      opacity: 0.4;
      animation-duration: 20s;
      animation-iteration-count: infinite;
      animation-timing-function: linear;
      max-width: 100vw;
      max-height: 100vh;
    }
    
    .floating-circle {
      width: 15vw;
      height: 15vw;
      border: 4px solid #e60073;
      border-radius: 50%;
      background: rgba(230, 0, 115, 0.2);
      box-shadow: 0 0 40px #e60073, 0 0 80px #e60073;
      animation-name: floatCircle;
      top: 10%;
      left: 5%;
    }
    
    .floating-triangle {
      width: 12vw;
      height: 12vw;
      animation-name: floatTriangle;
      top: 70%;
      left: 80%;
    }
    
    .floating-triangle::before {
      content: '';
      position: absolute;
      width: 0;
      height: 0;
      border-left: 6vw solid transparent;
      border-right: 6vw solid transparent;
      border-bottom: 10vw solid #fff;
      filter: drop-shadow(0 0 30px #e60073), drop-shadow(0 0 60px #fff);
    }
    
    .floating-square {
      width: 13vw;
      height: 13vw;
      border: 4px solid #fff;
      background: rgba(255, 255, 255, 0.2);
      box-shadow: 0 0 40px #fff, 0 0 80px #fff;
      animation-name: floatSquare;
      top: 30%;
      left: 70%;
    }
    
    .floating-circle-2 {
      width: 10vw;
      height: 10vw;
      border: 3px solid #e60073;
      border-radius: 50%;
      background: rgba(230, 0, 115, 0.15);
      box-shadow: 0 0 30px #e60073, 0 0 60px #e60073;
      animation-name: floatCircle2;
      top: 60%;
      left: 15%;
      animation-duration: 25s;
    }
    
    .floating-triangle-2 {
      width: 8vw;
      height: 8vw;
      animation-name: floatTriangle2;
      top: 20%;
      left: 60%;
      animation-duration: 30s;
    }
    
    .floating-triangle-2::before {
      content: '';
      position: absolute;
      width: 0;
      height: 0;
      border-left: 4vw solid transparent;
      border-right: 4vw solid transparent;
      border-bottom: 7vw solid #e60073;
      filter: drop-shadow(0 0 20px #fff), drop-shadow(0 0 40px #e60073);
    }
    
    .floating-square-2 {
      width: 11vw;
      height: 11vw;
      border: 3px solid #fff;
      background: rgba(255, 255, 255, 0.15);
      box-shadow: 0 0 30px #fff, 0 0 60px #fff;
      animation-name: floatSquare2;
      top: 80%;
      left: 40%;
      animation-duration: 35s;
    }
    
    /* Floating Animations */
    @keyframes floatCircle {
      0% { transform: translate(0, 0) rotate(0deg); }
      25% { transform: translate(15vw, 15vh) rotate(90deg); }
      50% { transform: translate(30vw, 5vh) rotate(180deg); }
      75% { transform: translate(45vw, 25vh) rotate(270deg); }
      100% { transform: translate(0, 0) rotate(360deg); }
    }
    
    @keyframes floatTriangle {
      0% { transform: translate(0, 0) rotate(0deg); }
      33% { transform: translate(-20vw, -15vh) rotate(120deg); }
      66% { transform: translate(-40vw, 10vh) rotate(240deg); }
      100% { transform: translate(0, 0) rotate(360deg); }
    }
    
    @keyframes floatSquare {
      0% { transform: translate(0, 0) rotate(0deg); }
      20% { transform: translate(20vw, -15vh) rotate(72deg); }
      40% { transform: translate(40vw, 20vh) rotate(144deg); }
      60% { transform: translate(20vw, 35vh) rotate(216deg); }
      80% { transform: translate(-10vw, 15vh) rotate(288deg); }
      100% { transform: translate(0, 0) rotate(360deg); }
    }
    
    @keyframes floatCircle2 {
      0% { transform: translate(0, 0) rotate(0deg); }
      30% { transform: translate(25vw, -20vh) rotate(108deg); }
      60% { transform: translate(50vw, 15vh) rotate(216deg); }
      100% { transform: translate(0, 0) rotate(360deg); }
    }
    
    @keyframes floatTriangle2 {
      0% { transform: translate(0, 0) rotate(0deg); }
      40% { transform: translate(-30vw, 25vh) rotate(144deg); }
      80% { transform: translate(-60vw, -10vh) rotate(288deg); }
      100% { transform: translate(0, 0) rotate(360deg); }
    }
    
    @keyframes floatSquare2 {
      0% { transform: translate(0, 0) rotate(0deg); }
      25% { transform: translate(25vw, -20vh) rotate(90deg); }
      50% { transform: translate(50vw, 25vh) rotate(180deg); }
      75% { transform: translate(25vw, 50vh) rotate(270deg); }
      100% { transform: translate(0, 0) rotate(360deg); }
    }
    
    /* Particles */
    .particles {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      pointer-events: none;
      z-index: 1;
    }
    
    .particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: #e60073;
      border-radius: 50%;
      animation: particleFloat 8s infinite linear;
      opacity: 0.6;
    }
    
    /* Text Particles */
    .text-particles {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      pointer-events: none;
      z-index: 1;
    }
    
    .text-particle {
      position: absolute;
      color: #e60073;
      font-size: 0.8rem;
      font-weight: bold;
      text-shadow: 0 0 8px #e60073, 0 0 16px #e60073;
      opacity: 0.6;
      white-space: nowrap;
      font-family: 'Orbitron', Arial, sans-serif;
      letter-spacing: 0.1em;
    }
    
    .text-particle.ortiz {
      animation: ortizMove 20s infinite ease-in-out;
    }
    
    .text-particle.familia {
      animation: familiaMove 18s infinite ease-in-out;
    }
    
    .text-particle.unidad {
      animation: unidadMove 22s infinite ease-in-out;
    }
    
    .text-particle.diversion {
      animation: diversionMove 25s infinite ease-in-out;
    }
    

    
    .particle:nth-child(1) { left: 10%; animation-delay: 0s; }
    .particle:nth-child(2) { left: 20%; animation-delay: 1s; }
    .particle:nth-child(3) { left: 30%; animation-delay: 2s; }
    .particle:nth-child(4) { left: 40%; animation-delay: 3s; }
    .particle:nth-child(5) { left: 50%; animation-delay: 4s; }
    .particle:nth-child(6) { left: 60%; animation-delay: 5s; }
    .particle:nth-child(7) { left: 70%; animation-delay: 6s; }
    .particle:nth-child(8) { left: 80%; animation-delay: 7s; }
    .particle:nth-child(9) { left: 90%; animation-delay: 8s; }
    .particle:nth-child(10) { left: 15%; animation-delay: 0.5s; }
    .particle:nth-child(11) { left: 25%; animation-delay: 1.5s; }
    .particle:nth-child(12) { left: 35%; animation-delay: 2.5s; }
    .particle:nth-child(13) { left: 45%; animation-delay: 3.5s; }
    .particle:nth-child(14) { left: 55%; animation-delay: 4.5s; }
    .particle:nth-child(15) { left: 65%; animation-delay: 5.5s; }
    .particle:nth-child(16) { left: 75%; animation-delay: 6.5s; }
    .particle:nth-child(17) { left: 85%; animation-delay: 7.5s; }
    .particle:nth-child(18) { left: 95%; animation-delay: 8.5s; }
    .particle:nth-child(19) { left: 5%; animation-delay: 0.25s; }
    .particle:nth-child(20) { left: 85%; animation-delay: 0.75s; }
    
    @keyframes particleFloat {
      0% { 
        transform: translateY(100vh) scale(0);
        opacity: 0;
      }
      10% { 
        opacity: 0.6;
        transform: translateY(90vh) scale(1);
      }
      90% { 
        opacity: 0.6;
        transform: translateY(10vh) scale(1);
      }
      100% { 
        transform: translateY(0vh) scale(0);
        opacity: 0;
      }
    }
    
    @keyframes ortizMove {
      0% { transform: translate(0, 0) scale(1); }
      25% { transform: translate(75vw, 15vh) scale(1.1); }
      50% { transform: translate(15vw, 75vh) scale(0.9); }
      75% { transform: translate(85vw, 55vh) scale(1.05); }
      100% { transform: translate(0, 0) scale(1); }
    }
    
    @keyframes familiaMove {
      0% { transform: translate(0, 0) scale(1); }
      25% { transform: translate(-85vw, 75vh) scale(1.1); }
      50% { transform: translate(-70vw, 5vh) scale(0.9); }
      75% { transform: translate(-65vw, 85vh) scale(1.05); }
      100% { transform: translate(0, 0) scale(1); }
    }
    
    @keyframes unidadMove {
      0% { transform: translate(0, 0) scale(1); }
      25% { transform: translate(85vw, -65vh) scale(1.1); }
      50% { transform: translate(5vw, -75vh) scale(0.9); }
      75% { transform: translate(65vw, -15vh) scale(1.05); }
      100% { transform: translate(0, 0) scale(1); }
    }
    
    @keyframes diversionMove {
      0% { transform: translate(0, 0) scale(1); }
      25% { transform: translate(-75vw, -85vh) scale(1.1); }
      50% { transform: translate(-35vw, -5vh) scale(0.9); }
      75% { transform: translate(-55vw, -55vh) scale(1.05); }
      100% { transform: translate(0, 0) scale(1); }
    }
    
    /* Matrix Rain Effect */
    .matrix-rain {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      pointer-events: none;
      z-index: 1;
    }
    
    .matrix-column {
      position: absolute;
      top: -100%;
      width: 2px;
      height: 100vh;
      background: linear-gradient(to bottom, transparent, #e60073, transparent);
      animation: matrixFall 3s infinite linear;
    }
    
    @keyframes matrixFall {
      0% { top: -100%; }
      100% { top: 100%; }
    }
    
    /* Click Light Effect */
    .click-effects {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      pointer-events: none;
      z-index: 100;
    }
    
    .click-light {
      position: absolute;
      width: 100px;
      height: 100px;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.8) 0%, transparent 70%);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      animation: clickExpand 1.5s ease-out forwards;
    }
    
    @keyframes clickExpand {
      0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 1;
      }
      100% {
        transform: translate(-50%, -50%) scale(3);
        opacity: 0;
      }
    }
    
    /* Scan Lines */
    .overlay {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(0, 0, 0, 0.1) 2px,
        rgba(0, 0, 0, 0.1) 4px
      );
      pointer-events: none;
      z-index: 2;
    }
    
    /* Main Container */
    .container {
      position: relative;
      z-index: 10;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      width: 100%;
      max-width: 100vw;
      height: 100vh;
      padding-top: 5vh;
      box-sizing: border-box;
      overflow-x: hidden;
    }
    
    /* Title with Glitch Effect */
    .squid-title {
      color: #fff;
      font-size: 4rem;
      font-weight: 900;
      text-shadow: 0 0 20px #e60073, 0 0 40px #fff;
      margin-bottom: 1rem;
      letter-spacing: 0.2em;
      position: relative;
      animation: glitch 3s infinite;
      text-align: center;
      width: 100%;
    }
    
    .ortiz-text {
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-block;
      padding: 0.2rem 0.5rem;
      border-radius: 8px;
      background: rgba(230, 0, 115, 0.1);
      border: 2px solid transparent;
    }
    
    .ortiz-text:hover {
      background: rgba(230, 0, 115, 0.3);
      border-color: #e60073;
      box-shadow: 0 0 20px #e60073;
      transform: scale(1.05);
    }
    
    @keyframes glitch {
      0%, 90%, 100% {
        transform: translate(0);
        text-shadow: 0 0 20px #e60073, 0 0 40px #fff;
      }
      10% {
        transform: translate(-2px, 2px);
        text-shadow: 2px 2px 20px #ff0000, -2px -2px 40px #00ff00;
      }
      20% {
        transform: translate(2px, -2px);
        text-shadow: -2px -2px 20px #0000ff, 2px 2px 40px #ffff00;
      }
      30% {
        transform: translate(-2px, -2px);
        text-shadow: 2px -2px 20px #ff00ff, -2px 2px 40px #00ffff;
      }
    }
    
    /* Shapes */
    .shapes {
      display: flex;
      gap: 1.5rem;
      margin-bottom: 1rem;
      position: relative;
      justify-content: center;
      width: 100%;
    }
    
    .shape {
      width: 1.5rem;
      height: 1.5rem;
      min-width: 1.5rem;
      min-height: 1.5rem;
      max-width: 1.5rem;
      max-height: 1.5rem;
      border: 3px solid #fff;
      box-shadow: 0 0 15px #e60073;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .circle-shape {
      border-radius: 50%;
      background: rgba(230, 0, 115, 0.3);
    }
    
    .triangle-shape {
      background: transparent;
      border: none;
      position: relative;
    }
    
    .triangle-shape svg {
      width: 100%;
      height: 100%;
      filter: drop-shadow(0 0 10px #e60073);
    }
    
    .square-shape {
      background: rgba(255, 255, 255, 0.3);
      position: relative;
    }
    
    .square-shape::after {
      content: '';
      position: absolute;
      top: -5px;
      left: -5px;
      right: -5px;
      bottom: -5px;
      border: 2px solid transparent;
      border-radius: 4px;
      transition: all 0.3s ease;
      pointer-events: none;
    }
    
    .square-shape:hover::after {
      border-color: #e60073;
      box-shadow: 0 0 15px #e60073;
    }
    
    .shape:hover {
      transform: scale(1.2);
      box-shadow: 0 0 25px #e60073;
    }
    
    /* Typewriter Effect */
    .typewriter {
      color: #fff;
      font-size: 1.2rem;
      text-align: center;
      margin-bottom: 2rem;
      background: rgba(0, 0, 0, 0.4);
      border-radius: 8px;
      padding: 1.5rem 2rem;
      border: 1.5px solid #e60073;
      box-shadow: 0 0 10px #e60073;
      width: 80%;
      max-width: 600px;
      box-sizing: border-box;
      position: relative;
    }
    

    
    /* Access Panel */
    .access-panel {
      background: rgba(0, 0, 0, 0.7);
      border: 2px solid #e60073;
      border-radius: 15px;
      padding: 1rem;
      margin: 1rem 0;
      box-shadow: 0 0 30px #e60073;
      text-align: center;
      backdrop-filter: blur(10px);
      width: 80%;
      max-width: 600px;
    }
    
    .access-title {
      color: #fff;
      font-size: 0.9rem;
      margin-bottom: 0.8rem;
      text-shadow: 0 0 10px #e60073;
      font-weight: bold;
    }
    
    .code-input-container {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.6rem;
      margin-bottom: 0.6rem;
    }
    
    .code-inputs {
      display: flex;
      gap: 0.3rem;
    }
    
    .code-input {
      width: 40px;
      height: 40px;
      text-align: center;
      font-size: 1.1rem;
      font-weight: bold;
      border: 2px solid #e60073;
      border-radius: 8px;
      background: rgba(0, 0, 0, 0.8);
      color: #fff;
      outline: none;
      transition: all 0.3s;
    }
    
    .code-input:focus {
      border-color: #fff;
      box-shadow: 0 0 15px #e60073;
    }
    
    .lock-icon {
      font-size: 1.2rem;
      color: #e60073;
      text-shadow: 0 0 10px #e60073;
    }
    
    .access-status {
      color: #fff;
      font-size: 0.7rem;
      margin-top: 0.6rem;
      min-height: 1rem;
    }
    
    /* Admin Panel Button Styles */
    .admin-panel-btn {
      margin-top: 20px;
      width: 100%;
      padding: 15px 20px;
      background: linear-gradient(45deg, #00ff00, #00cc00);
      border: none;
      border-radius: 10px;
      color: #000;
      font-family: 'Orbitron', Arial, sans-serif;
      font-weight: bold;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      box-shadow: 0 4px 15px rgba(0, 255, 0, 0.3);
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .admin-panel-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 255, 0, 0.5);
      background: linear-gradient(45deg, #00ff33, #00ff00);
    }
    
    .admin-panel-btn:active {
      transform: translateY(0);
      box-shadow: 0 2px 10px rgba(0, 255, 0, 0.4);
    }
    
    .admin-btn-icon {
      font-size: 1.3rem;
    }
    
    .admin-btn-text {
      font-weight: bold;
    }
    
    /* Mobile specific styles */
    @media (max-width: 768px) {
      .admin-panel-btn {
        padding: 20px;
        font-size: 1.2rem;
        min-height: 60px;
      }
      
      .admin-btn-icon {
        font-size: 1.5rem;
      }
    }
    
    /* Main Content */
    .main-content {
      text-align: center;
      margin-top: 2rem;
      z-index: 10;
      position: relative;
    }
    
    .welcome-text {
      color: #fff;
      font-size: 3rem;
      margin-bottom: 1rem;
      text-shadow: 0 0 20px #e60073, 0 0 40px #fff;
      font-family: 'Orbitron', Arial, sans-serif;
      letter-spacing: 0.2em;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      gap: 0;
      line-height: 1.2;
    }
    
    .clickable-letter {
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-block;
      margin: 0;
      padding: 0;
    }
    
    .clickable-letter:hover {
      text-shadow: 0 0 30px #00FFFF, 0 0 60px #00FFFF;
      transform: scale(1.2);
      color: #00FFFF;
    }
    
    .clickable-letter.clicked {
      color: #00FFFF;
      text-shadow: 0 0 30px #00FFFF, 0 0 60px #00FFFF, 0 0 90px #00FFFF;
      animation: letterGlow 1s ease-in-out;
    }
    
    @keyframes letterGlow {
      0% { transform: scale(1); }
      50% { transform: scale(1.4); text-shadow: 0 0 50px #00FFFF, 0 0 100px #00FFFF; }
      100% { transform: scale(1); }
    }
    
    .description {
      color: #fff;
      font-size: 1.2rem;
      margin-bottom: 2rem;
      text-shadow: 0 0 10px #e60073;
      font-family: 'Orbitron', Arial, sans-serif;
    }
    
    /* Glitch Effect for Title */
    .glitch-title {
      position: relative;
      animation: glitch 3s infinite;
    }
    
    .glitch-title::before,
    .glitch-title::after {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0.8;
    }
    
    .glitch-title::before {
      animation: glitch-1 2s infinite;
      color: #00ffff;
      z-index: -1;
    }
    
    .glitch-title::after {
      animation: glitch-2 2.5s infinite;
      color: #ff00ff;
      z-index: -2;
    }
    
    @keyframes glitch {
      0%, 100% {
        transform: translate(0);
      }
      20% {
        transform: translate(-2px, 2px);
      }
      40% {
        transform: translate(-2px, -2px);
      }
      60% {
        transform: translate(2px, 2px);
      }
      80% {
        transform: translate(2px, -2px);
      }
    }
    
    @keyframes glitch-1 {
      0%, 100% {
        transform: translate(0);
        opacity: 0.8;
      }
      20% {
        transform: translate(2px, -2px);
        opacity: 0.9;
      }
      40% {
        transform: translate(-2px, 2px);
        opacity: 0.7;
      }
      60% {
        transform: translate(2px, 2px);
        opacity: 0.9;
      }
      80% {
        transform: translate(-2px, -2px);
        opacity: 0.7;
      }
    }
    
    @keyframes glitch-2 {
      0%, 100% {
        transform: translate(0);
        opacity: 0.8;
      }
      20% {
        transform: translate(-2px, 2px);
        opacity: 0.7;
      }
      40% {
        transform: translate(2px, -2px);
        opacity: 0.9;
      }
      60% {
        transform: translate(-2px, -2px);
        opacity: 0.7;
      }
      80% {
        transform: translate(2px, 2px);
        opacity: 0.9;
      }
    }
    
    .status-indicator {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid #e60073;
      border-radius: 10px;
      padding: 1rem 2rem;
      box-shadow: 0 0 20px #e60073;
    }
    
    .status-dot {
      width: 12px;
      height: 12px;
      background: #00ff7f;
      border-radius: 50%;
      animation: pulse 2s infinite;
      box-shadow: 0 0 10px #00ff7f;
    }
    
    .status-text {
      color: #00ff7f;
      font-size: 1rem;
      font-weight: bold;
      text-shadow: 0 0 10px #00ff7f;
      font-family: 'Orbitron', Arial, sans-serif;
    }
    
    /* Secret Screen */
    .secret-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #000000 100%);
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      backdrop-filter: blur(10px);
      border: 3px solid #FFD700;
      box-shadow: 0 0 50px #FFD700, inset 0 0 50px rgba(255, 215, 0, 0.1);
      padding: 2rem;
      box-sizing: border-box;
      overflow-y: auto;
      overflow-x: hidden;
    }
    
    .secret-screen.active {
      display: flex;
      animation: secretEntrance 0.8s ease-out;
    }
    
    @keyframes secretEntrance {
      0% {
        opacity: 0;
        transform: scale(0.8) rotate(-5deg);
      }
      100% {
        opacity: 1;
        transform: scale(1) rotate(0deg);
      }
    }
    
    .secret-title {
      color: #FFD700;
      font-size: 2rem;
      margin-bottom: 1.5rem;
      text-align: center;
      text-shadow: 0 0 30px #FFD700, 0 0 60px #FFD700;
      font-weight: bold;
      letter-spacing: 0.2em;
      animation: goldPulse 2s infinite;
    }
    
    @keyframes goldPulse {
      0%, 100% {
        text-shadow: 0 0 30px #FFD700, 0 0 60px #FFD700;
      }
      50% {
        text-shadow: 0 0 50px #FFD700, 0 0 100px #FFD700, 0 0 150px #FFD700;
      }
    }
    
    .coordinates-container {
      background: linear-gradient(145deg, #000000 0%, #1a1a1a 50%, #000000 100%);
      border: 3px solid #FFD700;
      border-radius: 15px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 0 40px #FFD700, inset 0 0 20px rgba(255, 215, 0, 0.1);
      display: none;
      animation: coordinatesReveal 1s ease-out;
      max-width: 90%;
    }
    
    .coordinates-container.show {
      display: block;
    }
    
    @keyframes coordinatesReveal {
      0% {
        opacity: 0;
        transform: translateY(30px) scale(0.9);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    
    .coordinate-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 1rem;
      color: #fff;
      font-size: 1rem;
      font-weight: bold;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
    }
    
    .coord-label {
      color: #FFD700;
      font-weight: bold;
      margin-right: 1rem;
      text-shadow: 0 0 15px #FFD700;
    }
    
    .coord-value {
      color: #FFD700;
      font-weight: bold;
      text-shadow: 0 0 15px #FFD700;
      animation: valueGlow 3s infinite;
    }
    
    @keyframes valueGlow {
      0%, 100% {
        text-shadow: 0 0 15px #FFD700;
      }
      50% {
        text-shadow: 0 0 25px #FFD700, 0 0 35px #FFD700;
      }
    }
    
    .secret-message {
      color: #FFD700;
      font-size: 0.9rem;
      text-align: center;
      line-height: 1.5;
      margin-bottom: 1.5rem;
      font-weight: bold;
      text-shadow: 0 0 15px #FFD700;
      display: none;
      max-width: 90%;
    }
    
    .secret-message.show {
      display: block;
      animation: messageReveal 1s ease-out;
    }
    
    @keyframes messageReveal {
      0% {
        opacity: 0;
        transform: translateY(20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .secret-btn {
      background: linear-gradient(45deg, #FFD700, #FFA500);
      color: #000;
      border: 2px solid #FFD700;
      padding: 1rem 2rem;
      font-size: 1.1rem;
      font-weight: bold;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 0 30px #FFD700, inset 0 0 20px rgba(255, 215, 0, 0.3);
      text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
      margin-bottom: 1rem;
      position: relative;
      z-index: 1001;
    }
    
    #closeSecretBtn {
      background: linear-gradient(45deg, #ff4757, #ff3742);
      border-color: #ff4757;
      box-shadow: 0 0 30px #ff4757, inset 0 0 20px rgba(255, 71, 87, 0.3);
      margin-top: 1rem;
      animation: closeBtnPulse 2s infinite;
      font-size: 1.2rem;
      padding: 1.2rem 2.5rem;
      position: sticky;
      bottom: 2rem;
    }
    
    #closeSecretBtn:hover {
      background: linear-gradient(45deg, #ff3742, #ff4757);
      box-shadow: 0 0 50px #ff4757, inset 0 0 30px rgba(255, 71, 87, 0.5);
      transform: scale(1.05);
    }
    
    @keyframes closeBtnPulse {
      0%, 100% {
        box-shadow: 0 0 30px #ff4757, inset 0 0 20px rgba(255, 71, 87, 0.3);
      }
      50% {
        box-shadow: 0 0 50px #ff4757, inset 0 0 30px rgba(255, 71, 87, 0.5);
      }
    }
    
    .help-text {
      color: #FFD700;
      font-size: 0.9rem;
      text-align: center;
      margin-bottom: 1rem;
      opacity: 0.8;
      text-shadow: 0 0 10px #FFD700;
    }
    
    /* Easter Egg Modal Styles */
    .easter-egg-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #000000 100%);
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      backdrop-filter: blur(15px);
      border: 4px solid #FFD700;
      box-shadow: 0 0 80px #FFD700, inset 0 0 80px rgba(255, 215, 0, 0.2);
      padding: 2rem;
      box-sizing: border-box;
      overflow: hidden;
    }
    
    .easter-egg-modal.active {
      display: flex;
      animation: easterEggEntrance 1s ease-out;
    }
    
    @keyframes easterEggEntrance {
      0% {
        opacity: 0;
        transform: scale(0.5) rotate(-10deg);
      }
      50% {
        opacity: 0.8;
        transform: scale(1.1) rotate(5deg);
      }
      100% {
        opacity: 1;
        transform: scale(1) rotate(0deg);
      }
    }
    
    .easter-egg-content {
      background: linear-gradient(145deg, #000000 0%, #1a1a1a 50%, #000000 100%);
      border: 3px solid #FFD700;
      border-radius: 20px;
      padding: 2rem 1.5rem;
      box-shadow: 0 0 60px #FFD700, inset 0 0 40px rgba(255, 215, 0, 0.1);
      text-align: center;
      max-width: 85%;
      max-height: 85vh;
      position: relative;
      z-index: 2001;
      overflow-y: auto;
    }
    
    .easter-egg-header h2 {
      color: #FFD700;
      font-size: 2rem;
      margin-bottom: 0.8rem;
      text-shadow: 0 0 40px #FFD700, 0 0 80px #FFD700;
      font-weight: bold;
      letter-spacing: 0.1em;
      animation: easterEggTitleGlow 2s infinite;
    }
    
    @keyframes easterEggTitleGlow {
      0%, 100% {
        text-shadow: 0 0 40px #FFD700, 0 0 80px #FFD700;
      }
      50% {
        text-shadow: 0 0 60px #FFD700, 0 0 120px #FFD700, 0 0 180px #FFD700;
      }
    }
    
    .easter-egg-subtitle {
      color: #FFA500;
      font-size: 1rem;
      margin-bottom: 1.5rem;
      text-shadow: 0 0 20px #FFA500;
      font-weight: bold;
    }
    
    .coins-animation-container {
      position: relative;
      height: 150px;
      margin: 1.5rem 0;
      overflow: hidden;
    }
    
    .coins-rain {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
    
    .coin-particle {
      position: absolute;
      width: 30px;
      height: 30px;
      background: #FFD700;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      font-weight: bold;
      color: #000;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
      box-shadow: 0 0 20px #FFD700, inset 0 0 10px rgba(255, 215, 0, 0.5);
      animation: coinFall 3s linear infinite;
    }
    
    @keyframes coinFall {
      0% {
        transform: translateY(-50px) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(250px) rotate(360deg);
        opacity: 0;
      }
    }
    
    .coins-explosion {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      pointer-events: none;
    }
    
    .center-coin {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 3rem;
      color: #FFD700;
      text-shadow: 0 0 30px #FFD700, 0 0 60px #FFD700;
      animation: centerCoinGlow 2s infinite alternate;
      z-index: 10;
    }
    
    @keyframes centerCoinGlow {
      0% {
        transform: translate(-50%, -50%) scale(1) rotate(0deg);
        text-shadow: 0 0 30px #FFD700, 0 0 60px #FFD700;
      }
      100% {
        transform: translate(-50%, -50%) scale(1.2) rotate(10deg);
        text-shadow: 0 0 50px #FFD700, 0 0 100px #FFD700, 0 0 150px #FFD700;
      }
    }
    
    .explosion-coin {
      position: absolute;
      width: 25px;
      height: 25px;
      background: #FFD700;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      font-weight: bold;
      color: #000;
      box-shadow: 0 0 15px #FFD700;
      animation: coinExplosion 2s ease-out forwards;
    }
    
    @keyframes coinExplosion {
      0% {
        transform: translate(-50%, -50%) scale(0) rotate(0deg);
        opacity: 1;
      }
      50% {
        opacity: 1;
      }
      100% {
        transform: translate(-50%, -50%) scale(1.5) rotate(720deg);
        opacity: 0;
      }
    }
    
    .easter-egg-message {
      margin: 1.5rem 0;
    }
    
    .reward-text {
      color: #00FF00;
      font-size: 1.3rem;
      font-weight: bold;
      margin-bottom: 0.8rem;
      text-shadow: 0 0 30px #00FF00;
      animation: rewardPulse 1.5s infinite;
    }
    
    @keyframes rewardPulse {
      0%, 100% {
        text-shadow: 0 0 30px #00FF00;
      }
      50% {
        text-shadow: 0 0 50px #00FF00, 0 0 80px #00FF00;
      }
    }
    
    .coins-reward {
      color: #FFD700;
      font-size: 2rem;
      font-weight: bold;
      margin-bottom: 0.8rem;
      text-shadow: 0 0 40px #FFD700, 0 0 80px #FFD700;
      animation: coinsRewardGlow 2s infinite;
    }
    
    @keyframes coinsRewardGlow {
      0%, 100% {
        text-shadow: 0 0 40px #FFD700, 0 0 80px #FFD700;
      }
      50% {
        text-shadow: 0 0 60px #FFD700, 0 0 120px #FFD700, 0 0 180px #FFD700;
      }
    }
    
    .congrats-text {
      color: #FFA500;
      font-size: 1rem;
      font-weight: bold;
      text-shadow: 0 0 20px #FFA500;
    }
    
    .easter-egg-btn {
      background: linear-gradient(45deg, #FFD700, #FFA500);
      color: #000;
      border: 3px solid #FFD700;
      padding: 1rem 2.5rem;
      font-size: 1.1rem;
      font-weight: bold;
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 0 40px #FFD700, inset 0 0 20px rgba(255, 215, 0, 0.3);
      text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
      margin-top: 0.8rem;
      animation: easterEggBtnPulse 2s infinite;
    }
    
    .easter-egg-btn:hover {
      background: linear-gradient(45deg, #FFA500, #FFD700);
      box-shadow: 0 0 60px #FFD700, inset 0 0 30px rgba(255, 215, 0, 0.5);
      transform: scale(1.05);
    }
    
        @keyframes easterEggBtnPulse {
      0%, 100% {
        box-shadow: 0 0 40px #FFD700, inset 0 0 20px rgba(255, 215, 0, 0.3);
      }
      50% {
        box-shadow: 0 0 60px #FFD700, inset 0 0 30px rgba(255, 215, 0, 0.5);
      }
    }
    
    /* Gods Power Modal Styles */
    .gods-power-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #000000 100%);
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 3000;
      backdrop-filter: blur(20px);
      border: 4px solid #FF6B35;
      box-shadow: 0 0 100px #FF6B35, inset 0 0 100px rgba(255, 107, 53, 0.3);
      padding: 2rem;
      box-sizing: border-box;
      overflow: hidden;
    }
    
    .gods-power-modal.active {
      display: flex;
      animation: godsPowerEntrance 1.2s ease-out;
    }
    
    @keyframes godsPowerEntrance {
      0% {
        opacity: 0;
        transform: scale(0.3) rotate(-15deg);
      }
      50% {
        opacity: 0.8;
        transform: scale(1.2) rotate(8deg);
      }
      100% {
        opacity: 1;
        transform: scale(1) rotate(0deg);
      }
    }
    
    .gods-power-content {
      background: linear-gradient(145deg, #000000 0%, #1a1a1a 50%, #000000 100%);
      border: 4px solid #FF6B35;
      border-radius: 25px;
      padding: 2.5rem 2rem;
      box-shadow: 0 0 80px #FF6B35, inset 0 0 60px rgba(255, 107, 53, 0.2);
      text-align: center;
      max-width: 85%;
      max-height: 85vh;
      position: relative;
      z-index: 3001;
      overflow-y: auto;
    }
    
    .gods-power-header h2 {
      color: #FF6B35;
      font-size: 2.2rem;
      margin-bottom: 1rem;
      text-shadow: 0 0 50px #FF6B35, 0 0 100px #FF6B35;
      font-weight: bold;
      letter-spacing: 0.1em;
      animation: godsPowerTitleGlow 2s infinite;
    }
    
    @keyframes godsPowerTitleGlow {
      0%, 100% {
        text-shadow: 0 0 50px #FF6B35, 0 0 100px #FF6B35;
      }
      50% {
        text-shadow: 0 0 80px #FF6B35, 0 0 160px #FF6B35, 0 0 240px #FF6B35;
      }
    }
    
    .gods-power-subtitle {
      color: #FFD700;
      font-size: 1.1rem;
      margin-bottom: 2rem;
      text-shadow: 0 0 25px #FFD700;
      font-weight: bold;
    }
    
    .power-animation-container {
      position: relative;
      height: 180px;
      margin: 2rem 0;
      overflow: hidden;
    }
    
    .lightning-effects {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
    
    .lightning-bolt {
      position: absolute;
      font-size: 2rem;
      color: #FF6B35;
      text-shadow: 0 0 20px #FF6B35;
      animation: lightningFlash 1.5s ease-out forwards;
    }
    
    @keyframes lightningFlash {
      0% {
        opacity: 0;
        transform: scale(0) rotate(0deg);
      }
      20% {
        opacity: 1;
        transform: scale(1.2) rotate(10deg);
      }
      100% {
        opacity: 0;
        transform: scale(0.8) rotate(-5deg);
      }
    }
    
    .power-symbol {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 4rem;
      color: #FF6B35;
      text-shadow: 0 0 40px #FF6B35, 0 0 80px #FF6B35;
      animation: powerSymbolPulse 1.5s infinite alternate;
      z-index: 10;
    }
    
    @keyframes powerSymbolPulse {
      0% {
        transform: translate(-50%, -50%) scale(1) rotate(0deg);
        text-shadow: 0 0 40px #FF6B35, 0 0 80px #FF6B35;
      }
      100% {
        transform: translate(-50%, -50%) scale(1.3) rotate(15deg);
        text-shadow: 0 0 60px #FF6B35, 0 0 120px #FF6B35, 0 0 180px #FF6B35;
      }
    }
    
    .gods-power-message {
      margin: 2rem 0;
    }
    
    .power-title {
      color: #FF6B35;
      font-size: 1.8rem;
      font-weight: bold;
      margin-bottom: 1rem;
      text-shadow: 0 0 40px #FF6B35;
      animation: powerTitlePulse 2s infinite;
    }
    
    @keyframes powerTitlePulse {
      0%, 100% { 
        text-shadow: 0 0 40px #FF6B35;
      }
      50% { 
        text-shadow: 0 0 60px #FF6B35, 0 0 100px #FF6B35;
      }
    }
    
    .power-description {
      color: #FFD700;
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: 1rem;
      text-shadow: 0 0 20px #FFD700;
    }
    
    .power-warning {
      color: #FF4757;
      font-size: 0.9rem;
      font-weight: bold;
      text-shadow: 0 0 15px #FF4757;
      animation: warningBlink 1s infinite;
    }
    
    @keyframes warningBlink {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.7;
      }
    }
    
    .gods-power-btn {
      background: linear-gradient(45deg, #FF6B35, #FF8C42);
      color: #000;
      border: 3px solid #FF6B35;
      padding: 1.2rem 3rem;
      font-size: 1.2rem;
      font-weight: bold;
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 0 50px #FF6B35, inset 0 0 30px rgba(255, 107, 53, 0.4);
      text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
      margin-top: 1rem;
      animation: godsPowerBtnPulse 2s infinite;
    }
    
    .gods-power-btn:hover {
      background: linear-gradient(45deg, #FF8C42, #FF6B35);
      box-shadow: 0 0 70px #FF6B35, inset 0 0 40px rgba(255, 107, 53, 0.6);
      transform: scale(1.05);
    }
    
    @keyframes godsPowerBtnPulse {
      0%, 100% {
        box-shadow: 0 0 50px #FF6B35, inset 0 0 30px rgba(255, 107, 53, 0.4);
      }
      50% {
        box-shadow: 0 0 70px #FF6B35, inset 0 0 40px rgba(255, 107, 53, 0.6);
      }
    }
    
    /* Clickable Letters Styles */
    .clickable-letter {
      display: inline-block;
      cursor: pointer;
      transition: all 0.3s ease;
      padding: 2px;
      border-radius: 4px;
      position: relative;
    }
    
    .clickable-letter:hover {
      color: #00FFFF;
      text-shadow: 0 0 15px #00FFFF, 0 0 30px #00FFFF;
      transform: scale(1.2);
    }
    
    .clickable-letter.clicked {
      color: #00FFFF;
      text-shadow: 0 0 20px #00FFFF, 0 0 40px #00FFFF;
      animation: letterGlow 0.5s ease-out;
    }
    
    @keyframes letterGlow {
      0% {
        transform: scale(1);
        text-shadow: 0 0 20px #00FFFF, 0 0 40px #00FFFF;
      }
      50% {
        transform: scale(1.5);
        text-shadow: 0 0 30px #00FFFF, 0 0 60px #00FFFF, 0 0 90px #00FFFF;
      }
      100% {
        transform: scale(1);
        text-shadow: 0 0 20px #00FFFF, 0 0 40px #00FFFF;
      }
    }
    
    /* Squid Power Modal Styles */
    .squid-power-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #000000 100%);
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 4000;
      backdrop-filter: blur(25px);
      border: 4px solid #00FFFF;
      box-shadow: 0 0 120px #00FFFF, inset 0 0 120px rgba(0, 255, 255, 0.3);
      padding: 2rem;
      box-sizing: border-box;
      overflow: hidden;
    }
    
    .squid-power-modal.active {
      display: flex;
      animation: squidPowerEntrance 1.5s ease-out;
    }
    
    @keyframes squidPowerEntrance {
      0% {
        opacity: 0;
        transform: scale(0.2) rotate(-20deg);
      }
      50% {
        opacity: 0.7;
        transform: scale(1.3) rotate(12deg);
      }
      100% {
        opacity: 1;
        transform: scale(1) rotate(0deg);
      }
    }
    
    .squid-power-content {
      background: linear-gradient(145deg, #000000 0%, #1a1a1a 50%, #000000 100%);
      border: 4px solid #00FFFF;
      border-radius: 30px;
      padding: 3rem 2.5rem;
      box-shadow: 0 0 100px #00FFFF, inset 0 0 80px rgba(0, 255, 255, 0.2);
      text-align: center;
      max-width: 85%;
      max-height: 85vh;
      position: relative;
      z-index: 4001;
      overflow-y: auto;
    }
    
    .squid-power-header h2 {
      color: #00FFFF;
      font-size: 2.4rem;
      margin-bottom: 1rem;
      text-shadow: 0 0 60px #00FFFF, 0 0 120px #00FFFF;
      font-weight: bold;
      letter-spacing: 0.1em;
      animation: squidPowerTitleGlow 2.5s infinite;
    }
    
    @keyframes squidPowerTitleGlow {
      0%, 100% {
        text-shadow: 0 0 60px #00FFFF, 0 0 120px #00FFFF;
      }
      50% {
        text-shadow: 0 0 90px #00FFFF, 0 0 180px #00FFFF, 0 0 270px #00FFFF;
      }
    }
    
    .squid-power-subtitle {
      color: #FFD700;
      font-size: 1.2rem;
      margin-bottom: 2.5rem;
      text-shadow: 0 0 30px #FFD700;
      font-weight: bold;
    }
    
    .squid-animation-container {
      position: relative;
      height: 200px;
      margin: 2.5rem 0;
      overflow: hidden;
    }
    
    .squid-effects {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
    
    .squid-bubble {
      position: absolute;
        font-size: 1.5rem;
      color: #00FFFF;
      text-shadow: 0 0 15px #00FFFF;
      animation: squidBubbleFloat 3s ease-out forwards;
    }
    
    @keyframes squidBubbleFloat {
      0% {
        opacity: 0;
        transform: translateY(100px) scale(0) rotate(0deg);
      }
      20% {
        opacity: 1;
        transform: translateY(80px) scale(1) rotate(10deg);
      }
      100% {
        opacity: 0;
        transform: translateY(-50px) scale(1.5) rotate(360deg);
      }
    }
    
    .squid-symbol {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 5rem;
      color: #00FFFF;
      text-shadow: 0 0 50px #00FFFF, 0 0 100px #00FFFF;
      animation: squidSymbolPulse 2s infinite alternate;
      z-index: 10;
    }
    
    @keyframes squidSymbolPulse {
      0% {
        transform: translate(-50%, -50%) scale(1) rotate(0deg);
        text-shadow: 0 0 50px #00FFFF, 0 0 100px #00FFFF;
      }
      100% {
        transform: translate(-50%, -50%) scale(1.4) rotate(20deg);
        text-shadow: 0 0 70px #00FFFF, 0 0 140px #00FFFF, 0 0 210px #00FFFF;
      }
    }
    
    .squid-power-message {
      margin: 2.5rem 0;
    }
    
    .squid-title {
      color: #00FFFF;
      font-size: 2rem;
      font-weight: bold;
      margin-bottom: 1.2rem;
      text-shadow: 0 0 50px #00FFFF;
      animation: squidTitlePulse 2.5s infinite;
    }
    
    @keyframes squidTitlePulse {
      0%, 100% {
        text-shadow: 0 0 50px #00FFFF;
      }
      50% {
        text-shadow: 0 0 80px #00FFFF, 0 0 140px #00FFFF;
      }
    }
    
    .squid-description {
      color: #FFD700;
        font-size: 1.3rem; 
      font-weight: bold;
      margin-bottom: 1.2rem;
      text-shadow: 0 0 25px #FFD700;
    }
    
    .squid-warning {
      color: #FF4757;
      font-size: 1rem;
      font-weight: bold;
      text-shadow: 0 0 20px #FF4757;
      animation: squidWarningBlink 1.2s infinite;
    }
    
    @keyframes squidWarningBlink {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.6;
      }
    }
    
    .squid-power-btn {
      background: linear-gradient(45deg, #00FFFF, #0080FF);
      color: #000;
      border: 3px solid #00FFFF;
      padding: 1.3rem 3.5rem;
        font-size: 1.3rem;
      font-weight: bold;
      border-radius: 18px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 0 60px #00FFFF, inset 0 0 40px rgba(0, 255, 255, 0.4);
      text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
      margin-top: 1.5rem;
      animation: squidPowerBtnPulse 2.5s infinite;
    }
    
    .squid-power-btn:hover {
      background: linear-gradient(45deg, #0080FF, #00FFFF);
      box-shadow: 0 0 80px #00FFFF, inset 0 0 50px rgba(0, 255, 255, 0.6);
      transform: scale(1.05);
    }
    
    @keyframes squidPowerBtnPulse {
      0%, 100% {
        box-shadow: 0 0 60px #00FFFF, inset 0 0 40px rgba(0, 255, 255, 0.4);
      }
      50% {
        box-shadow: 0 0 80px #00FFFF, inset 0 0 50px rgba(0, 255, 255, 0.6);
      }
    }
    
    /* Lock Power Modal Styles */
    .lock-power-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #000000 100%);
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 4000;
      backdrop-filter: blur(25px);
      border: 4px solid #00FFFF;
      box-shadow: 0 0 120px #00FFFF, inset 0 0 120px rgba(0, 255, 255, 0.3);
      padding: 2rem;
      box-sizing: border-box;
      overflow: hidden;
    }
    
    .lock-power-modal.active {
      display: flex;
      animation: lockPowerEntrance 1.5s ease-out;
    }
    
    @keyframes lockPowerEntrance {
      0% {
        opacity: 0;
        transform: scale(0.2) rotate(20deg);
      }
      50% {
        opacity: 0.7;
        transform: scale(1.3) rotate(-12deg);
      }
      100% {
        opacity: 1;
        transform: scale(1) rotate(0deg);
      }
    }
    
    .lock-power-content {
      background: linear-gradient(145deg, #000000 0%, #1a1a1a 50%, #000000 100%);
      border: 4px solid #00FFFF;
      border-radius: 30px;
      padding: 3rem 2.5rem;
      box-shadow: 0 0 100px #00FFFF, inset 0 0 80px rgba(0, 255, 255, 0.2);
      text-align: center;
      max-width: 85%;
      max-height: 85vh;
      position: relative;
      z-index: 4001;
      overflow-y: auto;
    }
    
    .lock-power-header h2 {
      color: #00FFFF;
      font-size: 2.4rem;
      margin-bottom: 1rem;
      text-shadow: 0 0 60px #00FFFF, 0 0 120px #00FFFF;
      font-weight: bold;
      letter-spacing: 0.1em;
      animation: lockPowerTitleGlow 2.5s infinite;
    }
    
    @keyframes lockPowerTitleGlow {
      0%, 100% {
        text-shadow: 0 0 60px #00FFFF, 0 0 120px #00FFFF;
      }
      50% {
        text-shadow: 0 0 90px #00FFFF, 0 0 180px #00FFFF, 0 0 270px #00FFFF;
      }
    }
    
    .lock-power-subtitle {
      color: #FFD700;
      font-size: 1.2rem;
      margin-bottom: 2.5rem;
      text-shadow: 0 0 30px #FFD700;
      font-weight: bold;
    }
    
    .lock-animation-container {
      position: relative;
      height: 200px;
      margin: 2.5rem 0;
      overflow: hidden;
    }
    
    .lock-effects {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
    
    .lock-particle {
      position: absolute;
      font-size: 1.5rem;
      color: #00FFFF;
      text-shadow: 0 0 15px #00FFFF;
      animation: lockParticleFloat 3s ease-out forwards;
    }
    
    @keyframes lockParticleFloat {
      0% {
        opacity: 0;
        transform: translateY(100px) scale(0) rotate(0deg);
      }
      20% {
        opacity: 1;
        transform: translateY(80px) scale(1) rotate(10deg);
      }
      100% {
        opacity: 0;
        transform: translateY(-50px) scale(1.5) rotate(360deg);
      }
    }
    
    .lock-symbol {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 5rem;
      color: #00FFFF;
      text-shadow: 0 0 50px #00FFFF, 0 0 100px #00FFFF;
      animation: lockSymbolPulse 2s infinite alternate;
      z-index: 10;
    }
    
    @keyframes lockSymbolPulse {
      0% {
        transform: translate(-50%, -50%) scale(1) rotate(0deg);
        text-shadow: 0 0 50px #00FFFF, 0 0 100px #00FFFF;
      }
      100% {
        transform: translate(-50%, -50%) scale(1.4) rotate(-20deg);
        text-shadow: 0 0 70px #00FFFF, 0 0 140px #00FFFF, 0 0 210px #00FFFF;
      }
    }
    
    .lock-power-message {
      margin: 2.5rem 0;
    }
    
    .lock-title {
      color: #00FFFF;
      font-size: 2rem;
      font-weight: bold;
      margin-bottom: 1.2rem;
      text-shadow: 0 0 50px #00FFFF;
      animation: lockTitlePulse 2.5s infinite;
    }
    
    @keyframes lockTitlePulse {
      0%, 100% {
        text-shadow: 0 0 50px #00FFFF;
      }
      50% {
        text-shadow: 0 0 80px #00FFFF, 0 0 140px #00FFFF;
      }
    }
    
    .lock-description {
      color: #FFD700;
      font-size: 1.3rem;
      font-weight: bold;
      margin-bottom: 1.2rem;
      text-shadow: 0 0 25px #FFD700;
    }
    
    .lock-warning {
      color: #FF4757;
      font-size: 1rem;
      font-weight: bold;
      text-shadow: 0 0 20px #FF4757;
      animation: lockWarningBlink 1.2s infinite;
    }
    
    @keyframes lockWarningBlink {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.6;
      }
    }
    
    .lock-power-btn {
      background: linear-gradient(45deg, #00FFFF, #0080FF);
      color: #000;
      border: 3px solid #00FFFF;
    }
    
      /* Admin Panel Styles */
  .admin-panel {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10000;
    backdrop-filter: blur(10px);
  }
  
  .admin-content {
    background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
    border: 2px solid #00ff00;
    border-radius: 15px;
    padding: 30px;
    max-width: 800px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 0 30px rgba(0, 255, 0, 0.5);
    animation: adminEntrance 0.8s ease-out;
  }
  
  @keyframes adminEntrance {
    from {
      opacity: 0;
      transform: scale(0.8) translateY(-50px);
    }
    to {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }
  
  .admin-header h3 {
    color: #00ff00;
    text-align: center;
    margin: 0 0 10px 0;
    font-size: 1.8rem;
    text-shadow: 0 0 10px #00ff00;
  }
  
  .admin-subtitle {
    color: #ffffff;
    text-align: center;
    margin-bottom: 25px;
    font-size: 1.1rem;
  }
  
  .admin-stats {
    display: flex;
    justify-content: space-around;
    margin-bottom: 30px;
    flex-wrap: wrap;
  }
  
  .stat-item {
    background: rgba(0, 255, 0, 0.1);
    border: 1px solid #00ff00;
    border-radius: 10px;
    padding: 15px;
    text-align: center;
    min-width: 150px;
    margin: 5px;
  }
  
  .stat-icon {
    font-size: 1.5rem;
    display: block;
    margin-bottom: 5px;
  }
  
  .stat-label {
    color: #ffffff;
    font-size: 0.9rem;
    display: block;
    margin-bottom: 5px;
  }
  
  .stat-value {
    color: #00ff00;
    font-size: 1.3rem;
    font-weight: bold;
    text-shadow: 0 0 5px #00ff00;
  }
  
  .players-list h4 {
    color: #00ff00;
    margin: 0 0 15px 0;
    text-align: center;
    font-size: 1.3rem;
  }
  
  .players-container {
    max-height: 300px;
    overflow-y: auto;
    border: 1px solid #00ff00;
    border-radius: 10px;
    padding: 10px;
    background: rgba(0, 0, 0, 0.3);
  }
  
  .player-entry {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    margin: 12px 0;
    background: linear-gradient(135deg, rgba(0, 255, 0, 0.1), rgba(0, 200, 0, 0.05));
    border-radius: 12px;
    border: 2px solid rgba(0, 255, 0, 0.3);
    box-shadow: 0 4px 15px rgba(0, 255, 0, 0.2);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  
  .player-entry:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 255, 0, 0.4);
    border-color: rgba(0, 255, 0, 0.6);
  }
  
  .player-entry::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(180deg, #00ff00, #00cc00);
    box-shadow: 0 0 10px #00ff00;
  }
  
  .player-info {
    display: flex;
    flex-direction: column;
    gap: 8px;
    flex: 1;
  }
  
  .player-name {
    color: #ffffff;
    font-weight: bold;
    font-size: 1.2rem;
    text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
    letter-spacing: 0.5px;
  }
  
  .player-coins {
    color: #ffd700;
    font-weight: bold;
    font-size: 1.1rem;
    text-shadow: 0 0 15px #ffd700;
    display: flex;
    align-items: center;
    gap: 5px;
  }
  
  .player-stats {
    display: flex;
    gap: 12px;
    font-size: 0.9rem;
    flex-wrap: wrap;
  }
  
  .player-stats span {
    background: linear-gradient(45deg, rgba(0, 255, 0, 0.2), rgba(0, 200, 0, 0.1));
    padding: 8px 12px;
    border-radius: 8px;
    border: 1px solid rgba(0, 255, 0, 0.4);
    color: #ffffff;
    font-weight: 500;
    text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
    transition: all 0.3s ease;
  }
  
  .player-stats span:hover {
    background: linear-gradient(45deg, rgba(0, 255, 0, 0.3), rgba(0, 200, 0, 0.2));
    transform: scale(1.05);
  }
  
  .admin-footer {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 25px;
  }
  
  .admin-btn {
    background: linear-gradient(45deg, #00ff00, #00cc00);
    border: none;
    border-radius: 8px;
    padding: 12px 20px;
    color: #000000;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 1rem;
  }
  
  .admin-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 255, 0, 0.4);
  }
  
  /* Admin Panel Animations */
  @keyframes statUpdate {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.1);
      color: #00ff00;
      text-shadow: 0 0 20px #00ff00;
    }
    100% {
      transform: scale(1);
    }
  }
  
  @keyframes playerEntrySlide {
    0% {
      opacity: 0;
      transform: translateX(-30px);
    }
    100% {
      opacity: 1;
      transform: translateX(0);
    }
  }

  /* ALL IN Game Styles */
  .all-in-container {
    position: relative;
    display: none;
    margin: 15px 0;
    animation: allInPulse 3s infinite;
  }

  .all-in-container.visible {
    display: block;
  }

  @keyframes allInPulse {
    0%, 100% { 
      transform: scale(1);
      box-shadow: 0 0 20px rgba(255, 0, 0, 0.3);
    }
    50% { 
      transform: scale(1.05);
      box-shadow: 0 0 40px rgba(255, 0, 0, 0.6);
    }
  }

  .all-in-btn {
    background: linear-gradient(45deg, #ff0000, #8b0000);
    border: 3px solid #ff0000;
    border-radius: 15px;
    padding: 20px 30px;
    color: #ffffff;
    font-size: 1.4rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    text-shadow: 0 0 10px #ffffff;
    box-shadow: 0 0 30px rgba(255, 0, 0, 0.5);
    width: 100%;
    position: relative;
    overflow: hidden;
  }

  .all-in-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.5s;
  }

  .all-in-btn:hover::before {
    left: 100%;
  }

  .all-in-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 0 50px rgba(255, 0, 0, 0.8);
    background: linear-gradient(45deg, #ff3333, #cc0000);
  }

  .all-in-btn:active {
    transform: translateY(0);
    box-shadow: 0 0 20px rgba(255, 0, 0, 0.4);
  }

  .all-in-subtitle {
    color: #ff6666;
    font-size: 0.9rem;
    text-align: center;
    margin-top: 5px;
    font-style: italic;
  }

  /* Front Man Call Button Styles */
  .frontman-call-container {
    position: relative;
    display: none;
    margin: 15px 0;
    animation: frontmanCallShake 2s infinite;
  }

  .frontman-call-container.visible {
    display: block;
  }

  @keyframes frontmanCallShake {
    0%, 100% { 
      transform: translateX(0);
    }
    10%, 30%, 50%, 70%, 90% { 
      transform: translateX(-5px);
    }
    20%, 40%, 60%, 80% { 
      transform: translateX(5px);
    }
  }

  .frontman-call-btn {
    background: linear-gradient(45deg, #ff6600, #cc5500);
    border: 3px solid #ff6600;
    border-radius: 15px;
    padding: 20px 30px;
    color: #ffffff;
    font-size: 1.4rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    text-shadow: 0 0 10px #ffffff;
    box-shadow: 0 0 30px rgba(255, 102, 0, 0.5);
    width: 100%;
    position: relative;
    overflow: hidden;
  }

  .frontman-call-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.5s;
  }

  .frontman-call-btn:hover::before {
    left: 100%;
  }

  .frontman-call-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 0 50px rgba(255, 102, 0, 0.8);
    background: linear-gradient(45deg, #ff7733, #dd6600);
  }

  .frontman-call-btn:active {
    transform: translateY(0);
    box-shadow: 0 0 20px rgba(255, 102, 0, 0.4);
  }

  /* Player Fight Button Styles */
  .player-fight-container {
    position: relative;
    display: none;
    margin: 15px 0;
    animation: playerFightPulse 2s infinite;
  }

  .player-fight-container.visible {
    display: block;
  }

  @keyframes playerFightPulse {
    0%, 100% { 
      transform: scale(1);
      box-shadow: 0 0 20px rgba(255, 0, 255, 0.3);
    }
    50% { 
      transform: scale(1.05);
      box-shadow: 0 0 40px rgba(255, 0, 255, 0.6);
    }
  }

  .player-fight-btn {
    background: linear-gradient(45deg, #ff00ff, #cc00cc);
    border: 3px solid #ff00ff;
    border-radius: 15px;
    padding: 20px 30px;
    color: #ffffff;
    font-size: 1.4rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    text-shadow: 0 0 10px #ffffff;
    box-shadow: 0 0 30px rgba(255, 0, 255, 0.5);
    width: 100%;
    position: relative;
    overflow: hidden;
  }

  .player-fight-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.5s;
  }

  .player-fight-btn:hover::before {
    left: 100%;
  }

  .player-fight-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 0 50px rgba(255, 0, 255, 0.8);
    background: linear-gradient(45deg, #ff33ff, #dd00dd);
  }

  .player-fight-btn:active {
    transform: translateY(0);
    box-shadow: 0 0 20px rgba(255, 0, 255, 0.4);
  }

  /* Simple ALL IN Modal Styles */
  .simple-all-in-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    animation: modalFadeIn 0.3s ease-out;
  }

  @keyframes modalFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  .simple-all-in-content {
    background: linear-gradient(135deg, #1a0000, #330000);
    border: 3px solid #ff0000;
    border-radius: 20px;
    padding: 40px;
    text-align: center;
    max-width: 500px;
    width: 90%;
    box-shadow: 0 0 50px rgba(255, 0, 0, 0.5);
    animation: modalSlideIn 0.3s ease-out;
  }

  @keyframes modalSlideIn {
    from { 
      transform: scale(0.8);
      opacity: 0;
    }
    to { 
      transform: scale(1);
      opacity: 1;
    }
  }

  .simple-all-in-content h2 {
    color: #ff0000;
    font-size: 2.5rem;
    margin: 0 0 20px 0;
    text-shadow: 0 0 20px #ff0000;
  }

  .all-in-question {
    color: #ffffff;
    font-size: 1.3rem;
    margin: 20px 0;
    line-height: 1.5;
  }

  .all-in-question strong {
    color: #ff6666;
  }

  .all-in-buttons {
    display: flex;
    gap: 20px;
    justify-content: center;
    margin-top: 30px;
  }

  .all-in-yes-btn, .all-in-no-btn, .all-in-close-btn {
    padding: 15px 30px;
    border: none;
    border-radius: 10px;
    font-size: 1.2rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    min-width: 120px;
  }

  .all-in-yes-btn {
    background: linear-gradient(45deg, #ff0000, #cc0000);
    color: #ffffff;
    box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
  }

  .all-in-yes-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 30px rgba(255, 0, 0, 0.8);
  }

  .all-in-no-btn {
    background: linear-gradient(45deg, #666666, #444444);
    color: #ffffff;
    box-shadow: 0 0 20px rgba(102, 102, 102, 0.5);
  }

  .all-in-no-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 30px rgba(102, 102, 102, 0.8);
  }

  .all-in-close-btn {
    background: linear-gradient(45deg, #ff0000, #cc0000);
    color: #ffffff;
    box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
  }

  .all-in-close-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 30px rgba(255, 0, 0, 0.8);
  }

  /* Front Man Modal Styles */
  .frontman-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    animation: modalFadeIn 0.3s ease-out;
  }

  .frontman-content {
    background: linear-gradient(135deg, #1a1a00, #333300);
    border: 3px solid #ff6600;
    border-radius: 20px;
    padding: 40px;
    text-align: center;
    max-width: 500px;
    width: 90%;
    box-shadow: 0 0 50px rgba(255, 102, 0, 0.5);
    animation: modalSlideIn 0.3s ease-out;
  }

  .frontman-content h2 {
    color: #ff6600;
    font-size: 2.5rem;
    margin: 0 0 20px 0;
    text-shadow: 0 0 20px #ff6600;
  }

  .frontman-question {
    color: #ffffff;
    font-size: 1.5rem;
    margin: 20px 0;
    line-height: 1.5;
    font-weight: bold;
  }

  .frontman-buttons {
    display: flex;
    gap: 20px;
    justify-content: center;
    margin-top: 30px;
  }

  .frontman-yes-btn, .frontman-no-btn, .frontman-close-btn {
    padding: 15px 30px;
    border: none;
    border-radius: 10px;
    font-size: 1.2rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    min-width: 120px;
  }

  .frontman-yes-btn {
    background: linear-gradient(45deg, #ff6600, #cc5500);
    color: #ffffff;
    box-shadow: 0 0 20px rgba(255, 102, 0, 0.5);
  }

  .frontman-yes-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 30px rgba(255, 102, 0, 0.8);
  }

  .frontman-no-btn {
    background: linear-gradient(45deg, #666666, #444444);
    color: #ffffff;
    box-shadow: 0 0 20px rgba(102, 102, 102, 0.5);
  }

  .frontman-no-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 30px rgba(102, 102, 102, 0.8);
  }

  .frontman-close-btn {
    background: linear-gradient(45deg, #ff6600, #cc5500);
    color: #ffffff;
    box-shadow: 0 0 20px rgba(255, 102, 0, 0.5);
  }

  .frontman-close-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 30px rgba(255, 102, 0, 0.8);
  }

  /* Player Fight Modal Styles */
  .player-fight-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    animation: modalFadeIn 0.3s ease-out;
  }

  .player-fight-content {
    background: linear-gradient(135deg, #1a001a, #330033);
    border: 3px solid #ff00ff;
    border-radius: 20px;
    padding: 40px;
    text-align: center;
    max-width: 600px;
    width: 90%;
    box-shadow: 0 0 50px rgba(255, 0, 255, 0.5);
    animation: modalSlideIn 0.3s ease-out;
  }

  .player-fight-content h2 {
    color: #ff00ff;
    font-size: 2.5rem;
    margin: 0 0 20px 0;
    text-shadow: 0 0 20px #ff00ff;
  }

  .player-fight-subtitle {
    color: #ffffff;
    font-size: 1.2rem;
    margin: 20px 0;
    line-height: 1.5;
  }

  .rps-buttons {
    display: flex;
    gap: 20px;
    justify-content: center;
    margin: 30px 0;
    flex-wrap: wrap;
  }

  .rps-btn {
    padding: 15px;
    border: 3px solid #ff00ff;
    border-radius: 15px;
    font-size: 2rem;
    background: linear-gradient(45deg, #ff00ff, #cc00cc);
    color: #ffffff;
    cursor: pointer;
    transition: all 0.3s ease;
    min-width: 80px;
    text-shadow: 0 0 10px #ffffff;
    box-shadow: 0 0 20px rgba(255, 0, 255, 0.5);
  }

  .rps-btn:hover {
    transform: translateY(-5px) scale(1.1);
    box-shadow: 0 0 30px rgba(255, 0, 255, 0.8);
    background: linear-gradient(45deg, #ff33ff, #dd00dd);
  }

  .rps-btn:active {
    transform: translateY(0) scale(1);
  }

  .fight-result {
    margin: 30px 0;
    padding: 20px;
    border-radius: 15px;
    font-size: 1.3rem;
    font-weight: bold;
  }

  .fight-win {
    background: linear-gradient(45deg, rgba(0, 255, 0, 0.2), rgba(0, 200, 0, 0.1));
    border: 2px solid #00ff00;
    color: #00ff00;
  }

  .fight-lose {
    background: linear-gradient(45deg, rgba(255, 0, 0, 0.2), rgba(200, 0, 0, 0.1));
    border: 2px solid #ff0000;
    color: #ff0000;
  }

  .player-fight-close-btn {
    padding: 15px 30px;
    border: none;
    border-radius: 10px;
    font-size: 1.2rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    min-width: 120px;
    background: linear-gradient(45deg, #ff00ff, #cc00cc);
    color: #ffffff;
    box-shadow: 0 0 20px rgba(255, 0, 255, 0.5);
  }

  .player-fight-close-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 30px rgba(255, 0, 255, 0.8);
  }

  .all-in-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(255, 0, 0, 0.4);
  }

  .all-in-btn.cancel {
    background: linear-gradient(45deg, #666666, #333333);
  }

  .all-in-btn.cancel:hover {
    box-shadow: 0 5px 15px rgba(102, 102, 102, 0.4);
  }

  /* Fusion Power Modal Styles */
  .fusion-power-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #000000 100%);
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 4000;
      backdrop-filter: blur(25px);
      border: 4px solid #9933ff;
      box-shadow: 0 0 120px #9933ff, inset 0 0 120px rgba(153, 51, 255, 0.3);
      padding: 2rem;
      box-sizing: border-box;
      overflow: hidden;
    }
    
    .fusion-power-modal.active {
      display: flex;
      animation: fusionPowerEntrance 1.5s ease-out;
    }
    
    @keyframes fusionPowerEntrance {
      0% {
        opacity: 0;
        transform: scale(0.2) rotate(20deg);
      }
      50% {
        opacity: 0.7;
        transform: scale(1.3) rotate(-12deg);
      }
      100% {
        opacity: 1;
        transform: scale(1) rotate(0deg);
      }
    }
    
    .fusion-power-content {
      background: linear-gradient(145deg, #000000 0%, #1a1a1a 50%, #000000 100%);
      border: 4px solid #9933ff;
      border-radius: 30px;
      padding: 3rem 2.5rem;
      box-shadow: 0 0 100px #9933ff, inset 0 0 80px rgba(153, 51, 255, 0.2);
      text-align: center;
      max-width: 85%;
      max-height: 85vh;
      position: relative;
      z-index: 4001;
      overflow-y: auto;
    }
    
    .fusion-power-header h2 {
      color: #9933ff;
      font-size: 2.4rem;
      margin-bottom: 1rem;
      text-shadow: 0 0 60px #9933ff, 0 0 120px #9933ff;
      font-weight: bold;
      letter-spacing: 0.1em;
      animation: fusionPowerTitleGlow 2.5s infinite;
    }
    
    @keyframes fusionPowerTitleGlow {
      0%, 100% {
        text-shadow: 0 0 60px #9933ff, 0 0 120px #9933ff;
      }
      50% {
        text-shadow: 0 0 90px #9933ff, 0 0 180px #9933ff, 0 0 270px #9933ff;
      }
    }
    
    .fusion-power-subtitle {
      color: #FFD700;
      font-size: 1.2rem;
      margin-bottom: 2.5rem;
      text-shadow: 0 0 30px #FFD700;
      font-weight: bold;
    }
    
    .fusion-animation-container {
      position: relative;
      height: 200px;
      margin: 2.5rem 0;
      overflow: hidden;
    }
    
    .fusion-effects {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
    
    .fusion-particle {
      position: absolute;
      font-size: 1.5rem;
      color: #9933ff;
      text-shadow: 0 0 15px #9933ff;
      animation: fusionParticleFloat 3s ease-out forwards;
    }
    
    @keyframes fusionParticleFloat {
      0% {
        opacity: 0;
        transform: translateY(100px) scale(0) rotate(0deg);
      }
      20% {
        opacity: 1;
        transform: translateY(80px) scale(1) rotate(10deg);
      }
      100% {
        opacity: 0;
        transform: translateY(-50px) scale(1.5) rotate(360deg);
      }
    }
    
    .fusion-symbol {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 5rem;
      color: #9933ff;
      text-shadow: 0 0 50px #9933ff, 0 0 100px #9933ff;
      animation: fusionSymbolPulse 2s infinite alternate;
      z-index: 10;
    }
    
    @keyframes fusionSymbolPulse {
      0% {
        transform: translate(-50%, -50%) scale(1) rotate(0deg);
        text-shadow: 0 0 50px #9933ff, 0 0 100px #9933ff;
      }
      100% {
        transform: translate(-50%, -50%) scale(1.4) rotate(-20deg);
        text-shadow: 0 0 70px #9933ff, 0 0 140px #9933ff, 0 0 210px #9933ff;
      }
    }
    
    .fusion-power-message {
      margin: 2.5rem 0;
    }
    
    .fusion-title {
      color: #9933ff;
      font-size: 2rem;
      font-weight: bold;
      margin-bottom: 1.2rem;
      text-shadow: 0 0 50px #9933ff;
      animation: fusionTitlePulse 2.5s infinite;
    }
    
    @keyframes fusionTitlePulse {
      0%, 100% {
        text-shadow: 0 0 50px #9933ff;
      }
      50% {
        text-shadow: 0 0 80px #9933ff, 0 0 140px #9933ff;
      }
    }
    
    .fusion-description {
      color: #FFD700;
      font-size: 1.3rem;
      font-weight: bold;
      margin-bottom: 1.2rem;
      text-shadow: 0 0 25px #FFD700;
    }
    
    .fusion-warning {
      color: #FF4757;
      font-size: 1rem;
      font-weight: bold;
      text-shadow: 0 0 20px #FF4757;
      animation: fusionWarningBlink 1.2s infinite;
    }
    
    @keyframes fusionWarningBlink {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.6;
      }
    }
    
    @keyframes digitRevealGlow {
      0%, 100% {
        box-shadow: 0 0 20px #00ff00, inset 0 0 10px #00ff00;
        transform: scale(1.1);
      }
      50% {
        box-shadow: 0 0 40px #00ff00, inset 0 0 20px #00ff00;
        transform: scale(1.15);
      }
    }
    
    @keyframes messageGlow {
      0%, 100% {
        box-shadow: 0 0 30px #00ff00;
        transform: translate(-50%, -50%) scale(1);
      }
      50% {
        box-shadow: 0 0 50px #00ff00, 0 0 70px #00ff00;
        transform: translate(-50%, -50%) scale(1.05);
      }
    }
    
    .fusion-power-btn {
      background: linear-gradient(45deg, #9933ff, #6600cc);
      color: #fff;
      border: 3px solid #9933ff;
      padding: 1.3rem 3.5rem;
      font-size: 1.3rem;
      font-weight: bold;
      border-radius: 18px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 0 60px #00FFFF, inset 0 0 40px rgba(0, 255, 255, 0.4);
      text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
      margin-top: 1.5rem;
      animation: lockPowerBtnPulse 2.5s infinite;
    }
    
    .lock-power-btn:hover {
      background: linear-gradient(45deg, #0080FF, #00FFFF);
      box-shadow: 0 0 80px #00FFFF, inset 0 0 50px rgba(0, 255, 255, 0.6);
      transform: scale(1.05);
    }
    
    @keyframes lockPowerBtnPulse {
      0%, 100% {
        box-shadow: 0 0 60px #00FFFF, inset 0 0 40px rgba(0, 255, 255, 0.4);
      }
      50% {
        box-shadow: 0 0 80px #00FFFF, inset 0 0 50px rgba(0, 255, 255, 0.6);
      }
    }
    
    /* Daily Reward Container */
    .daily-reward-container {
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 1rem 0;
      padding: 1rem 2rem;
      background: linear-gradient(135deg, #e60073 0%, #1a1a1a 100%);
      border: 3px solid #e60073;
      border-radius: 15px;
      box-shadow: 0 0 30px #e60073, inset 0 0 20px rgba(230, 0, 115, 0.3);
      backdrop-filter: blur(5px);
      margin-left: auto;
      margin-right: auto;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 200px;
      max-width: 300px;
    }
    
    .daily-reward-container:hover {
      transform: scale(1.05);
      box-shadow: 0 0 40px #e60073, inset 0 0 30px rgba(230, 0, 115, 0.5);
    }
    
    .daily-reward-container .envelope-btn {
      background: transparent;
      border: none;
      cursor: pointer;
      transition: all 0.3s;
      font-family: 'Orbitron', Arial, sans-serif;
      font-weight: bold;
      font-size: 1.2rem;
      color: #fff;
      text-shadow: 0 0 15px rgba(0, 0, 0, 0.8);
      padding: 0;
      width: 100%;
      height: auto;
    }
    
    .daily-reward-container .envelope-btn:hover {
      transform: none;
      text-shadow: 0 0 20px rgba(0, 0, 0, 0.9);
    }
    
    .daily-reward-container .envelope-btn.disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    /* Daily Reward Modal Styles */
    .daily-reward-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 10000;
      justify-content: center;
      align-items: center;
    }
    
    .daily-reward-content {
      background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
      border: 3px solid #FF6B35;
      border-radius: 15px;
      padding: 1.5rem;
      text-align: center;
      max-width: 300px;
      width: 90%;
      position: relative;
      box-shadow: 0 0 50px #FF6B35;
    }
    
    .daily-reward-header h2 {
      color: #FF6B35;
      font-size: 1.4rem;
      margin-bottom: 0.3rem;
      text-shadow: 0 0 20px #FF6B35;
    }
    
    .daily-reward-subtitle {
      color: #FFD700;
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }
    
    .daily-reward-animation {
      position: relative;
      height: 80px;
      margin: 1rem 0;
      overflow: hidden;
    }
    
    .reward-effects {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
    
    .reward-particle {
      position: absolute;
      font-size: 1.2rem;
      color: #FF6B35;
      text-shadow: 0 0 10px #FF6B35;
      animation: rewardParticleFloat 2s ease-out forwards;
    }
    
    @keyframes rewardParticleFloat {
      0% {
        opacity: 0;
        transform: translateY(50px) scale(0) rotate(0deg);
      }
      20% {
        opacity: 1;
        transform: translateY(30px) scale(1) rotate(10deg);
      }
      100% {
        opacity: 0;
        transform: translateY(-30px) scale(1.2) rotate(360deg);
      }
    }
    
    .reward-symbol {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2.5rem;
      color: #FF6B35;
      text-shadow: 0 0 30px #FF6B35;
      animation: rewardSymbolPulse 1.5s infinite alternate;
    }
    
    @keyframes rewardSymbolPulse {
      0% {
        transform: translate(-50%, -50%) scale(1) rotate(0deg);
      }
      100% {
        transform: translate(-50%, -50%) scale(1.2) rotate(-10deg);
      }
    }
    
    .reward-title {
      color: #FF6B35;
      font-size: 1.1rem;
      font-weight: bold;
      margin-bottom: 0.3rem;
      text-shadow: 0 0 15px #FF6B35;
    }
    
    .reward-amount {
      color: #FFD700;
      font-size: 1.3rem;
      font-weight: bold;
      margin-bottom: 0.3rem;
      text-shadow: 0 0 20px #FFD700;
    }
    
    .reward-description {
      color: #ccc;
      font-size: 0.8rem;
      margin-bottom: 1rem;
    }
    
    .daily-reward-footer .daily-reward-btn {
      background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
      color: #fff;
      border: 2px solid #FF6B35;
      padding: 0.6rem 1.5rem;
      font-size: 1rem;
      font-weight: bold;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 0 20px #FF6B35;
    }
    
    .daily-reward-footer .daily-reward-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 30px #FF6B35;
    }

    /* Plus One Coin Effect Styles */
    .plus-one-effect {
      position: fixed;
      pointer-events: none;
      z-index: 10000;
    }
    
    .plus-one-content {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
      border: 2px solid #FFD700;
      border-radius: 20px;
      padding: 0.5rem 1rem;
      box-shadow: 0 0 20px #FFD700, inset 0 0 10px rgba(255, 215, 0, 0.3);
      font-family: 'Orbitron', Arial, sans-serif;
      font-weight: bold;
      text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    }
    
    .plus-one-icon {
      font-size: 1.2rem;
      animation: coinSpin 1s ease-out;
    }
    
    .plus-one-text {
      color: #000;
      font-size: 1.1rem;
      font-weight: bold;
      animation: textGlow 1.5s ease-out;
    }
    
    @keyframes coinSpin {
      0% {
        transform: rotate(0deg) scale(0.5);
      }
      50% {
        transform: rotate(180deg) scale(1.2);
      }
      100% {
        transform: rotate(360deg) scale(1);
      }
    }
    
    @keyframes textGlow {
      0% {
        text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
      }
      50% {
        text-shadow: 0 0 15px #FFD700, 0 0 25px #FFD700;
      }
      100% {
        text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
      }
    }

    /* Top 3 Leaderboard Styles */
    .top3-leaderboard {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 1rem 0;
      padding: 1rem;
      background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
      border: 3px solid #FFD700;
      border-radius: 15px;
      box-shadow: 0 0 30px #FFD700, inset 0 0 20px rgba(255, 215, 0, 0.1);
      backdrop-filter: blur(5px);
      margin-left: auto;
      margin-right: auto;
      min-width: 280px;
      max-width: 350px;
      transition: all 0.3s ease;
    }

    .top3-leaderboard:hover {
      transform: scale(1.02);
      box-shadow: 0 0 40px #FFD700, inset 0 0 30px rgba(255, 215, 0, 0.2);
    }

    .leaderboard-header {
      text-align: center;
      margin-bottom: 1rem;
    }

    .leaderboard-title {
      display: block;
      font-family: 'Orbitron', Arial, sans-serif;
      font-weight: bold;
      font-size: 1.1rem;
      color: #FFD700;
      text-shadow: 0 0 15px #FFD700;
      margin-bottom: 0.3rem;
    }

    .leaderboard-subtitle {
      display: block;
      font-size: 0.8rem;
      color: #ccc;
      font-style: italic;
    }

    .leaderboard-content {
      width: 100%;
    }

    .loading-leaderboard {
      text-align: center;
      color: #ccc;
      font-style: italic;
      padding: 1rem;
    }

    .leaderboard-entry {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.5rem 0.8rem;
      margin-bottom: 0.5rem;
      background: linear-gradient(135deg, #333 0%, #444 100%);
      border: 2px solid #666;
      border-radius: 8px;
      transition: all 0.3s ease;
    }

    .leaderboard-entry:hover {
      transform: scale(1.02);
      border-color: #FFD700;
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
    }

    .leaderboard-entry.rank-1 {
      border-color: #FFD700;
      background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
      box-shadow: 0 0 20px #FFD700;
    }

    .leaderboard-entry.rank-2 {
      border-color: #C0C0C0;
      background: linear-gradient(135deg, #C0C0C0 0%, #A0A0A0 100%);
      box-shadow: 0 0 15px #C0C0C0;
    }

    .leaderboard-entry.rank-3 {
      border-color: #CD7F32;
      background: linear-gradient(135deg, #CD7F32 0%, #B8860B 100%);
      box-shadow: 0 0 15px #CD7F32;
    }

    .leaderboard-rank {
      font-weight: bold;
      font-size: 1.2rem;
      margin-right: 0.8rem;
    }

    .rank-1 .leaderboard-rank {
      color: #000;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
    }

    .rank-2 .leaderboard-rank {
      color: #000;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
    }

    .rank-3 .leaderboard-rank {
      color: #000;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
    }

    .leaderboard-player {
      flex: 1;
      text-align: left;
    }

    .leaderboard-name {
      font-weight: bold;
      font-size: 0.9rem;
      color: #fff;
      margin-bottom: 0.2rem;
    }

    .rank-1 .leaderboard-name {
      color: #000;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
    }

    .rank-2 .leaderboard-name {
      color: #000;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
    }

    .rank-3 .leaderboard-name {
      color: #000;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
    }

    .leaderboard-coins {
      font-size: 0.8rem;
      color: #FFD700;
      font-weight: bold;
    }

    .rank-1 .leaderboard-coins,
    .rank-2 .leaderboard-coins,
    .rank-3 .leaderboard-coins {
      color: #000;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
    }

    /* Achievements Button Styles */
    .achievements-container {
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 1rem 0;
      padding: 1rem 2rem;
      background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
      border: 3px solid #FFD700;
      border-radius: 15px;
      box-shadow: 0 0 30px #FFD700, inset 0 0 20px rgba(255, 215, 0, 0.3);
      backdrop-filter: blur(5px);
      margin-left: auto;
      margin-right: auto;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 200px;
      max-width: 300px;
    }

    .achievements-container:hover {
      transform: scale(1.05);
      box-shadow: 0 0 40px #FFD700, inset 0 0 30px rgba(255, 215, 0, 0.5);
    }

    .achievements-btn {
      background: transparent;
      border: none;
      cursor: pointer;
      transition: all 0.3s;
      font-family: 'Orbitron', Arial, sans-serif;
      font-weight: bold;
      font-size: 1.2rem;
      color: #000;
      text-shadow: 0 0 15px rgba(0, 0, 0, 0.8);
      padding: 0;
      width: 100%;
      height: auto;
    }

    .achievements-btn:hover {
      transform: none;
      text-shadow: 0 0 20px rgba(0, 0, 0, 0.9);
    }

    /* Achievements Modal Styles */
    .achievements-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 10000;
      justify-content: center;
      align-items: center;
    }

    .achievements-content {
      background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
      border: 3px solid #FFD700;
      border-radius: 15px;
      padding: 1.5rem;
      text-align: center;
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
      box-shadow: 0 0 50px #FFD700;
    }

    .achievements-header h2 {
      color: #FFD700;
      font-size: 1.4rem;
      margin-bottom: 0.3rem;
      text-shadow: 0 0 20px #FFD700;
    }

    .achievements-subtitle {
      color: #FF6B35;
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }

    .achievements-tabs {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }

    .tab-btn {
      background: linear-gradient(135deg, #333 0%, #555 100%);
      color: #ccc;
      border: 2px solid #666;
      padding: 0.5rem 1rem;
      font-size: 0.8rem;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .tab-btn.active {
      background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
      color: #000;
      border-color: #FFD700;
      box-shadow: 0 0 15px #FFD700;
    }

    .tab-btn:hover {
      transform: scale(1.05);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* Daily Achievements Grid */
    .achievements-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .achievement-item {
      background: linear-gradient(135deg, #333 0%, #444 100%);
      border: 2px solid #666;
      border-radius: 10px;
      padding: 1rem;
      text-align: center;
      transition: all 0.3s;
    }

    .achievement-item.completed {
      border-color: #FFD700;
      box-shadow: 0 0 15px #FFD700;
    }

    .achievement-icon {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .achievement-title {
      color: #FFD700;
      font-size: 0.9rem;
      font-weight: bold;
      margin-bottom: 0.3rem;
    }

    .achievement-description {
      color: #ccc;
      font-size: 0.7rem;
      margin-bottom: 0.5rem;
    }

    .achievement-progress {
      background: #333;
      border-radius: 10px;
      height: 8px;
      margin-bottom: 0.5rem;
      overflow: hidden;
    }

    .achievement-bar {
      background: linear-gradient(90deg, #FFD700 0%, #FFA500 100%);
      height: 100%;
      transition: width 0.5s;
    }

    .achievement-reward {
      color: #FF6B35;
      font-size: 0.8rem;
      font-weight: bold;
    }

    /* Streaks Styles */
    .streaks-container {
      text-align: left;
    }

    .streak-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      background: linear-gradient(135deg, #333 0%, #444 100%);
      border: 2px solid #FFD700;
      border-radius: 10px;
      padding: 1rem;
      margin-bottom: 1rem;
    }

    .streak-icon {
      font-size: 2rem;
      animation: streakPulse 2s infinite;
    }

    @keyframes streakPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    @keyframes slideInRight {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @keyframes scaleIn {
      from {
        transform: translate(-50%, -50%) scale(0.5);
        opacity: 0;
      }
      to {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }
    }

    .streak-info {
      flex: 1;
    }

    .streak-title {
      color: #FFD700;
      font-size: 0.9rem;
      font-weight: bold;
      margin-bottom: 0.2rem;
    }

    .streak-days {
      color: #fff;
      font-size: 1.2rem;
      font-weight: bold;
    }

    .streak-reward {
      color: #FF6B35;
      font-size: 0.9rem;
      font-weight: bold;
    }

    .streak-milestones {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 0.5rem;
    }

    .milestone {
      background: linear-gradient(135deg, #333 0%, #444 100%);
      border: 2px solid #666;
      border-radius: 8px;
      padding: 0.8rem;
      text-align: center;
      transition: all 0.3s;
    }

    .milestone.reached {
      border-color: #FFD700;
      box-shadow: 0 0 15px #FFD700;
    }

    .milestone-icon {
      font-size: 1.5rem;
      margin-bottom: 0.3rem;
    }

    .milestone-text {
      color: #FFD700;
      font-size: 0.8rem;
      font-weight: bold;
      margin-bottom: 0.2rem;
    }

    .milestone-reward {
      color: #ccc;
      font-size: 0.7rem;
    }

    /* Stats Styles */
    .stats-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
    }

    .stat-item {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      background: linear-gradient(135deg, #333 0%, #444 100%);
      border: 2px solid #666;
      border-radius: 10px;
      padding: 1rem;
      transition: all 0.3s;
    }

    .stat-item:hover {
      border-color: #FFD700;
      box-shadow: 0 0 15px #FFD700;
    }

    .stat-icon {
      font-size: 1.8rem;
    }

    .stat-info {
      flex: 1;
    }

    .stat-title {
      color: #FFD700;
      font-size: 0.8rem;
      font-weight: bold;
      margin-bottom: 0.2rem;
    }

    .stat-value {
      color: #fff;
      font-size: 1.1rem;
      font-weight: bold;
    }

    .achievements-footer .achievements-btn {
      background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
      color: #000;
      border: 2px solid #FFD700;
      padding: 0.6rem 1.5rem;
      font-size: 1rem;
      font-weight: bold;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 0 20px #FFD700;
    }

    .achievements-footer .achievements-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 30px #FFD700;
    }
    
    /* Plus Twenty Coins Effect Styles */
    .plus-twenty-effect {
      position: fixed;
      pointer-events: none;
      z-index: 10000;
    }
    
    .plus-twenty-content {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      background: linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FF6B35 100%);
      border: 3px solid #FFD700;
      border-radius: 25px;
      padding: 1rem 1.5rem;
      box-shadow: 0 0 40px #FFD700, inset 0 0 20px rgba(255, 215, 0, 0.4);
      font-family: 'Orbitron', Arial, sans-serif;
      font-weight: bold;
      text-shadow: 0 0 15px rgba(0, 0, 0, 0.7);
      animation: plusTwentyPulse 2.5s ease-out;
    }
    
    .plus-twenty-icon {
      font-size: 1.8rem;
      animation: coinSpinFast 1.5s ease-out;
    }
    
    .plus-twenty-text {
      color: #000;
      font-size: 1.8rem;
      font-weight: bold;
      animation: textGlowIntense 2.5s ease-out;
    }
    
    @keyframes coinSpinFast {
      0% {
        transform: rotate(0deg) scale(0.5);
      }
      25% {
        transform: rotate(90deg) scale(1.3);
      }
      50% {
        transform: rotate(180deg) scale(1.5);
      }
      75% {
        transform: rotate(270deg) scale(1.3);
      }
      100% {
        transform: rotate(360deg) scale(1);
      }
    }
    
    @keyframes textGlowIntense {
      0% {
        text-shadow: 0 0 10px rgba(0, 0, 0, 0.7);
      }
      25% {
        text-shadow: 0 0 20px #FFD700, 0 0 30px #FFD700;
      }
      50% {
        text-shadow: 0 0 30px #FFD700, 0 0 50px #FFD700, 0 0 70px #FFD700;
      }
      75% {
        text-shadow: 0 0 20px #FFD700, 0 0 30px #FFD700;
      }
      100% {
        text-shadow: 0 0 10px rgba(0, 0, 0, 0.7);
      }
    }
    
    @keyframes plusTwentyPulse {
      0% {
        transform: scale(0.5);
        box-shadow: 0 0 20px #FFD700, inset 0 0 10px rgba(255, 215, 0, 0.2);
      }
      50% {
        transform: scale(1.3);
        box-shadow: 0 0 60px #FFD700, inset 0 0 30px rgba(255, 215, 0, 0.6);
      }
      100% {
        transform: scale(1);
        box-shadow: 0 0 40px #FFD700, inset 0 0 20px rgba(255, 215, 0, 0.4);
      }
    }
    
    /* Ortiz Coins Counter */
    .coins-counter {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.8rem;
      margin: 1rem 0;
      padding: 0.8rem 1.5rem;
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid #FFD700;
      border-radius: 10px;
      box-shadow: 0 0 20px #FFD700;
      backdrop-filter: blur(5px);
    }



    /* VIP Trap Modal */
    .vip-trap-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 3000;
      backdrop-filter: blur(10px);
    }

    .vip-trap-content {
      background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #000000 100%);
      border: 3px solid #FFD700;
      border-radius: 20px;
      padding: 2rem;
      text-align: center;
      max-width: 500px;
      width: 90%;
      margin: 0 auto;
      box-shadow: 0 0 50px #FFD700, inset 0 0 50px rgba(255, 215, 0, 0.1);
      animation: vipTrapGlow 2s ease-in-out infinite alternate;
    }

    @keyframes vipTrapGlow {
      0% { box-shadow: 0 0 50px #FFD700, inset 0 0 50px rgba(255, 215, 0, 0.1); }
      100% { box-shadow: 0 0 80px #FFD700, inset 0 0 80px rgba(255, 215, 0, 0.2); }
    }

    .vip-trap-header h2 {
      color: #FFD700;
      font-size: 2rem;
      margin-bottom: 0.5rem;
      text-shadow: 0 0 15px #FFD700;
      font-family: 'Orbitron', Arial, sans-serif;
    }

    .vip-trap-subtitle {
      color: #FFA500;
      font-size: 1.2rem;
      margin-bottom: 1.5rem;
      text-shadow: 0 0 10px #FFA500;
      font-family: 'Orbitron', Arial, sans-serif;
    }

    .vip-trap-message {
      margin: 1.5rem 0;
    }

    .vip-trap-message p {
      color: #ffffff;
      font-size: 1.1rem;
      margin-bottom: 1rem;
      line-height: 1.5;
    }

    .vip-trap-warning {
      color: #FF0000;
      font-size: 1rem;
      font-weight: bold;
      text-shadow: 0 0 10px #FF0000;
      margin-top: 1rem;
      animation: warningBlink 1s ease-in-out infinite alternate;
    }

    @keyframes warningBlink {
      0% { opacity: 1; }
      100% { opacity: 0.7; }
    }

    .vip-trap-buttons {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-top: 2rem;
      flex-wrap: wrap;
    }

    .vip-trap-accept-btn, .vip-trap-dare-btn, .vip-trap-close-btn {
      padding: 1rem 2rem;
      font-size: 1.1rem;
      font-weight: bold;
      border: 2px solid;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Orbitron', Arial, sans-serif;
      min-width: 150px;
    }

    .vip-trap-accept-btn {
      background: linear-gradient(45deg, #00ff00, #00cc00);
      color: #000;
      border-color: #00ff00;
      box-shadow: 0 0 20px #00ff00;
    }

    .vip-trap-accept-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 30px #00ff00;
    }

    .vip-trap-dare-btn {
      background: linear-gradient(45deg, #ff0000, #cc0000);
      color: #fff;
      border-color: #ff0000;
      box-shadow: 0 0 20px #ff0000;
    }

    .vip-trap-dare-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 30px #ff0000;
    }

    .vip-trap-close-btn {
      background: linear-gradient(45deg, #666666, #444444);
      color: #fff;
      border-color: #666666;
      box-shadow: 0 0 20px #666666;
    }

    .vip-trap-close-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 30px #666666;
    }
    
    .coin-icon {
      font-size: 1.5rem;
      color: #FFD700;
      text-shadow: 0 0 10px #FFD700;
      animation: coinGlow 2s ease-in-out infinite alternate;
    }
    
    @keyframes coinGlow {
      0% { transform: scale(1) rotate(0deg); }
      100% { transform: scale(1.1) rotate(5deg); }
    }
    
    .coins-text {
      color: #FFD700;
      font-size: 1.2rem;
      font-weight: bold;
      text-shadow: 0 0 10px #FFD700;
      font-family: 'Orbitron', Arial, sans-serif;
    }
    
    /* Soldier Name Display */
    .soldier-name {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.8rem;
      margin: 0.5rem 0;
      padding: 0.6rem 1.2rem;
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid #e60073;
      border-radius: 10px;
      box-shadow: 0 0 20px #e60073;
      backdrop-filter: blur(5px);
    }
    
    .soldier-icon {
      font-size: 1.2rem;
      color: #e60073;
      text-shadow: 0 0 10px #e60073;
      animation: soldierGlow 2s ease-in-out infinite alternate;
    }
    
    @keyframes soldierGlow {
      0% { transform: scale(1) rotate(0deg); }
      100% { transform: scale(1.1) rotate(5deg); }
    }
    
    .soldier-text {
      color: #e60073;
      font-size: 1rem;
      font-weight: bold;
      text-shadow: 0 0 10px #e60073;
      font-family: 'Orbitron', Arial, sans-serif;
    }
    
    /* Soldier Name Modal */
    .soldier-name-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      backdrop-filter: blur(10px);
      margin: 0;
      padding: 0;
    }
    
    .soldier-name-content {
      background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #000000 100%);
      border: 3px solid #e60073;
      border-radius: 15px;
      padding: 1.5rem;
      text-align: center;
      max-width: 280px;
      width: 70%;
      margin: 0 auto;
      box-shadow: 0 0 50px #e60073, inset 0 0 50px rgba(230, 0, 115, 0.1);
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    
    .soldier-name-content h3 {
      color: #e60073;
      font-size: 1.5rem;
      margin-bottom: 1rem;
      text-shadow: 0 0 10px #e60073;
      font-family: 'Orbitron', Arial, sans-serif;
    }
    
    .soldier-name-content p {
      color: #fff;
      margin-bottom: 1.5rem;
      font-size: 1.1rem;
    }
    
    .soldier-name-content input {
      width: 80%;
      padding: 0.8rem;
      margin-bottom: 1.5rem;
      border: 2px solid #e60073;
      border-radius: 8px;
      background: rgba(0, 0, 0, 0.7);
      color: #fff;
      font-size: 0.9rem;
      text-align: center;
      font-family: 'Orbitron', Arial, sans-serif;
      margin-left: auto;
      margin-right: auto;
      display: block;
    }
    
    .soldier-name-content input:focus {
      outline: none;
      box-shadow: 0 0 15px #e60073;
    }
    
    .soldier-name-btn {
      background: linear-gradient(45deg, #e60073, #ff1493);
      color: #fff;
      border: 2px solid #e60073;
      padding: 0.8rem 1.5rem;
      font-size: 0.9rem;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 0 20px #e60073;
      font-family: 'Orbitron', Arial, sans-serif;
      margin: 0 auto;
      display: block;
    }
    
    .soldier-name-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 30px #e60073;
    }
    
    /* Squid Game Envelopes */
    .envelopes-container {
      display: flex;
      gap: 1.5rem;
      margin: 2rem 0;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      max-width: 600px;
    }
    
    .envelope-btn {
      position: relative;
      width: 120px;
      height: 80px;
      border: none;
      background: transparent;
      cursor: pointer;
      transition: all 0.3s ease;
      transform-style: preserve-3d;
    }
    
    .envelope-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: inherit;
      clip-path: polygon(0 0, 100% 0, 50% 100%);
      transition: all 0.3s ease;
      z-index: 5;
    }
    
    .envelope-btn::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: inherit;
      clip-path: polygon(0 0, 100% 0, 50% 100%);
      transform: rotateX(180deg);
      transition: all 0.3s ease;
      z-index: 1;
    }
    
    .envelope-content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 20;
      text-align: center;
      width: 100%;
      pointer-events: none;
    }
    
    .envelope-text {
      color: #fff;
      font-size: 0.8rem;
      font-weight: bold;
      text-shadow: 0 0 10px rgba(0, 0, 0, 0.8), 0 0 20px rgba(0, 0, 0, 0.9);
      letter-spacing: 0.1em;
      position: relative;
      z-index: 25;
      background: rgba(0, 0, 0, 0.3);
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      backdrop-filter: blur(2px);
    }
    
    .soldier-btn {
      background: linear-gradient(45deg, #e60073, #ff1493);
      box-shadow: 0 0 30px #e60073, inset 0 0 20px rgba(230, 0, 115, 0.3);
    }
    
    .soldier-btn:hover {
      transform: scale(1.1) rotateY(10deg);
      box-shadow: 0 0 50px #e60073, inset 0 0 30px rgba(230, 0, 115, 0.5);
    }
    
    .player-btn {
      background: linear-gradient(45deg, #0066cc, #0099ff);
      box-shadow: 0 0 30px #0066cc, inset 0 0 20px rgba(0, 102, 204, 0.3);
    }
    
    .player-btn:hover {
      transform: scale(1.1) rotateY(-10deg);
      box-shadow: 0 0 50px #0066cc, inset 0 0 30px rgba(0, 102, 204, 0.5);
    }
    
    .vip-btn {
      background: linear-gradient(45deg, #FFD700, #FFA500);
      box-shadow: 0 0 30px #FFD700, inset 0 0 20px rgba(255, 215, 0, 0.3);
    }
    
    .vip-btn:hover {
      transform: scale(1.1) rotateY(10deg);
      box-shadow: 0 0 50px #FFD700, inset 0 0 30px rgba(255, 215, 0, 0.5);
    }
    
    .spin-btn {
      background: linear-gradient(45deg, #006400, #228B22);
      box-shadow: 0 0 30px #006400, inset 0 0 20px rgba(0, 100, 0, 0.3);
    }
    
    .spin-btn:hover {
      transform: scale(1.1) rotateY(5deg);
      box-shadow: 0 0 50px #006400, inset 0 0 30px rgba(0, 100, 0, 0.5);
    }
    
    .joker-btn {
      background: linear-gradient(45deg, #006400, #228B22);
      box-shadow: 0 0 30px #006400, inset 0 0 20px rgba(0, 100, 0, 0.3);
    }
    
    .joker-btn:hover {
      transform: scale(1.1) rotateY(8deg);
      box-shadow: 0 0 50px #006400, inset 0 0 30px rgba(0, 100, 0, 0.5);
    }
    
    .pvp-btn {
      background: linear-gradient(45deg, #FF4500, #FF6347);
      box-shadow: 0 0 30px #FF4500, inset 0 0 20px rgba(255, 69, 0, 0.3);
    }
    
    .pvp-btn:hover {
      transform: scale(1.1) rotateY(8deg);
      box-shadow: 0 0 50px #FF4500, inset 0 0 30px rgba(255, 69, 0, 0.5);
    }
    
    .frontman-btn {
      background: linear-gradient(45deg, #000000, #333333);
      box-shadow: 0 0 30px #000000, inset 0 0 20px rgba(0, 0, 0, 0.3);
    }
    
    .frontman-btn:hover {
      transform: scale(1.1) rotateY(-10deg);
      box-shadow: 0 0 50px #000000, inset 0 0 30px rgba(0, 0, 0, 0.5);
    }
    
    .daily-reward-btn {
      background: linear-gradient(45deg, #FF6B35, #F7931E);
      box-shadow: 0 0 30px #FF6B35, inset 0 0 20px rgba(255, 107, 53, 0.3);
      animation: dailyRewardPulse 2s infinite;
    }
    
    .daily-reward-btn:hover {
      transform: scale(1.1) rotateY(5deg);
      box-shadow: 0 0 50px #FF6B35, inset 0 0 30px rgba(255, 107, 53, 0.5);
      animation: none;
    }
    
    .daily-reward-btn.disabled {
      background: linear-gradient(45deg, #666666, #999999);
      box-shadow: 0 0 20px #666666, inset 0 0 15px rgba(102, 102, 102, 0.3);
      animation: none;
      cursor: not-allowed;
    }
    
    .daily-reward-btn.disabled:hover {
      transform: none;
      box-shadow: 0 0 20px #666666, inset 0 0 15px rgba(102, 102, 102, 0.3);
    }
    
    @keyframes dailyRewardPulse {
      0%, 100% {
        box-shadow: 0 0 30px #FF6B35, inset 0 0 20px rgba(255, 107, 53, 0.3);
      }
      50% {
        box-shadow: 0 0 50px #FF6B35, inset 0 0 30px rgba(255, 107, 53, 0.5);
      }
    }
    
    .envelope-btn:active {
      transform: scale(0.95);
    }
    
    .secret-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 50px #FFD700, inset 0 0 30px rgba(255, 215, 0, 0.5);
      background: linear-gradient(45deg, #FFA500, #FFD700);
    }
    
    .secret-btn:active {
      transform: scale(0.98);
    }
    
    /* Responsive Design */
          @media (max-width: 768px) {
        .squid-title {
          font-size: 2.5rem;
          letter-spacing: 0.1em;
        }
        .shapes {
          gap: 1rem;
        }
        .shape {
          width: 1.2rem;
          height: 1.2rem;
          min-width: 1.2rem;
          min-height: 1.2rem;
          max-width: 1.2rem;
          max-height: 1.2rem;
        }
        .typewriter {
          font-size: 1rem;
          padding: 1rem 1.5rem;
          width: 90%;
        }
        .access-panel {
          width: 85%;
          padding: 0.8rem;
          max-width: 500px;
        }
        .code-input {
          width: 32px;
          height: 32px;
          font-size: 0.9rem;
        }
        .welcome-text {
          font-size: 1.8rem;
          letter-spacing: 0.1em;
          flex-wrap: wrap;
      text-align: center;
    }
        
        .clickable-letter {
          font-size: 1.8rem;
        }
        .envelopes-container {
          gap: 0.8rem;
          margin: 1.5rem 0;
          max-width: 400px;
        }
        .envelope-btn {
          width: 100px;
          height: 70px;
        }
        .envelope-text {
          font-size: 0.7rem;
        }
        .coins-counter {
          padding: 0.6rem 1rem;
          margin: 0.8rem 0;
        }
        .coin-icon {
          font-size: 1.2rem;
        }
        .coins-text {
          font-size: 1rem;
        }
        .description {
          font-size: 1rem;
        }
        .container {
          padding-top: 3vh;
        }
      }
    
          @media (min-width: 600px) {
        .squid-title { 
          font-size: 3.5rem; 
          letter-spacing: 0.15em;
        }
        .shapes {
          gap: 2rem;
        }
        .shape {
          width: 2rem;
          height: 2rem;
          min-width: 2rem;
          min-height: 2rem;
          max-width: 2rem;
          max-height: 2rem;
        }
        .typewriter { 
          font-size: 1.3rem; 
          width: 80%;
          max-width: 800px;
          padding: 2rem 1.5rem;
        }
        .welcome-text {
          font-size: 3rem;
        }
        .description {
          font-size: 1.2rem;
        }
        .container {
          padding-top: 5vh;
        }
      }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    
    /* Animación para revelación de dígitos */
    @keyframes revealPulse {
      0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
      50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
      100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }
    
    .reveal-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }
    
    .reveal-icon {
      font-size: 3rem;
      animation: iconGlow 1s ease-in-out infinite alternate;
    }
    
    .reveal-text {
      font-size: 1.5rem;
      font-weight: bold;
      color: #e60073;
      text-shadow: 0 0 15px #e60073;
    }
    
    .reveal-digit {
      font-size: 4rem;
      font-weight: bold;
      color: #00ff7f;
      text-shadow: 0 0 20px #00ff7f;
      background: linear-gradient(135deg, #00ff7f 0%, #00cc66 100%);
      border-radius: 50%;
      width: 80px;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 3px solid #fff;
    }
    
    .reveal-position {
      font-size: 1rem;
      color: #ccc;
    }
    
    @keyframes iconGlow {
      from { text-shadow: 0 0 20px #e60073; }
      to { text-shadow: 0 0 40px #e60073, 0 0 60px #e60073; }
    }
    
    /* Modal de Vida Extra */
    @keyframes modalFadeIn {
      from { opacity: 0; transform: scale(0.8); }
      to { opacity: 1; transform: scale(1); }
    }
    
    @keyframes modalFadeOut {
      from { opacity: 1; transform: scale(1); }
      to { opacity: 0; transform: scale(0.8); }
    }
    
    .extra-life-content {
      background: linear-gradient(135deg, #1a1a1a 0%, #333 100%);
      border: 3px solid #ffd700;
      border-radius: 20px;
      padding: 30px;
      text-align: center;
      color: #fff;
      font-family: 'Orbitron', Arial, sans-serif;
      box-shadow: 0 0 50px #ffd700, inset 0 0 30px rgba(255, 215, 0, 0.2);
      max-width: 450px;
      width: 85%;
      max-height: 80vh;
      overflow-y: auto;
      animation: modalPulse 2s ease-in-out infinite;
      margin: 20px;
    }
    
    @keyframes modalPulse {
      0%, 100% { box-shadow: 0 0 50px #ffd700, inset 0 0 30px rgba(255, 215, 0, 0.2); }
      50% { box-shadow: 0 0 80px #ffd700, inset 0 0 50px rgba(255, 215, 0, 0.4); }
    }
    
    .extra-life-icon {
      font-size: 4rem;
      margin-bottom: 20px;
      animation: diamondGlow 1.5s ease-in-out infinite alternate;
    }
    
    @keyframes diamondGlow {
      from { text-shadow: 0 0 20px #ffd700; transform: scale(1); }
      to { text-shadow: 0 0 40px #ffd700, 0 0 60px #ffd700; transform: scale(1.1); }
    }
    
    .extra-life-title {
      font-size: 1.5rem;
      font-weight: bold;
      color: #ffd700;
      text-shadow: 0 0 20px #ffd700;
      margin-bottom: 15px;
      letter-spacing: 0.1em;
    }
    
    .extra-life-message {
      font-size: 1.1rem;
      line-height: 1.5;
      margin-bottom: 20px;
    }
    
    .highlight {
      color: #00ff7f;
      font-weight: bold;
      text-shadow: 0 0 10px #00ff7f;
    }
    
    .warning {
      color: #ff4757;
      font-weight: bold;
      text-shadow: 0 0 10px #ff4757;
    }
    
    .consequence {
      color: #ff6b35;
      font-weight: bold;
      text-shadow: 0 0 10px #ff6b35;
      font-size: 0.95rem;
      display: block;
      margin-top: 15px;
      padding: 10px;
      border: 2px solid #ff6b35;
      border-radius: 8px;
      background: rgba(255, 107, 53, 0.1);
    }
    
    .severe {
      color: #ff0000;
      font-weight: bold;
      text-shadow: 0 0 15px #ff0000;
      animation: severeBlink 1s ease-in-out infinite alternate;
    }
    
    @keyframes severeBlink {
      from { opacity: 1; }
      to { opacity: 0.7; }
    }
    
    .extra-life-btn {
      background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
      border: none;
      border-radius: 10px;
      padding: 15px 30px;
      font-size: 1.2rem;
      font-weight: bold;
      color: #000;
      cursor: pointer;
      font-family: 'Orbitron', Arial, sans-serif;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      box-shadow: 0 0 20px #ffd700;
      transition: all 0.3s ease;
    }
    
    .extra-life-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 30px #ffd700;
    }
    
    .extra-life-btn:active {
      transform: scale(0.95);
    }
  </style>
</head>
<body>
  <div class="lights">
    <div class="light light1"></div>
    <div class="light light2"></div>
    <div class="light light3"></div>
  </div>
  <div class="floating-shapes">
    <div class="floating-shape floating-circle"></div>
    <div class="floating-shape floating-triangle"></div>
    <div class="floating-shape floating-square"></div>
    <div class="floating-shape floating-circle-2"></div>
    <div class="floating-shape floating-triangle-2"></div>
    <div class="floating-shape floating-square-2"></div>
  </div>
  <div class="particles">
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
  </div>
  <div class="text-particles">
    <div class="text-particle ortiz" style="left: 5%; top: 5%;">ORTIZ</div>
    <div class="text-particle familia" style="right: 5%; top: 5%;">FAMILIA</div>
    <div class="text-particle unidad" style="left: 5%; bottom: 5%;">UNIDAD</div>
    <div class="text-particle diversion" style="right: 5%; bottom: 5%;">DIVERSION</div>
  </div>
  <div class="matrix-rain">
    <div class="matrix-column" style="left: 5%"></div>
    <div class="matrix-column" style="left: 15%"></div>
    <div class="matrix-column" style="left: 25%"></div>
    <div class="matrix-column" style="left: 35%"></div>
    <div class="matrix-column" style="left: 45%"></div>
    <div class="matrix-column" style="left: 55%"></div>
    <div class="matrix-column" style="left: 65%"></div>
    <div class="matrix-column" style="left: 75%"></div>
    <div class="matrix-column" style="left: 85%"></div>
    <div class="matrix-column" style="left: 95%"></div>
  </div>
  <div class="click-effects" id="clickEffects"></div>
  <div class="overlay"></div>
  <div class="container">
    <div class="squid-title">
      SQUID GAME <span class="ortiz-text" id="ortizText">ORTIZ</span>
    </div>
    <div class="shapes">
      <span class="shape circle-shape"></span>
      <span class="shape triangle-shape">
        <svg viewBox="0 0 100 100">
          <polygon points="50,10 10,90 90,90" style="fill:none;stroke:white;stroke-width:8" />
        </svg>
      </span>
      <span class="shape square-shape" id="secretSquare"></span>
    </div>
    <div class="typewriter" id="typewriter"><span></span></div>
    
    <!-- Top 3 Leaderboard -->
    <div class="top3-leaderboard" id="top3Leaderboard">
      <div class="leaderboard-header">
        <span class="leaderboard-title">🏆 TOP 3 RICOS</span>
        <span class="leaderboard-subtitle">Los jugadores con más monedas</span>
        <button onclick="loadTop3Leaderboard()" style="background: #FFD700; color: #000; border: none; padding: 5px 10px; border-radius: 5px; font-size: 0.8rem; cursor: pointer; margin-top: 5px;">🔄 REFRESCAR</button>
      </div>
      <div class="leaderboard-content" id="leaderboardContent">
        <div class="loading-leaderboard">Cargando ranking...</div>
      </div>
    </div>
    
    <!-- Achievements Button -->
    <div class="achievements-container">
      <button class="envelope-btn achievements-btn" id="achievementsBtn">
        <div class="envelope-content">
          <span class="envelope-text">🏆 LOGROS</span>
        </div>
      </button>
    </div>

    <!-- Daily Reward Button -->
    <div class="daily-reward-container">
      <button class="envelope-btn daily-reward-btn" id="dailyRewardBtn">
        <div class="envelope-content">
          <span class="envelope-text">🎁 DIARIO</span>
        </div>
      </button>
    </div>

    <!-- ALL IN Game Button (Only for players with 15000+ coins) -->
    <div class="all-in-container" id="allInContainer">
      <button class="all-in-btn" id="allInBtn">
        🎰 ALL IN - TODO O NADA 🎰
      </button>
    </div>

    <!-- Front Man Call Button (Only for players with 20000+ coins) -->
    <div class="frontman-call-container" id="frontmanCallContainer">
      <button class="frontman-call-btn" id="frontmanCallBtn">
        📞 FRONT MAN TE LLAMA 📞
      </button>
    </div>

    <!-- Player Fight Button (Only for players with 25000+ coins) -->
    <div class="player-fight-container" id="playerFightContainer">
      <button class="player-fight-btn" id="playerFightBtn">
        ⚔️ PELEA ENTRE JUGADORES ⚔️
      </button>
    </div>
    
    <!-- Soldier Name Display -->
    <div class="soldier-name" id="soldierNameDisplay" style="display: none;">
      <span class="soldier-icon">🎖️</span>
      <span class="soldier-text">JUGADOR: <span id="soldierNameText">Jugador</span></span>
    </div>
    
    <!-- Ortiz Coins Counter -->
    <div class="coins-counter" id="coinsCounter">
      <span class="coin-icon">🪙</span>
      <span class="coins-text">ORTIZ COINS: <span id="totalCoins">0</span></span>
    </div>
    

    
    <!-- Soldier Name Modal -->
    <div class="soldier-name-modal" id="soldierNameModal">
      <div class="soldier-name-content">
        <h3>🎖️ ¡BIENVENIDO, JUGADOR!</h3>
        <p>Dime tu nombre, jugador:</p>
        <input type="text" id="soldierNameInput" placeholder="Tu nombre" maxlength="15">
        <button class="soldier-name-btn" id="saveSoldierNameBtn">CONFIRMAR</button>
      </div>
    </div>
    
    <!-- Squid Game Envelopes -->
    <div class="envelopes-container">
      <button class="envelope-btn soldier-btn" id="soldierBtn">
        <div class="envelope-content">
          <span class="envelope-text">SOLDADO</span>
        </div>
      </button>
      <button class="envelope-btn player-btn" id="playerBtn">
        <div class="envelope-content">
          <span class="envelope-text">JUGADOR</span>
        </div>
      </button>
      <button class="envelope-btn vip-btn" id="vipBtn">
        <div class="envelope-content">
          <span class="envelope-text">VIP</span>
        </div>
      </button>
      <button class="envelope-btn frontman-btn" id="frontmanBtn">
        <div class="envelope-content">
          <span class="envelope-text">FRONT MAN</span>
        </div>
      </button>
      <button class="envelope-btn joker-btn" id="jokerBtn">
        <div class="envelope-content">
          <span class="envelope-text">JOKER PISTAS</span>
        </div>
      </button>
      <button class="envelope-btn pvp-btn" id="pvpBtn">
        <div class="envelope-content">
          <span class="envelope-text">ROBO</span>
        </div>
      </button>
    </div>
    
    <!-- Access Panel -->
    <div class="access-panel" id="accessPanel">
      <div class="access-title"><span id="easter-egg-6" style="color: white; font-size: inherit; font-weight: inherit; margin-right: 5px; display: none;">6</span>ACCESO A DATOS PRIVILEGIADOS</div>
      <div class="code-input-container">
        <div class="code-inputs">
          <input type="text" class="code-input" maxlength="1" data-index="0" pattern="[A-Za-z0-9]">
          <input type="text" class="code-input" maxlength="1" data-index="1" pattern="[A-Za-z0-9]">
          <input type="text" class="code-input" maxlength="1" data-index="2" pattern="[A-Za-z0-9]">
          <input type="text" class="code-input" maxlength="1" data-index="3" pattern="[A-Za-z0-9]">
        </div>
        <div class="lock-icon" id="lockIcon" style="cursor: pointer;">🔒</div>
      </div>
      <div class="access-status" id="accessStatus"></div>
      
      <!-- Admin Panel Button - Mobile Friendly -->
      <button class="admin-panel-btn" id="adminPanelBtn" style="display: none;">
        <span class="admin-btn-icon">🔐</span>
        <span class="admin-btn-text">PANEL ADMIN</span>
      </button>
    </div>
    
    <div class="main-content">
      <h2 class="welcome-text" id="welcomeText">
        <span class="clickable-letter" data-letter="B">B</span>
        <span class="clickable-letter" data-letter="I">I</span>
        <span class="clickable-letter" data-letter="E">E</span>
        <span class="clickable-letter" data-letter="N">N</span>
        <span class="clickable-letter" data-letter="V">V</span>
        <span class="clickable-letter" data-letter="E">E</span>
        <span class="clickable-letter" data-letter="N">N</span>
        <span class="clickable-letter" data-letter="I">I</span>
        <span class="clickable-letter" data-letter="D">D</span>
        <span class="clickable-letter" data-letter="O">O</span>
        <span class="clickable-letter" data-letter=" ">&nbsp;</span>
        <span class="clickable-letter" data-letter="A">A</span>
        <span class="clickable-letter" data-letter="L">L</span>
        <span class="clickable-letter" data-letter=" ">&nbsp;</span>
        <span class="clickable-letter" data-letter="S">S</span>
        <span class="clickable-letter" data-letter="I">I</span>
        <span class="clickable-letter" data-letter="S">S</span>
        <span class="clickable-letter" data-letter="T">T</span>
        <span class="clickable-letter" data-letter="E">E</span>
        <span class="clickable-letter" data-letter="M">M</span>
        <span class="clickable-letter" data-letter="A">A</span>
      </h2>
      <p class="description glitch-title" data-text="Squid Game Ortiz - Sistema de Control Principal">Squid Game Ortiz - Sistema de Control Principal</p>
      <div class="status-indicator">
        <span class="status-dot"></span>
        <span class="status-text" id="sistemaActivo">SISTEMA ACTIVO</span>
      </div>
    </div>
    
    <!-- Easter Egg Modal -->
    <div class="easter-egg-modal" id="easterEggModal">
      <div class="easter-egg-content">
        <div class="easter-egg-header">
          <div class="easter-egg-subtitle">¡Has descubierto el secreto del sistema!</div>
        </div>
        
        <div class="coins-animation-container">
          <div class="coins-rain" id="coinsRain"></div>
          <div class="coins-explosion" id="coinsExplosion"></div>
          <div class="center-coin">💰</div>
        </div>
        
        <div class="easter-egg-message">
          <div class="reward-text">¡RECOMPENSA OBTENIDA!</div>
          <div class="coins-reward">+500 ORTIZ COINS</div>
          <div class="congrats-text">¡Felicidades por tu persistencia!</div>
        </div>
        
        <div class="easter-egg-footer">
          <button class="easter-egg-btn" id="closeEasterEgg">¡GENIAL!</button>
        </div>
      </div>
    </div>
    
    <!-- Squid Power Modal -->
    <div class="squid-power-modal" id="squidPowerModal">
      <div class="squid-power-content">
        <div class="squid-power-header">
          <h2>🦑 EL PODER DEL CALAMAR</h2>
          <div class="squid-power-subtitle">¡Has desbloqueado la inmunidad suprema!</div>
        </div>
        
        <div class="squid-animation-container">
          <div class="squid-effects" id="squidEffects"></div>
          <div class="squid-symbol">🦑</div>
        </div>
        
        <div class="squid-power-message">
          <div class="squid-title">INMUNIDAD TOTAL</div>
          <div class="squid-description">Eres inmune en cualquier juego, excepto el juego final</div>
          <div class="squid-warning">⚠️ La inmunidad no aplica en el último desafío</div>
        </div>
        
        <div class="squid-power-footer">
          <button class="squid-power-btn" id="closeSquidPower">¡ACTIVAR INMUNIDAD!</button>
        </div>
      </div>
    </div>
    
    <!-- Gods Power Card Modal -->
    <div class="gods-power-modal" id="godsPowerModal">
      <div class="gods-power-content">
        <div class="gods-power-header">
          <h2>⚡ TARJETA DEL PODER DE LOS DIOSES</h2>
          <div class="gods-power-subtitle">¡Has desbloqueado el poder supremo!</div>
        </div>
        
        <div class="power-animation-container">
          <div class="lightning-effects" id="lightningEffects"></div>
          <div class="power-symbol">⚡</div>
        </div>
        
        <div class="gods-power-message">
          <div class="power-title">PODER SUPREMO</div>
          <div class="power-description">Puedes detener cualquier ventaja que utilice otro jugador</div>
          <div class="power-warning">⚠️ Este poder solo se puede usar una vez por sesión</div>
        </div>
        
        <div class="gods-power-footer">
          <button class="gods-power-btn" id="closeGodsPower">¡ACTIVAR PODER!</button>
        </div>
      </div>
    </div>
    
    <!-- Lock Power Modal -->
    <div class="lock-power-modal" id="lockPowerModal">
      <div class="lock-power-content">
        <div class="lock-power-header">
          <h2>🦑 EL PODER DEL CALAMAR</h2>
          <div class="lock-power-subtitle">¡Has desbloqueado la inmunidad suprema!</div>
        </div>
        
        <div class="lock-animation-container">
          <div class="lock-effects" id="lockEffects"></div>
          <div class="lock-symbol">🦑</div>
        </div>
        
        <div class="lock-power-message">
          <div class="lock-title">INMUNIDAD TOTAL</div>
          <div class="lock-description">Eres inmune en cualquier juego, excepto el juego final</div>
          <div class="lock-warning">⚠️ La inmunidad no aplica en el último desafío</div>
        </div>
        
        <div class="lock-power-footer">
          <button class="lock-power-btn" id="closeLockPower">¡ACTIVAR INMUNIDAD!</button>
        </div>
      </div>
    </div>
    
    <!-- Daily Reward Modal -->
    <div class="daily-reward-modal" id="dailyRewardModal">
      <div class="daily-reward-content">
        <div class="daily-reward-header">
          <h2>🎁 RECOMPENSA DIARIA</h2>
          <div class="daily-reward-subtitle">¡Tu recompensa diaria está lista!</div>
        </div>
        
        <div class="daily-reward-animation">
          <div class="reward-effects" id="rewardEffects"></div>
          <div class="reward-symbol">🎁</div>
        </div>
        
        <div class="daily-reward-message">
          <div class="reward-title">¡MONEDAS GANADAS!</div>
          <div class="reward-amount" id="rewardAmount">+25 ORTIZ COINS</div>
          <div class="reward-description">Vuelve mañana para otra recompensa</div>
        </div>
        
        <div class="daily-reward-footer">
          <button class="daily-reward-btn" id="closeDailyReward">¡COBRAR!</button>
        </div>
      </div>
    </div>

    <!-- Achievements Modal -->
    <div class="achievements-modal" id="achievementsModal">
      <div class="achievements-content">
        <div class="achievements-header">
          <h2>🏆 LOGROS Y RACHAS</h2>
          <div class="achievements-subtitle">¡Tu progreso en Squid Game Ortiz!</div>
        </div>
        
        <div class="achievements-tabs">
          <button class="tab-btn active" data-tab="daily">📅 LOGROS DIARIOS</button>
          <button class="tab-btn" data-tab="streaks">🔥 RACHAS</button>
          <button class="tab-btn" data-tab="stats">📊 ESTADÍSTICAS</button>
        </div>
        
        <div class="achievements-body">
          <!-- Daily Achievements Tab -->
          <div class="tab-content active" id="daily-tab">
            <div class="achievements-grid" id="dailyAchievementsGrid">
              <!-- Los logros se cargarán dinámicamente -->
            </div>
          </div>
          
          <!-- Streaks Tab -->
          <div class="tab-content" id="streaks-tab">
            <div class="streaks-container">
              <div class="streak-item">
                <div class="streak-icon">🔥</div>
                <div class="streak-info">
                  <div class="streak-title">Racha Actual</div>
                  <div class="streak-days" id="currentStreak">0 días</div>
                </div>
                <div class="streak-reward" id="streakReward">+0 monedas</div>
              </div>
              
              <div class="streak-milestones">
                <div class="milestone" data-days="3">
                  <div class="milestone-icon">🥉</div>
                  <div class="milestone-text">3 días</div>
                  <div class="milestone-reward">+50 monedas</div>
                </div>
                <div class="milestone" data-days="7">
                  <div class="milestone-icon">🥈</div>
                  <div class="milestone-text">7 días</div>
                  <div class="milestone-reward">+200 monedas</div>
                </div>
                <div class="milestone" data-days="30">
                  <div class="milestone-icon">🥇</div>
                  <div class="milestone-text">30 días</div>
                  <div class="milestone-reward">+1000 monedas</div>
                </div>
                <div class="milestone" data-days="100">
                  <div class="milestone-icon">👑</div>
                  <div class="milestone-text">100 días</div>
                  <div class="milestone-reward">Título "Leyenda"</div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Stats Tab -->
          <div class="tab-content" id="stats-tab">
            <div class="stats-container">
              <div class="stat-item">
                <div class="stat-icon">💰</div>
                <div class="stat-info">
                  <div class="stat-title">Monedas Totales</div>
                  <div class="stat-value" id="totalCoinsStat">0</div>
                </div>
              </div>
              
              <div class="stat-item">
                <div class="stat-icon">🎮</div>
                <div class="stat-info">
                  <div class="stat-title">Juegos Jugados</div>
                  <div class="stat-value" id="gamesPlayedStat">0</div>
                </div>
              </div>
              
              <div class="stat-item">
                <div class="stat-icon">🥚</div>
                <div class="stat-info">
                  <div class="stat-title">Easter Eggs</div>
                  <div class="stat-value" id="easterEggsStat">0</div>
                </div>
              </div>
              
              <div class="stat-item">
                <div class="stat-icon">📅</div>
                <div class="stat-info">
                  <div class="stat-title">Días Activo</div>
                  <div class="stat-value" id="daysActiveStat">0</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="achievements-footer">
          <button class="achievements-btn" id="closeAchievements">CERRAR</button>
        </div>
      </div>
    </div>

    <!-- Fusion Power Modal -->
    <div class="fusion-power-modal" id="fusionPowerModal">
      <div class="fusion-power-content">
        <div class="fusion-power-header">
          <h2>🔗 EL PODER DE FUSIÓN</h2>
          <div class="fusion-power-subtitle">¡Has desbloqueado el poder de unir destinos!</div>
        </div>
        
        <div class="fusion-animation-container">
          <div class="fusion-effects" id="fusionEffects"></div>
          <div class="fusion-symbol">🔗</div>
        </div>
        
        <div class="fusion-power-message">
          <div class="fusion-title">PODER DE FUSIÓN</div>
          <div class="fusion-description">Puedes elegir una sola vez en un juego que tu destino sea el mismo que el jugador que elijas</div>
          <div class="fusion-warning">⚠️ Este poder solo se puede usar una vez por sesión</div>
        </div>
        
        <div class="fusion-power-footer">
          <button class="fusion-power-btn" id="closeFusionPower">¡ACTIVAR FUSIÓN!</button>
        </div>
      </div>
    </div>
    
    <!-- Secret Coordinates Screen -->
    <div class="secret-screen" id="secretScreen">
      <div class="secret-title">ACCESO SOLO PARA VIPs</div>
      <button class="secret-btn" id="locationBtn">UBICACIÓN SECRETA DEL JUEGO</button>
      <div class="coordinates-container" id="coordinatesContainer">
        <div class="coordinate-item">
          <span class="coord-label">LATITUD:</span>
          <span class="coord-value">33° 25' 18.7" N</span>
        </div>
        <div class="coordinate-item">
          <span class="coord-label">LONGITUD:</span>
          <span class="coord-value">126° 33' 42.1" E</span>
        </div>
        <div class="coordinate-item">
          <span class="coord-label">ALTITUD:</span>
          <span class="coord-value">1,947 m</span>
        </div>
        <div class="coordinate-item">
          <span class="coord-label">CÓDIGO:</span>
          <span class="coord-value">SG-VIP-789</span>
        </div>
        <div class="coordinate-item">
          <span class="coord-label">NIVEL:</span>
          <span class="coord-value">MÁXIMO</span>
      </div>
      </div>
      <div class="secret-message" id="secretMessage">
        🏝️ UBICACIÓN: ISLA JEJU, COREA DEL SUR<br>
        🎯 ESTADO: ACTIVO Y OPERATIVO<br>
        🔐 ACCESO: SOLO INVITADOS VIP<br>
        ⏰ ÚLTIMA ACTUALIZACIÓN: 15/12/2024<br>
        💎 NIVEL DE SEGURIDAD: MÁXIMO
      </div>
      <div class="help-text" style="display: none;">Presiona ESC o haz clic en CERRAR para volver</div>
      <button class="secret-btn" id="closeSecretBtn" style="display: none;">CERRAR</button>
    </div>
  </div>
  <script>
    // Typewriter effect
    const text = "Sistema de Control Squid Game Ortiz - Inicializando...";
    const speed = 35;
    let i = 0;
    function typeWriter() {
      if (i <= text.length) {
        document.querySelector('#typewriter span').textContent = text.slice(0, i);
        i++;
        setTimeout(typeWriter, speed);
      }
    }
    typeWriter();

    // Click Light Effect
    const clickEffects = document.getElementById('clickEffects');
    
    function createClickLight(x, y) {
      const light = document.createElement('div');
      light.className = 'click-light';
      light.style.left = x + 'px';
      light.style.top = y + 'px';
      
      clickEffects.appendChild(light);
      
      // Remove the element after animation completes
      setTimeout(() => {
        if (light.parentNode) {
          light.parentNode.removeChild(light);
        }
      }, 1500);
    }
    
    // Handle clicks and touches
    document.addEventListener('click', (e) => {
      createClickLight(e.clientX, e.clientY);
    });
    
    document.addEventListener('touchstart', (e) => {
      e.preventDefault();
      const touch = e.touches[0];
      createClickLight(touch.clientX, touch.clientY);
    });

    // Easter Egg - Secret Pattern Detection
    let ortizClicks = 0;
    let squareClicks = 0;
    let lastOrtizClick = 0;
    let lastSquareClick = 0;
    const secretScreen = document.getElementById('secretScreen');
    const closeSecretBtn = document.getElementById('closeSecretBtn');
    
    // Detect clicks on "ORTIZ" in the title
    document.addEventListener('click', (e) => {
      const target = e.target;
      
      // Check if clicked on "ORTIZ" text specifically
      if (target.id === 'ortizText' || target.classList.contains('ortiz-text')) {
        console.log('ORTIZ clicked!');
          const now = Date.now();
          if (now - lastOrtizClick < 2000) { // Within 2 seconds
            ortizClicks++;
            lastOrtizClick = now;
          } else {
            ortizClicks = 1;
            lastOrtizClick = now;
          }
        console.log('ORTIZ clicks:', ortizClicks);
      }
      
      // Check if clicked on square shape
      if (target.id === 'secretSquare' || target.classList.contains('square-shape') || 
          target.closest('.square-shape')) {
        console.log('Square clicked!');
        const now = Date.now();
        if (now - lastSquareClick < 2000) { // Within 2 seconds
          squareClicks++;
          lastSquareClick = now;
        } else {
          squareClicks = 1;
          lastSquareClick = now;
        }
        console.log('Square clicks:', squareClicks);
      }
      
      // Check for secret pattern: 1 click on ORTIZ + 3 clicks on square
      if (ortizClicks >= 1 && squareClicks >= 3) {
        console.log('Secret pattern detected!');
        showSecretScreen();
        // Reset counters
        ortizClicks = 0;
        squareClicks = 0;
      }
    });
    
    function showSecretScreen() {
      secretScreen.classList.add('active');
      // Add dramatic effect
      document.body.style.overflow = 'hidden';
    }
    
    // Location button functionality
    const locationBtn = document.getElementById('locationBtn');
    const coordinatesContainer = document.getElementById('coordinatesContainer');
    const secretMessage = document.getElementById('secretMessage');
    
    locationBtn.addEventListener('click', () => {
      // Hide the location button
      locationBtn.style.display = 'none';
      
      // Show coordinates with animation
      setTimeout(() => {
        coordinatesContainer.classList.add('show');
      }, 300);
      
      // Show secret message after coordinates
      setTimeout(() => {
        secretMessage.classList.add('show');
      }, 1500);
      
      // Show help text and close button after coordinates
      setTimeout(() => {
        document.querySelector('.help-text').style.display = 'block';
        closeSecretBtn.style.display = 'block';
      }, 2000);
    });
    
    closeSecretBtn.addEventListener('click', () => {
      closeSecretScreen();
    });
    
    // Add ESC key functionality to close secret screen
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && secretScreen.classList.contains('active')) {
        closeSecretScreen();
      }
    });
    
    function closeSecretScreen() {
      secretScreen.classList.remove('active');
      document.body.style.overflow = 'auto';
      
      // Reset the screen for next time
      setTimeout(() => {
        locationBtn.style.display = 'block';
        coordinatesContainer.classList.remove('show');
        secretMessage.classList.remove('show');
        document.querySelector('.help-text').style.display = 'none';
        closeSecretBtn.style.display = 'none';
      }, 500);
    }

    // Access Panel functionality
    const accessPanel = document.getElementById('accessPanel');
    const codeInputs = document.querySelectorAll('.code-input');
    const accessStatus = document.getElementById('accessStatus');
    const secretCode = '6791';
    
    // Sistema de revelación de dígitos por monedas
    const digitsToReveal = [6, 7, 9, 1]; // Dígitos del código secreto
    let revealedDigits = JSON.parse(localStorage.getItem('revealedDigits') || '[]');
    let lastRevealThreshold = parseInt(localStorage.getItem('lastRevealThreshold') || '0');
    
    // Función para revelar dígitos basado en monedas
    function checkDigitRevelation(totalCoins) {
      const thresholds = [5000, 10000, 15000, 20000]; // Cada 5000 monedas
      
      thresholds.forEach((threshold, index) => {
        if (totalCoins >= threshold && !revealedDigits.includes(index)) {
          revealDigit(index, digitsToReveal[index]);
          revealedDigits.push(index);
          lastRevealThreshold = threshold;
          localStorage.setItem('revealedDigits', JSON.stringify(revealedDigits));
          localStorage.setItem('lastRevealThreshold', lastRevealThreshold.toString());
        }
      });
    }
    
    // Función para revelar un dígito específico
    function revealDigit(index, digit) {
      // Mostrar notificación dramática
      const notification = document.createElement('div');
      notification.className = 'digit-reveal-notification';
      notification.innerHTML = `
        <div class="reveal-content">
          <div class="reveal-icon">🔓</div>
          <div class="reveal-text">¡DÍGITO REVELADO!</div>
          <div class="reveal-digit">${digit}</div>
          <div class="reveal-position">Posición ${index + 1}</div>
        </div>
      `;
      
      notification.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, #1a1a1a 0%, #333 100%);
        border: 3px solid #e60073;
        border-radius: 15px;
        padding: 30px;
        color: #fff;
        font-family: 'Orbitron', Arial, sans-serif;
        text-align: center;
        z-index: 10000;
        box-shadow: 0 0 50px #e60073, inset 0 0 20px rgba(230, 0, 115, 0.3);
        animation: revealPulse 2s ease-in-out;
      `;
      
      document.body.appendChild(notification);
      
      // Aplicar el dígito revelado al input correspondiente
      setTimeout(() => {
        codeInputs[index].value = digit;
        codeInputs[index].style.background = 'linear-gradient(135deg, #00ff7f 0%, #00cc66 100%)';
        codeInputs[index].style.color = '#000';
        codeInputs[index].style.fontWeight = 'bold';
        codeInputs[index].style.boxShadow = '0 0 20px #00ff7f';
        codeInputs[index].readOnly = true;
      }, 1000);
      
      // Remover notificación después de 3 segundos
      setTimeout(() => {
        if (notification.parentNode) {
          notification.parentNode.removeChild(notification);
        }
      }, 3000);
    }
    
    // Variables para el sistema de presión larga
    let pressTimers = {};
    let pressStartTimes = {};
    
    // Aplicar dígitos ya revelados al cargar la página (solo visual, no funcional)
    function applyRevealedDigits() {
      // No aplicar automáticamente los dígitos revelados
      // Solo marcar visualmente que están disponibles
      revealedDigits.forEach(index => {
        if (index < codeInputs.length) {
          codeInputs[index].setAttribute('data-revealed', 'true');
          codeInputs[index].style.border = '2px solid #00ff7f';
          codeInputs[index].style.boxShadow = '0 0 10px rgba(0, 255, 127, 0.3)';
        }
      });
    }
    
    function showDigitRevealNotification(index, digit) {
      // Mostrar notificación dramática
      const notification = document.createElement('div');
      notification.className = 'digit-reveal-notification';
      notification.innerHTML = `
        <div class="reveal-content">
          <div class="reveal-icon">🔓</div>
          <div class="reveal-text">¡DÍGITO REVELADO!</div>
          <div class="reveal-digit">${digit}</div>
          <div class="reveal-position">Posición ${index + 1}</div>
        </div>
      `;
      
      notification.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, #1a1a1a 0%, #333 100%);
        border: 3px solid #e60073;
        border-radius: 15px;
        padding: 30px;
        color: #fff;
        font-family: 'Orbitron', Arial, sans-serif;
        text-align: center;
        z-index: 10000;
        box-shadow: 0 0 50px #e60073, inset 0 0 20px rgba(230, 0, 115, 0.3);
        animation: revealPulse 2s ease-in-out;
      `;
      
      document.body.appendChild(notification);
      
      // Remover notificación después de 3 segundos
      setTimeout(() => {
        if (notification.parentNode) {
          notification.parentNode.removeChild(notification);
        }
      }, 3000);
    }
    
    codeInputs.forEach((input, index) => {
      input.addEventListener('input', (e) => {
        const value = e.target.value;
        
        // Allow numbers and letters (for admin code DAGO)
        if (!/^[A-Za-z0-9]*$/.test(value)) {
          e.target.value = '';
          return;
        }
        
        // Convert to uppercase for consistency
        e.target.value = value.toUpperCase();
        
        // Move to next input if value entered
        if (value && index < codeInputs.length - 1) {
          codeInputs[index + 1].focus();
        }
        
        // Check if code is complete
        checkCode();
      });
      
      input.addEventListener('keydown', (e) => {
        // Move to previous input on backspace if current is empty
        if (e.key === 'Backspace' && !e.target.value && index > 0) {
          codeInputs[index - 1].focus();
        }
        
        // Check code when Enter is pressed
        if (e.key === 'Enter') {
          console.log('Enter pressed, checking code...');
          checkCode();
        }
      });
      
      // Asegurar que el teclado se abra al hacer clic
      input.addEventListener('click', (e) => {
        input.focus();
      });
      
      // Sistema de presión larga para revelar dígitos
      input.addEventListener('mousedown', (e) => {
        console.log('Mouse down on input', index);
        console.log('Data revealed:', input.getAttribute('data-revealed'));
        console.log('Current value:', input.value);
        
        // Solo si es el último dígito (posición 3) y está disponible para revelar y no hay un timer activo
        if (index === 3 && input.getAttribute('data-revealed') === 'true' && !input.value && !pressTimers[index]) {
          console.log('Starting long press timer for digit:', digitsToReveal[index]);
          pressStartTimes[index] = Date.now();
          
          pressTimers[index] = setTimeout(() => {
            console.log('Long press completed! Revealing digit:', digitsToReveal[index]);
            // Revelar el dígito después de 2 segundos
            input.value = digitsToReveal[index];
            input.style.background = 'linear-gradient(135deg, #00ff7f 0%, #00cc66 100%)';
            input.style.color = '#000';
            input.style.fontWeight = 'bold';
            input.style.boxShadow = '0 0 20px #00ff7f';
            input.readOnly = true;
            
            // Limpiar el timer después de revelar
            delete pressTimers[index];
            
            // Mostrar notificación
            showDigitRevealNotification(index, digitsToReveal[index]);
          }, 2000);
          
          // Feedback visual durante la presión
          input.style.transform = 'scale(0.95)';
          input.style.boxShadow = '0 0 15px rgba(0, 255, 127, 0.5)';
        }
      });
      
      input.addEventListener('mouseup', (e) => {
        // Cancelar el timer si se suelta antes de 2 segundos
        if (pressTimers[index]) {
          clearTimeout(pressTimers[index]);
          delete pressTimers[index];
        }
        
        // Restaurar estilo visual
        if (input.getAttribute('data-revealed') === 'true' && !input.value) {
          input.style.transform = '';
          input.style.boxShadow = '0 0 10px rgba(0, 255, 127, 0.3)';
        }
      });
      
      input.addEventListener('mouseleave', (e) => {
        // Cancelar el timer si el mouse sale del input
        if (pressTimers[index]) {
          clearTimeout(pressTimers[index]);
          delete pressTimers[index];
        }
        
        // Restaurar estilo visual
        if (input.getAttribute('data-revealed') === 'true' && !input.value) {
          input.style.transform = '';
          input.style.boxShadow = '0 0 10px rgba(0, 255, 127, 0.3)';
        }
      });
      
      // Para dispositivos táctiles
      input.addEventListener('touchstart', (e) => {
        console.log('Touch start on input', index);
        console.log('Data revealed:', input.getAttribute('data-revealed'));
        console.log('Current value:', input.value);
        
        // No prevenir el comportamiento por defecto para permitir el teclado
        if (index === 3 && input.getAttribute('data-revealed') === 'true' && !input.value && !pressTimers[index]) {
          console.log('Starting long press timer for digit:', digitsToReveal[index]);
          pressStartTimes[index] = Date.now();
          
          pressTimers[index] = setTimeout(() => {
            console.log('Long press completed! Revealing digit:', digitsToReveal[index]);
            input.value = digitsToReveal[index];
            input.style.background = 'linear-gradient(135deg, #00ff7f 0%, #00cc66 100%)';
            input.style.color = '#000';
            input.style.fontWeight = 'bold';
            input.style.boxShadow = '0 0 20px #00ff7f';
            input.readOnly = true;
            
            // Limpiar el timer después de revelar
            delete pressTimers[index];
            
            showDigitRevealNotification(index, digitsToReveal[index]);
          }, 2000);
          
          input.style.transform = 'scale(0.95)';
          input.style.boxShadow = '0 0 15px rgba(0, 255, 127, 0.5)';
        }
      });
      
      input.addEventListener('touchend', (e) => {
        // No prevenir el comportamiento por defecto
        if (pressTimers[index]) {
          clearTimeout(pressTimers[index]);
          delete pressTimers[index];
        }
        
        if (input.getAttribute('data-revealed') === 'true' && !input.value) {
          input.style.transform = '';
          input.style.boxShadow = '0 0 10px rgba(0, 255, 127, 0.3)';
        }
      });
    });
    
    function checkCode() {
      const enteredCode = Array.from(codeInputs).map(input => input.value).join('');
      
      // NO ALERT HERE - SOLO LOGS PARA DEBUG
      
      console.log('🔍 checkCode() called with:', enteredCode);
      console.log('🔍 enteredCode length:', enteredCode.length);
      console.log('🔍 enteredCode.toUpperCase():', enteredCode.toUpperCase());
      console.log('🔍 Comparing with DAGO:', enteredCode.toUpperCase() === 'DAGO');
      
      if (enteredCode.length === 4) {
        // Check for admin code "DAGO"
        console.log('🔍 Checking for DAGO code...');
        if (enteredCode.toUpperCase() === 'DAGO') {
          console.log('🎯 DAGO CODE DETECTED! Starting admin process...');
          // ALERT SOLO PARA DAGO - NO PARA OTROS JUGADORES
          alert('🎯 ¡DAGO DETECTADO! Iniciando proceso...');
          accessStatus.textContent = '🔐 CÓDIGO ADMIN - ACCESO PERMITIDO';
          accessStatus.style.color = '#00ff00';
          accessStatus.style.textShadow = '0 0 10px #00ff00';
          
          // Show admin panel button
          const adminPanelBtn = document.getElementById('adminPanelBtn');
          console.log('🔍 Showing admin panel button:', adminPanelBtn);
          if (adminPanelBtn) {
            adminPanelBtn.style.display = 'flex';
            console.log('✅ Admin panel button displayed');
            
            // ADD 10,000 COINS EVERY TIME DAGO IS ENTERED - NO CONDITIONS
            const currentCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
            const newCoins = currentCoins + 10000;
            
            console.log('💰 DAGO CODE ENTERED - ADDING 10,000 COINS!');
            console.log(`💰 Current: ${currentCoins} -> New: ${newCoins}`);
            
            // Update localStorage immediately
            localStorage.setItem('totalOrtizCoins', newCoins.toString());
            
            // Update display
            if (typeof loadTotalCoins === 'function') {
              loadTotalCoins();
            }
            
            // Show alert to confirm it works
            alert(`🔐 DAGO CODE ACTIVATED!\n\nMonedas añadidas: +10,000\nAntes: ${currentCoins}\nDespués: ${newCoins}\n\n¡Funciona!`);
            
            console.log('✅ DAGO coins added successfully!');
            
            // Add click event listener when button is shown
            adminPanelBtn.addEventListener('click', () => {
              console.log('🔐 Admin panel button clicked!');
              // Redirect to the new admin panel
              window.location.href = 'admin-panel.html';
              console.log('✅ Redirecting to admin panel');
            });
          } else {
            console.error('❌ Admin panel button not found when trying to show it');
          }
          
          // Clear inputs but don't hide access panel for admin
          setTimeout(() => {
            codeInputs.forEach(input => input.value = '');
          }, 2000);
        }
        // Check for regular secret code
        else if (enteredCode === secretCode) {
          accessStatus.textContent = '✅ CÓDIGO CORRECTO - ACCESO PERMITIDO';
          accessStatus.style.color = '#00ff7f';
          accessStatus.style.textShadow = '0 0 10px #00ff7f';
          
          // Hide admin panel button
          const adminPanelBtn = document.getElementById('adminPanelBtn');
          adminPanelBtn.style.display = 'none';
          
          // Mostrar ventana de vida extra
          showExtraLifeModal();
          
          // Hide access panel after success
          setTimeout(() => {
            accessPanel.style.display = 'none';
          }, 2000);
        } else {
          accessStatus.textContent = '❌ CÓDIGO INCORRECTO - ACCESO DENEGADO';
          accessStatus.style.color = '#ff4757';
          accessStatus.style.textShadow = '0 0 10px #ff4757';
          
          // Hide admin panel button
          const adminPanelBtn = document.getElementById('adminPanelBtn');
          adminPanelBtn.style.display = 'none';
          
          // Clear inputs after error
          setTimeout(() => {
            codeInputs.forEach(input => input.value = '');
            codeInputs[0].focus();
          }, 2000);
        }
      }
    }
    
    // Función para mostrar la ventana de vida extra
    function showExtraLifeModal() {
      // Crear el modal
      const modal = document.createElement('div');
      modal.className = 'extra-life-modal';
      modal.innerHTML = `
        <div class="extra-life-content">
          <div class="extra-life-icon">💎</div>
          <div class="extra-life-title">¡ENHORABUENA!</div>
          <div class="extra-life-message">
            Acabas de ganar una <span class="highlight">VIDA EXTRA</span><br>
            Podrás utilizarla en cualquier momento,<br>
            <span class="warning">menos en el juego final</span><br><br>
            <span class="consequence">⚠️ QUEDA PROHIBIDO DECIR EL CÓDIGO<br>
            AL RESTO DE JUGADORES O TENDRÁS<br>
            <span class="severe">CONSECUENCIAS</span></span>
          </div>
          <button class="extra-life-btn" onclick="closeExtraLifeModal()">ENTENDIDO</button>
        </div>
      `;
      
      // Estilos del modal
      modal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        animation: modalFadeIn 0.5s ease-out;
      `;
      
      document.body.appendChild(modal);
      
      // Guardar la vida extra en localStorage
      localStorage.setItem('extraLife', 'true');
      
      // Efecto de partículas doradas
      createGoldenParticles();
    }
    
    // Función para cerrar el modal
    function closeExtraLifeModal() {
      const modal = document.querySelector('.extra-life-modal');
      if (modal) {
        modal.style.animation = 'modalFadeOut 0.5s ease-out';
        setTimeout(() => {
          if (modal.parentNode) {
            modal.parentNode.removeChild(modal);
          }
        }, 500);
      }
    }
    
    // Función para crear partículas doradas
    function createGoldenParticles() {
      for (let i = 0; i < 20; i++) {
        const particle = document.createElement('div');
        particle.style.cssText = `
          position: fixed;
          width: 8px;
          height: 8px;
          background: linear-gradient(45deg, #ffd700, #ffed4e);
          border-radius: 50%;
          pointer-events: none;
          z-index: 10001;
          box-shadow: 0 0 10px #ffd700;
        `;
        
        // Posición aleatoria
        particle.style.left = Math.random() * window.innerWidth + 'px';
        particle.style.top = Math.random() * window.innerHeight + 'px';
        
        document.body.appendChild(particle);
        
        // Animación de partícula
        particle.animate([
          { 
            transform: 'translate(0, 0) scale(1)', 
            opacity: 1 
          },
          { 
            transform: `translate(${Math.random() * 200 - 100}px, ${Math.random() * 200 - 100}px) scale(0)`, 
            opacity: 0 
          }
        ], {
          duration: 2000 + Math.random() * 1000,
          easing: 'ease-out'
        });
        
        // Remover partícula
        setTimeout(() => {
          if (particle.parentNode) {
            particle.parentNode.removeChild(particle);
          }
        }, 3000);
      }
    }

    
    
    soldierBtn.addEventListener('click', () => {
      console.log('JUGADOR seleccionado');
      
      // Add dramatic effect
      soldierBtn.style.transform = 'scale(0.9) rotateY(20deg)';
      soldierBtn.style.boxShadow = '0 0 80px #e60073, inset 0 0 40px rgba(230, 0, 115, 0.7)';
      
      // Create simple explosion effect
      for (let i = 0; i < 8; i++) {
        const particle = document.createElement('div');
        particle.style.position = 'absolute';
        particle.style.width = '4px';
        particle.style.height = '4px';
        particle.style.background = '#e60073';
        particle.style.borderRadius = '50%';
        particle.style.pointerEvents = 'none';
        particle.style.zIndex = '1000';
        
        const rect = soldierBtn.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        
        particle.style.left = centerX + 'px';
        particle.style.top = centerY + 'px';
        
        document.body.appendChild(particle);
        
        // Animate particle
        const angle = (i / 8) * Math.PI * 2;
        const distance = 50;
        const targetX = centerX + Math.cos(angle) * distance;
        const targetY = centerY + Math.sin(angle) * distance;
        
        particle.animate([
          { transform: 'translate(0, 0) scale(1)', opacity: 1 },
          { transform: `translate(${targetX - centerX}px, ${targetY - centerY}px) scale(0)`, opacity: 0 }
        ], {
          duration: 1000,
          easing: 'ease-out'
        });
        
        // Remove particle after animation
        setTimeout(() => {
          if (particle.parentNode) {
            particle.parentNode.removeChild(particle);
          }
        }, 1000);
      }
      
      // Reset button after animation
      setTimeout(() => {
        soldierBtn.style.transform = '';
        soldierBtn.style.boxShadow = '';
      }, 1000);
      
      // Show message and redirect
      setTimeout(() => {
        // Create message element
        const messageEl = document.createElement('div');
        messageEl.textContent = '🎖️ ACCESO JUGADOR ACTIVADO';
        messageEl.style.position = 'fixed';
        messageEl.style.top = '50%';
        messageEl.style.left = '50%';
        messageEl.style.transform = 'translate(-50%, -50%)';
        messageEl.style.color = '#e60073';
        messageEl.style.fontSize = '1.5rem';
        messageEl.style.fontWeight = 'bold';
        messageEl.style.textShadow = '0 0 20px #e60073';
        messageEl.style.zIndex = '2000';
        messageEl.style.pointerEvents = 'none';
        messageEl.style.fontFamily = 'Orbitron, Arial, sans-serif';
        
        document.body.appendChild(messageEl);
        
        // Animate message
        messageEl.animate([
          { opacity: 0, transform: 'translate(-50%, -50%) scale(0.5)' },
          { opacity: 1, transform: 'translate(-50%, -50%) scale(1)' },
          { opacity: 0, transform: 'translate(-50%, -50%) scale(1.2)' }
        ], {
          duration: 2000,
          easing: 'ease-in-out'
        });
        
        // Remove message and redirect
        setTimeout(() => {
          if (messageEl.parentNode) {
            messageEl.parentNode.removeChild(messageEl);
          }
          window.location.href = 'soldier-game.html';
        }, 2000);
      }, 1000);
    });
    
    playerBtn.addEventListener('click', () => {
      console.log('JUGADOR seleccionado');
      // Add dramatic effect
      playerBtn.style.transform = 'scale(0.9)';
      playerBtn.style.boxShadow = '0 0 80px #00bfff, inset 0 0 40px rgba(0,191,255,0.7)';
      // Create simple explosion effect
      for (let i = 0; i < 8; i++) {
        const particle = document.createElement('div');
        particle.style.position = 'absolute';
        particle.style.width = '4px';
        particle.style.height = '4px';
        particle.style.background = '#00bfff';
        particle.style.borderRadius = '50%';
        particle.style.pointerEvents = 'none';
        particle.style.zIndex = '1000';
        const rect = playerBtn.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        particle.style.left = centerX + 'px';
        particle.style.top = centerY + 'px';
        document.body.appendChild(particle);
        // Animate particle
        const angle = (i / 8) * Math.PI * 2;
        const distance = 50;
        const targetX = centerX + Math.cos(angle) * distance;
        const targetY = centerY + Math.sin(angle) * distance;
        particle.animate([
          { transform: 'translate(0, 0) scale(1)', opacity: 1 },
          { transform: `translate(${targetX - centerX}px, ${targetY - centerY}px) scale(0)`, opacity: 0 }
        ], {
          duration: 1000,
          easing: 'ease-out'
        });
        setTimeout(() => {
          if (particle.parentNode) {
            particle.parentNode.removeChild(particle);
          }
        }, 1000);
      }
      setTimeout(() => {
        playerBtn.style.transform = '';
        playerBtn.style.boxShadow = '';
      }, 1000);
      setTimeout(() => {
        const messageEl = document.createElement('div');
        messageEl.textContent = '🎮 MODO JUGADOR ACTIVADO';
        messageEl.style.position = 'fixed';
        messageEl.style.top = '50%';
        messageEl.style.left = '50%';
        messageEl.style.transform = 'translate(-50%, -50%)';
        messageEl.style.color = '#00bfff';
        messageEl.style.fontSize = '1.5rem';
        messageEl.style.fontWeight = 'bold';
        messageEl.style.textShadow = '0 0 20px #00bfff';
        messageEl.style.zIndex = '2000';
        messageEl.style.pointerEvents = 'none';
        messageEl.style.fontFamily = 'Orbitron, Arial, sans-serif';
        document.body.appendChild(messageEl);
        messageEl.animate([
          { opacity: 0, transform: 'translate(-50%, -50%) scale(0.5)' },
          { opacity: 1, transform: 'translate(-50%, -50%) scale(1)' },
          { opacity: 0, transform: 'translate(-50%, -50%) scale(1.2)' }
        ], {
          duration: 2000,
          easing: 'ease-in-out'
        });
        setTimeout(() => {
          if (messageEl.parentNode) {
            messageEl.parentNode.removeChild(messageEl);
          }
          window.location.href = 'player-game.html';
        }, 2000);
      }, 1000);
    });

    // VIP Button Event Listener
    const vipBtn = document.getElementById('vipBtn');
    vipBtn.addEventListener('click', () => {
      console.log('VIP seleccionado');
      
      // Add dramatic effect
      vipBtn.style.transform = 'scale(0.9) rotateY(10deg)';
      vipBtn.style.boxShadow = '0 0 80px #FFD700, inset 0 0 40px rgba(255, 215, 0, 0.7)';
      
      // Create simple explosion effect
      for (let i = 0; i < 8; i++) {
        const particle = document.createElement('div');
        particle.style.position = 'absolute';
        particle.style.width = '4px';
        particle.style.height = '4px';
        particle.style.background = '#FFD700';
        particle.style.borderRadius = '50%';
        particle.style.pointerEvents = 'none';
        particle.style.zIndex = '1000';
        
        const rect = vipBtn.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        
        particle.style.left = centerX + 'px';
        particle.style.top = centerY + 'px';
        
        document.body.appendChild(particle);
        
        // Animate particle
        const angle = (i / 8) * Math.PI * 2;
        const distance = 50;
        const targetX = centerX + Math.cos(angle) * distance;
        const targetY = centerY + Math.sin(angle) * distance;
        
        particle.animate([
          { transform: 'translate(0, 0) scale(1)', opacity: 1 },
          { transform: `translate(${targetX - centerX}px, ${targetY - centerY}px) scale(0)`, opacity: 0 }
        ], {
          duration: 1000,
          easing: 'ease-out'
        });
        
        // Remove particle after animation
        setTimeout(() => {
          if (particle.parentNode) {
            particle.parentNode.removeChild(particle);
          }
        }, 1000);
      }
      
      // Reset button after animation
      setTimeout(() => {
        vipBtn.style.transform = '';
        vipBtn.style.boxShadow = '';
      }, 1000);
      
      // Show message and redirect
      setTimeout(() => {
        const messageEl = document.createElement('div');
        messageEl.textContent = '👑 ACCESO VIP ACTIVADO';
        messageEl.style.position = 'fixed';
        messageEl.style.top = '50%';
        messageEl.style.left = '50%';
        messageEl.style.transform = 'translate(-50%, -50%)';
        messageEl.style.color = '#FFD700';
        messageEl.style.fontSize = '1.5rem';
        messageEl.style.fontWeight = 'bold';
        messageEl.style.textShadow = '0 0 20px #FFD700';
        messageEl.style.zIndex = '2000';
        messageEl.style.pointerEvents = 'none';
        messageEl.style.fontFamily = 'Orbitron, Arial, sans-serif';
        
        document.body.appendChild(messageEl);
        
        // Animate message
        messageEl.animate([
          { opacity: 0, transform: 'translate(-50%, -50%) scale(0.5)' },
          { opacity: 1, transform: 'translate(-50%, -50%) scale(1)' },
          { opacity: 0, transform: 'translate(-50%, -50%) scale(1.2)' }
        ], {
          duration: 2000,
          easing: 'ease-in-out'
        });
        
        // Remove message and redirect
        setTimeout(() => {
          if (messageEl.parentNode) {
            messageEl.parentNode.removeChild(messageEl);
          }
          window.location.href = 'vip-game.html';
        }, 2000);
      }, 1000);
    });



    // JOKER PISTAS Button Event Listener
    const jokerBtn = document.getElementById('jokerBtn');
    jokerBtn.addEventListener('click', () => {
      console.log('JOKER PISTAS seleccionado');
      
      // Add dramatic effect
      jokerBtn.style.transform = 'scale(0.9) rotateY(8deg)';
      jokerBtn.style.boxShadow = '0 0 80px #006400, inset 0 0 40px rgba(0, 100, 0, 0.7)';
      
      // Create simple explosion effect
      for (let i = 0; i < 8; i++) {
        const particle = document.createElement('div');
        particle.style.position = 'absolute';
        particle.style.width = '4px';
        particle.style.height = '4px';
        particle.style.background = '#006400';
        particle.style.borderRadius = '50%';
        particle.style.pointerEvents = 'none';
        particle.style.zIndex = '1000';
        
        const rect = jokerBtn.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        
        particle.style.left = centerX + 'px';
        particle.style.top = centerY + 'px';
        
        document.body.appendChild(particle);
        
        // Animate particle
        const angle = (i / 8) * Math.PI * 2;
        const distance = 50;
        const targetX = centerX + Math.cos(angle) * distance;
        const targetY = centerY + Math.sin(angle) * distance;
        
        particle.animate([
          { transform: 'translate(0, 0) scale(1)', opacity: 1 },
          { transform: `translate(${targetX - centerX}px, ${targetY - centerY}px) scale(0)`, opacity: 0 }
        ], {
          duration: 1000,
          easing: 'ease-out'
        });
        
        // Remove particle after animation
        setTimeout(() => {
          if (particle.parentNode) {
            particle.parentNode.removeChild(particle);
          }
        }, 1000);
      }
      
      // Reset button after animation
      setTimeout(() => {
        jokerBtn.style.transform = '';
        jokerBtn.style.boxShadow = '';
      }, 1000);
      
      // Show message and redirect
      setTimeout(() => {
        const messageEl = document.createElement('div');
        messageEl.textContent = '🎭 JOKER PISTAS ACTIVADO';
        messageEl.style.position = 'fixed';
        messageEl.style.top = '50%';
        messageEl.style.left = '50%';
        messageEl.style.transform = 'translate(-50%, -50%)';
        messageEl.style.color = '#006400';
        messageEl.style.fontSize = '1.5rem';
        messageEl.style.fontWeight = 'bold';
        messageEl.style.textShadow = '0 0 20px #006400';
        messageEl.style.zIndex = '2000';
        messageEl.style.pointerEvents = 'none';
        messageEl.style.fontFamily = 'Orbitron, Arial, sans-serif';
        
        document.body.appendChild(messageEl);
        
        // Animate message
        messageEl.animate([
          { opacity: 0, transform: 'translate(-50%, -50%) scale(0.5)' },
          { opacity: 1, transform: 'translate(-50%, -50%) scale(1)' },
          { opacity: 0, transform: 'translate(-50%, -50%) scale(1.2)' }
        ], {
          duration: 2000,
          easing: 'ease-in-out'
        });
        
        // Remove message and redirect
        setTimeout(() => {
          if (messageEl.parentNode) {
            messageEl.parentNode.removeChild(messageEl);
          }
          window.location.href = 'joker-pistas.html';
        }, 2000);
      }, 1000);
    });

    // PvP BATALLA Button Event Listener
    const pvpBtn = document.getElementById('pvpBtn');
    pvpBtn.addEventListener('click', () => {
              console.log('ROBO seleccionado');
      
      // Add dramatic effect
      pvpBtn.style.transform = 'scale(0.9) rotateY(8deg)';
      pvpBtn.style.boxShadow = '0 0 80px #FF4500, inset 0 0 40px rgba(255, 69, 0, 0.7)';
      
      // Create simple explosion effect
      for (let i = 0; i < 8; i++) {
        const particle = document.createElement('div');
        particle.style.position = 'absolute';
        particle.style.width = '4px';
        particle.style.height = '4px';
        particle.style.background = '#FF4500';
        particle.style.borderRadius = '50%';
        particle.style.pointerEvents = 'none';
        particle.style.zIndex = '1000';
        
        const rect = pvpBtn.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        
        particle.style.left = centerX + 'px';
        particle.style.top = centerY + 'px';
        
        document.body.appendChild(particle);
        
        // Animate particle
        const angle = (i / 8) * Math.PI * 2;
        const distance = 50;
        const targetX = centerX + Math.cos(angle) * distance;
        const targetY = centerY + Math.sin(angle) * distance;
        
        particle.animate([
          { transform: 'translate(0, 0) scale(1)', opacity: 1 },
          { transform: `translate(${targetX - centerX}px, ${targetY - centerY}px) scale(0)`, opacity: 0 }
        ], {
          duration: 1000,
          easing: 'ease-out'
        });
        
        // Remove particle after animation
        setTimeout(() => {
          if (particle.parentNode) {
            particle.parentNode.removeChild(particle);
          }
        }, 1000);
      }
      
      // Reset button after animation
      setTimeout(() => {
        pvpBtn.style.transform = '';
        pvpBtn.style.boxShadow = '';
      }, 1000);
      
      // Show message and redirect
      setTimeout(() => {
        const messageEl = document.createElement('div');
        messageEl.textContent = '⚔️ SISTEMA DE ROBO ACTIVADO';
        messageEl.style.position = 'fixed';
        messageEl.style.top = '50%';
        messageEl.style.left = '50%';
        messageEl.style.transform = 'translate(-50%, -50%)';
        messageEl.style.color = '#FF4500';
        messageEl.style.fontSize = '1.5rem';
        messageEl.style.fontWeight = 'bold';
        messageEl.style.textShadow = '0 0 20px #FF4500';
        messageEl.style.zIndex = '2000';
        messageEl.style.pointerEvents = 'none';
        messageEl.style.fontFamily = 'Orbitron, Arial, sans-serif';
        
        document.body.appendChild(messageEl);
        
        // Animate message
        messageEl.animate([
          { opacity: 0, transform: 'translate(-50%, -50%) scale(0.5)' },
          { opacity: 1, transform: 'translate(-50%, -50%) scale(1)' },
          { opacity: 0, transform: 'translate(-50%, -50%) scale(1.2)' }
        ], {
          duration: 2000,
          easing: 'ease-in-out'
        });
        
        // Remove message and redirect
        setTimeout(() => {
          if (messageEl.parentNode) {
            messageEl.parentNode.removeChild(messageEl);
          }
          window.location.href = 'robo.html';
        }, 2000);
      }, 1000);
    });

    // DAILY REWARD Button Event Listener
    const dailyRewardBtn = document.getElementById('dailyRewardBtn');
    const dailyRewardContainer = document.querySelector('.daily-reward-container');
    
    function handleDailyRewardClick() {
      console.log('DAILY REWARD seleccionado');
      
      // Check if daily reward is available
      if (!isDailyRewardAvailable()) {
        showDailyRewardMessage('Ya has cobrado tu recompensa diaria. Vuelve mañana.');
        return;
      }
      
      // Add dramatic effect
      dailyRewardContainer.style.transform = 'scale(0.9) rotateY(5deg)';
      dailyRewardContainer.style.boxShadow = '0 0 80px #e60073, inset 0 0 40px rgba(230, 0, 115, 0.7)';
      
      // Create reward explosion effect
      for (let i = 0; i < 12; i++) {
        const particle = document.createElement('div');
        particle.style.position = 'absolute';
        particle.style.width = '6px';
        particle.style.height = '6px';
        particle.style.background = '#e60073';
        particle.style.borderRadius = '50%';
        particle.style.pointerEvents = 'none';
        particle.style.zIndex = '1000';
        particle.style.boxShadow = '0 0 10px #e60073';
        
        const rect = dailyRewardContainer.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        
        particle.style.left = centerX + 'px';
        particle.style.top = centerY + 'px';
        
        document.body.appendChild(particle);
        
        // Animate particle
        const angle = (i / 12) * Math.PI * 2;
        const distance = 60;
        const targetX = centerX + Math.cos(angle) * distance;
        const targetY = centerY + Math.sin(angle) * distance;
        
        particle.animate([
          { transform: 'translate(0, 0) scale(1)', opacity: 1 },
          { transform: `translate(${targetX - centerX}px, ${targetY - centerY}px) scale(0)`, opacity: 0 }
        ], {
          duration: 1200,
          easing: 'ease-out'
        });
        
        // Remove particle after animation
        setTimeout(() => {
          if (particle.parentNode) {
            particle.parentNode.removeChild(particle);
          }
        }, 1200);
      }
      
      // Reset button after animation
      setTimeout(() => {
        dailyRewardContainer.style.transform = '';
        dailyRewardContainer.style.boxShadow = '';
      }, 1200);
      
      // Show daily reward modal
      setTimeout(() => {
        showDailyRewardModal();
      }, 1200);
    }
    
    // Add event listeners to both container and button
    dailyRewardContainer.addEventListener('click', handleDailyRewardClick);
    dailyRewardBtn.addEventListener('click', handleDailyRewardClick);

    // ACHIEVEMENTS Button Event Listener
    const achievementsBtn = document.getElementById('achievementsBtn');
    const achievementsContainer = document.querySelector('.achievements-container');
    
    function handleAchievementsClick() {
      console.log('🏆 ACHIEVEMENTS seleccionado');
      
      // Add dramatic effect
      achievementsContainer.style.transform = 'scale(0.9) rotateY(5deg)';
      achievementsContainer.style.boxShadow = '0 0 80px #FFD700, inset 0 0 40px rgba(255, 215, 0, 0.7)';
      
      // Create achievement explosion effect
      for (let i = 0; i < 12; i++) {
        const particle = document.createElement('div');
        particle.style.position = 'absolute';
        particle.style.width = '6px';
        particle.style.height = '6px';
        particle.style.background = '#FFD700';
        particle.style.borderRadius = '50%';
        particle.style.pointerEvents = 'none';
        particle.style.zIndex = '1000';
        particle.style.boxShadow = '0 0 10px #FFD700';
        
        const rect = achievementsContainer.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        
        particle.style.left = centerX + 'px';
        particle.style.top = centerY + 'px';
        
        document.body.appendChild(particle);
        
        // Animate particle
        const angle = (i / 12) * Math.PI * 2;
        const distance = 60;
        const targetX = centerX + Math.cos(angle) * distance;
        const targetY = centerY + Math.sin(angle) * distance;
        
        particle.animate([
          { transform: 'translate(0, 0) scale(1)', opacity: 1 },
          { transform: `translate(${targetX - centerX}px, ${targetY - centerY}px) scale(0)`, opacity: 0 }
        ], {
          duration: 1200,
          easing: 'ease-out'
        });
        
        // Remove particle after animation
        setTimeout(() => {
          if (particle.parentNode) {
            particle.parentNode.removeChild(particle);
          }
        }, 1200);
      }
      
      // Reset button after animation
      setTimeout(() => {
        achievementsContainer.style.transform = '';
        achievementsContainer.style.boxShadow = '';
      }, 1200);
      
      // Show achievements modal
      setTimeout(() => {
        showAchievementsModal();
      }, 1200);
    }
    
    // Add event listeners to both container and button
    achievementsContainer.addEventListener('click', handleAchievementsClick);
    achievementsBtn.addEventListener('click', handleAchievementsClick);

    // FRONT MAN Button Event Listener
    const frontmanBtn = document.getElementById('frontmanBtn');
    frontmanBtn.addEventListener('click', () => {
      console.log('FRONT MAN seleccionado');
      
      // Add dramatic effect
      frontmanBtn.style.transform = 'scale(0.9) rotateY(-10deg)';
      frontmanBtn.style.boxShadow = '0 0 80px #000000, inset 0 0 40px rgba(0, 0, 0, 0.7)';
      
      // Create simple explosion effect
      for (let i = 0; i < 8; i++) {
        const particle = document.createElement('div');
        particle.style.position = 'absolute';
        particle.style.width = '4px';
        particle.style.height = '4px';
        particle.style.background = '#ffffff';
        particle.style.borderRadius = '50%';
        particle.style.pointerEvents = 'none';
        particle.style.zIndex = '1000';
        
        const rect = frontmanBtn.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        
        particle.style.left = centerX + 'px';
        particle.style.top = centerY + 'px';
        
        document.body.appendChild(particle);
        
        // Animate particle
        const angle = (i / 8) * Math.PI * 2;
        const distance = 50;
        const targetX = centerX + Math.cos(angle) * distance;
        const targetY = centerY + Math.sin(angle) * distance;
        
        particle.animate([
          { transform: 'translate(0, 0) scale(1)', opacity: 1 },
          { transform: `translate(${targetX - centerX}px, ${targetY - centerY}px) scale(0)`, opacity: 0 }
        ], {
          duration: 1000,
          easing: 'ease-out'
        });
        
        // Remove particle after animation
        setTimeout(() => {
          if (particle.parentNode) {
            particle.parentNode.removeChild(particle);
          }
        }, 1000);
      }
      
      // Reset button after animation
      setTimeout(() => {
        frontmanBtn.style.transform = '';
        frontmanBtn.style.boxShadow = '';
      }, 1000);
      
      // Show message and redirect
      setTimeout(() => {
        const messageEl = document.createElement('div');
        messageEl.textContent = '🎯 ACCESO FRONT MAN ACTIVADO';
        messageEl.style.position = 'fixed';
        messageEl.style.top = '50%';
        messageEl.style.left = '50%';
        messageEl.style.transform = 'translate(-50%, -50%)';
        messageEl.style.color = '#ffffff';
        messageEl.style.fontSize = '1.5rem';
        messageEl.style.fontWeight = 'bold';
        messageEl.style.textShadow = '0 0 20px #ffffff';
        messageEl.style.zIndex = '2000';
        messageEl.style.pointerEvents = 'none';
        messageEl.style.fontFamily = 'Orbitron, Arial, sans-serif';
        
        document.body.appendChild(messageEl);
        
        // Animate message
        messageEl.animate([
          { opacity: 0, transform: 'translate(-50%, -50%) scale(0.5)' },
          { opacity: 1, transform: 'translate(-50%, -50%) scale(1)' },
          { opacity: 0, transform: 'translate(-50%, -50%) scale(1.2)' }
        ], {
          duration: 2000,
          easing: 'ease-in-out'
        });
        
        // Remove message and redirect
        setTimeout(() => {
          if (messageEl.parentNode) {
            messageEl.parentNode.removeChild(messageEl);
          }
          window.location.href = 'frontman-game.html';
        }, 2000);
      }, 1000);
    });

    // Función para cargar y mostrar el total de monedas
    function loadTotalCoins() {
      console.log('🚀 === FUNCIÓN loadTotalCoins EJECUTÁNDOSE ===');
      const totalCoinsElement = document.getElementById('totalCoins');
      let totalCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0', 10);
      console.log('💰 Monedas leídas de localStorage:', totalCoins);
      totalCoinsElement.textContent = totalCoins;
      
      // Verificar si se debe revelar algún dígito
      checkDigitRevelation(totalCoins);
      
      // Check all button visibility
      checkAllButtonVisibility();
      
      // Easter Egg: Mostrar "6" en el título de acceso si tiene más de 50,000 monedas
      const easterEgg6 = document.getElementById('easter-egg-6');
      
      if (easterEgg6) {
        if (totalCoins >= 50000) {
          easterEgg6.style.display = 'inline';
        } else {
          easterEgg6.style.display = 'none';
        }
      }
      
      // Check for VIP trap at 150,000 coins
      checkVIPTrap(totalCoins);
    }

    function checkVIPTrap(totalCoins) {
      if (totalCoins >= 150000) {
        const vipTrapShown = localStorage.getItem('vipTrapShown');
        if (vipTrapShown !== 'true') {
          showVIPTrap();
        }
      }
    }

    function showVIPTrap() {
      console.log('🐎 VIP Trap triggered - player has 150,000+ coins');
      
      // Mark as shown permanently
      localStorage.setItem('vipTrapShown', 'true');
      
      // Create modal HTML
      const modalHTML = `
        <div class="vip-trap-modal" id="vipTrapModal">
          <div class="vip-trap-content">
            <div class="vip-trap-header">
              <h2>🐎 VIP - FRONT MAN</h2>
              <div class="vip-trap-subtitle">¡No nos gustan los caballos con tanto dinero!</div>
            </div>
            
            <div class="vip-trap-message">
              <p>¿Aceptas que te quitemos <strong>100,000 monedas</strong> o prefieres jugártela en decirnos <strong>NO</strong>?</p>
              <div class="vip-trap-warning">⚠️ Piensa bien tu respuesta, caballo</div>
            </div>
            
            <div class="vip-trap-buttons">
              <button class="vip-trap-accept-btn" id="vipTrapAcceptBtn">✅ ACEPTO</button>
              <button class="vip-trap-dare-btn" id="vipTrapDareBtn">🎰 ME LA JUEGO</button>
            </div>
          </div>
        </div>
      `;
      
      // Add modal to page
      document.body.insertAdjacentHTML('beforeend', modalHTML);
      
      // Add event listeners
      document.getElementById('vipTrapAcceptBtn').addEventListener('click', () => {
        executeVIPTrapAccept();
      });
      
      document.getElementById('vipTrapDareBtn').addEventListener('click', () => {
        executeVIPTrapDare();
      });
      
      // Close on outside click
      document.getElementById('vipTrapModal').addEventListener('click', (e) => {
        if (e.target.id === 'vipTrapModal') {
          closeVIPTrapModal();
        }
      });
    }

    function executeVIPTrapAccept() {
      console.log('✅ VIP Trap - Player accepted 100,000 coin penalty');
      
      const currentCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
      const newCoins = Math.max(0, currentCoins - 100000);
      
      // Update coins
      localStorage.setItem('totalOrtizCoins', newCoins.toString());
      
      // Track in Firebase
      const playerName = localStorage.getItem('soldierName');
      if (playerName && window.PlayerDataManager) {
        PlayerDataManager.trackEasterEgg(playerName, 'vip-trap-accept', 100000);
      }
      
      loadTotalCoins();
      
      // Show result message
      const modal = document.getElementById('vipTrapModal');
      modal.innerHTML = `
        <div class="vip-trap-content">
          <div class="vip-trap-header">
            <h2 style="color: #00ff00;">🐎 ¡SABIA DECISIÓN!</h2>
          </div>
          <div class="vip-trap-message">
            <p style="color: #ffffff; font-size: 1.3rem; margin: 20px 0;">Al menos sabes cuándo ceder</p>
            <p style="color: #00ff66; font-size: 1.1rem;">Penalización: -100,000 monedas</p>
            <p style="color: #ffff00; font-size: 1rem; margin: 15px 0; font-style: italic;">Te quedan ${newCoins.toLocaleString()} monedas</p>
          </div>
          <div class="vip-trap-buttons">
            <button class="vip-trap-close-btn" id="vipTrapCloseBtn">✅ CERRAR</button>
          </div>
        </div>
      `;
      
      // Add close button listener
      document.getElementById('vipTrapCloseBtn').addEventListener('click', () => {
        closeVIPTrapModal();
      });
    }

    function executeVIPTrapDare() {
      console.log('🎰 VIP Trap - Player dared to say NO - loses everything!');
      
      // Reset coins to 0
      localStorage.setItem('totalOrtizCoins', '0');
      
      // Track in Firebase
      const playerName = localStorage.getItem('soldierName');
      if (playerName && window.PlayerDataManager) {
        PlayerDataManager.trackEasterEgg(playerName, 'vip-trap-dare', 150000);
      }
      
      loadTotalCoins();
      
      // Show result message
      const modal = document.getElementById('vipTrapModal');
      modal.innerHTML = `
        <div class="vip-trap-content">
          <div class="vip-trap-header">
            <h2 style="color: #ff0000;">🐎 ¡ERES UN CABALLO!</h2>
          </div>
          <div class="vip-trap-message">
            <p style="color: #ffffff; font-size: 1.3rem; margin: 20px 0;">¡Ves como eres un caballo, no piensas!</p>
            <p style="color: #ff6666; font-size: 1.1rem;">Penalización: -TODAS las monedas</p>
            <p style="color: #ffff00; font-size: 1rem; margin: 15px 0; font-style: italic;">Te quedan 0 monedas</p>
          </div>
          <div class="vip-trap-buttons">
            <button class="vip-trap-close-btn" id="vipTrapCloseBtn">😈 CERRAR</button>
          </div>
        </div>
      `;
      
      // Add close button listener
      document.getElementById('vipTrapCloseBtn').addEventListener('click', () => {
        closeVIPTrapModal();
      });
    }

    function closeVIPTrapModal() {
      const modal = document.getElementById('vipTrapModal');
      if (modal) {
        modal.remove();
      }
    }

    // Escuchar evento ortizCoinsUpdated y actualizar el contador
    window.addEventListener('ortizCoinsUpdated', (event) => {
      loadTotalCoins();
    });

    // Al cargar la página, mostrar el total correcto
    window.addEventListener('DOMContentLoaded', loadTotalCoins);

    // Soldier Name Modal functionality
    const soldierNameModal = document.getElementById('soldierNameModal');
    const soldierNameInput = document.getElementById('soldierNameInput');
    const saveSoldierNameBtn = document.getElementById('saveSoldierNameBtn');
    const soldierNameDisplay = document.getElementById('soldierNameDisplay');
    const soldierNameText = document.getElementById('soldierNameText');
    
    // Check if soldier name exists in localStorage
    function checkSoldierName() {
      const savedName = localStorage.getItem('soldierName');
      if (savedName) {
        // Hide modal and show name display
        soldierNameModal.style.display = 'none';
        soldierNameText.textContent = savedName;
        soldierNameDisplay.style.display = 'flex';
      } else {
        // Show modal to get name
        soldierNameModal.style.display = 'flex';
        soldierNameInput.focus();
      }
    }
    
    // Save soldier name
    function saveSoldierName() {
      const name = soldierNameInput.value.trim();
      if (!name) {
        alert('Por favor ingresa tu nombre, jugador');
        return;
      }
      
      // Save to localStorage
      localStorage.setItem('soldierName', name);
      
      // Hide modal and show name display
      soldierNameModal.style.display = 'none';
      soldierNameText.textContent = name;
      soldierNameDisplay.style.display = 'flex';
      
      // Clear input
      soldierNameInput.value = '';
    }
    
    // Event listeners
    saveSoldierNameBtn.addEventListener('click', saveSoldierName);
    soldierNameInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        saveSoldierName();
      }
    });
    
    // Load total coins when page loads
    loadTotalCoins();
    
    // Aplicar dígitos ya revelados al cargar la página
    applyRevealedDigits();
    
    // Check soldier name when page loads
    checkSoldierName();
    
    // Easter Egg - Sistema Activo Click Counter
    let sistemaActivoClicks = 0;
    let lastSistemaActivoClick = 0;
    const sistemaActivoElement = document.getElementById('sistemaActivo');
    const easterEggModal = document.getElementById('easterEggModal');
    const closeEasterEggBtn = document.getElementById('closeEasterEgg');
    
    // Detect clicks on "SISTEMA ACTIVO"
    sistemaActivoElement.addEventListener('click', () => {
      const now = Date.now();
      
      // Reset counter if more than 5 seconds between clicks
      if (now - lastSistemaActivoClick > 5000) {
        sistemaActivoClicks = 0;
      }
      
      sistemaActivoClicks++;
      lastSistemaActivoClick = now;
      
      console.log('SISTEMA ACTIVO clicks:', sistemaActivoClicks);
      
      // Add visual feedback for each click
      sistemaActivoElement.style.transform = 'scale(1.1)';
      sistemaActivoElement.style.textShadow = '0 0 30px #FFD700, 0 0 60px #FFD700';
      
      setTimeout(() => {
        sistemaActivoElement.style.transform = '';
        sistemaActivoElement.style.textShadow = '';
      }, 200);
      
      // Check if 10 clicks reached
      if (sistemaActivoClicks >= 10) {
        console.log('Easter Egg activated!');
        activateEasterEgg();
        sistemaActivoClicks = 0; // Reset counter
      }
    });
    
    function activateEasterEgg() {
      // Check if this easter egg has already been claimed
      const sistemaActivoClaimed = localStorage.getItem('sistemaActivoEasterEggClaimed');
      if (sistemaActivoClaimed === 'true') {
        alert('🥚 Este Easter Egg ya ha sido reclamado. ¡Solo se puede obtener una vez!');
        return;
      }
      
      // Mark as claimed
      localStorage.setItem('sistemaActivoEasterEggClaimed', 'true');
      
      // Add 500 coins to total using safe addition
      if (window.PlayerDataManager && PlayerDataManager.safeAddCoins(500, 'easter-egg-sistema-activo')) {
        console.log('✅ Easter Egg coins added safely: +500');
      } else {
        // Fallback if PlayerDataManager not available
        let totalCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
        totalCoins += 500;
        localStorage.setItem('totalOrtizCoins', totalCoins);
      }
      
      // Increment easter eggs found counter
      const currentEasterEggs = parseInt(localStorage.getItem('easterEggsFound') || '0');
      localStorage.setItem('easterEggsFound', (currentEasterEggs + 1).toString());
      console.log('🥚 Easter Egg found! Total:', currentEasterEggs + 1);
      
      // Update statistics display
      loadStats();
      
      // Track Easter Egg in Firebase
      const playerName = localStorage.getItem('soldierName');
      if (playerName && window.PlayerDataManager) {
        PlayerDataManager.trackEasterEgg(playerName, 'sistema-activo', 500);
        console.log('🥚 Easter Egg tracked: sistema-activo');
      }
      
      // Update display
      loadTotalCoins();
      
      // Show easter egg modal
      easterEggModal.classList.add('active');
      document.body.style.overflow = 'hidden';
      
      // Create coin rain effect
      createCoinRain();
      
      // Create coin explosion effect
      setTimeout(() => {
        createCoinExplosion();
      }, 500);
    }
    
    function createCoinRain() {
      const coinsRain = document.getElementById('coinsRain');
      
      for (let i = 0; i < 20; i++) {
        setTimeout(() => {
          const coin = document.createElement('div');
          coin.className = 'coin-particle';
          coin.textContent = '💰';
          coin.style.left = Math.random() * 100 + '%';
          coin.style.animationDelay = Math.random() * 2 + 's';
          
          coinsRain.appendChild(coin);
          
          // Remove coin after animation
          setTimeout(() => {
            if (coin.parentNode) {
              coin.parentNode.removeChild(coin);
            }
          }, 3000);
        }, i * 100);
      }
    }
    
    function createCoinExplosion() {
      const coinsExplosion = document.getElementById('coinsExplosion');
      
      for (let i = 0; i < 12; i++) {
        const coin = document.createElement('div');
        coin.className = 'explosion-coin';
        coin.textContent = '💰';
        coin.style.left = '50%';
        coin.style.top = '50%';
        
        // Calculate explosion direction
        const angle = (i / 12) * Math.PI * 2;
        const distance = 100;
        const targetX = Math.cos(angle) * distance;
        const targetY = Math.sin(angle) * distance;
        
        coin.style.setProperty('--target-x', targetX + 'px');
        coin.style.setProperty('--target-y', targetY + 'px');
        
        coinsExplosion.appendChild(coin);
        
        // Remove coin after animation
        setTimeout(() => {
          if (coin.parentNode) {
            coin.parentNode.removeChild(coin);
          }
        }, 2000);
      }
    }
    
    // Close easter egg modal
    closeEasterEggBtn.addEventListener('click', () => {
      closeEasterEggModal();
    });
    
    // Close modal when clicking anywhere on the modal
    easterEggModal.addEventListener('click', (e) => {
      // Only close if clicking on the modal background, not on content
      if (e.target === easterEggModal) {
        closeEasterEggModal();
      }
    });
    
    function closeEasterEggModal() {
      easterEggModal.classList.remove('active');
      document.body.style.overflow = 'auto';
      
      // Clear coin animations
      document.getElementById('coinsRain').innerHTML = '';
      document.getElementById('coinsExplosion').innerHTML = '';
      
      // Redirect to home after a short delay
      setTimeout(() => {
        window.location.href = 'index.html';
      }, 300);
    }
    
    // Add ESC key functionality to close easter egg modal
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && easterEggModal.classList.contains('active')) {
        closeEasterEggModal();
      }
    });
    
    // Easter Egg 2 - Gods Power Card Detection
    let soldierNameClicks = 0;
    let coinsCounterClicks = 0;
    let lastSoldierNameClick = 0;
    let lastCoinsCounterClick = 0;
    const godsPowerModal = document.getElementById('godsPowerModal');
    const closeGodsPowerBtn = document.getElementById('closeGodsPower');
    
    // Admin Panel variables
    let adminSequence = [];
    let adminSequenceTimeout = null;
    const adminPanel = document.getElementById('adminPanel');
    const refreshAdminBtn = document.getElementById('refreshAdminBtn');
    const closeAdminBtn = document.getElementById('closeAdminBtn');
    
    // Fusion Power Easter Egg variables
    let fusionSequence = [];
    let fusionSequenceTimeout = null;
    const fusionPowerModal = document.getElementById('fusionPowerModal');
    const closeFusionPowerBtn = document.getElementById('closeFusionPower');
    
    // Detect clicks on soldier name display
    document.addEventListener('click', (e) => {
      const target = e.target;
      
      // Check if clicked on soldier name display
      if (target.closest('#soldierNameDisplay') || target.closest('.soldier-name')) {
        console.log('Soldier name clicked!');
        const now = Date.now();
        if (now - lastSoldierNameClick < 3000) { // Within 3 seconds
          soldierNameClicks++;
          lastSoldierNameClick = now;
        } else {
          soldierNameClicks = 1;
          lastSoldierNameClick = now;
        }
        console.log('Soldier name clicks:', soldierNameClicks);
        
        // Add visual feedback
        const soldierNameDisplay = document.getElementById('soldierNameDisplay');
        if (soldierNameDisplay) {
          soldierNameDisplay.style.transform = 'scale(1.1)';
          soldierNameDisplay.style.boxShadow = '0 0 30px #e60073, 0 0 60px #e60073';
          
          setTimeout(() => {
            soldierNameDisplay.style.transform = '';
            soldierNameDisplay.style.boxShadow = '';
          }, 300);
        }
        
        // Check for +1 coin Easter Egg: 3 clicks on soldier name
        if (soldierNameClicks >= 3) {
          console.log('+1 coin Easter Egg activated!');
          addOneCoin();
          
          // Track Easter Egg in Firebase
          const playerName = localStorage.getItem('soldierName');
          if (playerName && window.PlayerDataManager) {
            PlayerDataManager.trackEasterEgg(playerName, 'soldier-name', 1);
            console.log('🥚 Easter Egg tracked: soldier-name');
          }
          
          soldierNameClicks = 0; // Reset counter
        }
      }
      
      // Check if clicked on coins counter
      if (target.closest('#coinsCounter') || target.closest('.coins-counter')) {
        console.log('Coins counter clicked!');
        const now = Date.now();
        if (now - lastCoinsCounterClick < 3000) { // Within 3 seconds
          coinsCounterClicks++;
          lastCoinsCounterClick = now;
        } else {
          coinsCounterClicks = 1;
          lastCoinsCounterClick = now;
        }
        console.log('Coins counter clicks:', coinsCounterClicks);
        
        // Add visual feedback
        const coinsCounter = document.getElementById('coinsCounter');
        if (coinsCounter) {
          coinsCounter.style.transform = 'scale(1.1)';
          coinsCounter.style.boxShadow = '0 0 30px #FFD700, 0 0 60px #FFD700';
          
          setTimeout(() => {
            coinsCounter.style.transform = '';
            coinsCounter.style.boxShadow = '';
          }, 300);
        }
      }
      
      // Check for gods power pattern: 2 clicks on soldier name + 2 clicks on coins counter
      if (soldierNameClicks >= 2 && coinsCounterClicks >= 2) {
        console.log('Gods power pattern detected!');
        activateGodsPower();
        // Reset counters
        soldierNameClicks = 0;
        coinsCounterClicks = 0;
      }
      
      // Check for fusion power sequence
      checkFusionSequence(target);
    });
    
    function checkAdminSequence(target) {
      // This function is now handled by the code input system
    }
    
    function addToAdminSequence(element, timestamp) {
      // This function is now handled by the code input system
    }
    
    function activateAdminPanel() {
      console.log('🔐 Activating admin panel...');
      console.log('Admin panel element:', adminPanel);
      
      adminPanel.style.display = 'flex';
      document.body.style.overflow = 'hidden';
      
      console.log('Admin panel display style:', adminPanel.style.display);
      
      loadAdminData();
      console.log('🔐 Admin panel activated!');
    }
    
    function loadAdminData() {
      console.log('📊 Loading admin data...');
      
      // Get all player data from localStorage
      const allPlayers = [];
      let totalCoins = 0;
      
      // Check for current player data
      const currentName = localStorage.getItem('soldierName') || 'Jugador';
      const currentCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
      
      console.log('Current player name:', currentName);
      console.log('Current player coins:', currentCoins);
      
      if (currentName && currentCoins > 0) {
        allPlayers.push({
          name: currentName,
          coins: currentCoins
        });
        totalCoins += currentCoins;
      }
      
      console.log('Total players:', allPlayers.length);
      console.log('Total coins:', totalCoins);
      
      // Update stats
      const totalPlayersElement = document.getElementById('totalPlayers');
      const totalCoinsElement = document.getElementById('totalCoinsAdmin');
      
      console.log('Total players element:', totalPlayersElement);
      console.log('Total coins element:', totalCoinsElement);
      
      if (totalPlayersElement) totalPlayersElement.textContent = allPlayers.length;
      if (totalCoinsElement) totalCoinsElement.textContent = totalCoins;
      
      // Update players list
      const playersContainer = document.getElementById('playersContainer');
      playersContainer.innerHTML = '';
      
      if (allPlayers.length === 0) {
        playersContainer.innerHTML = '<div class="player-item"><span class="player-name">No hay jugadores registrados</span></div>';
      } else {
        allPlayers.forEach(player => {
          const playerItem = document.createElement('div');
          playerItem.className = 'player-item';
          playerItem.innerHTML = `
            <span class="player-name">🎖️ ${player.name}</span>
            <span class="player-coins">🪙 ${player.coins}</span>
          `;
          playersContainer.appendChild(playerItem);
        });
      }
    }
    
    function checkFusionSequence(target) {
      const now = Date.now();
      
      // Clear previous timeout
      if (fusionSequenceTimeout) {
        clearTimeout(fusionSequenceTimeout);
      }
      
      // Check for triangle shape
      if (target.closest('.triangle-shape') || target.closest('.floating-triangle') || target.closest('.floating-triangle-2')) {
        console.log('Triangle clicked for fusion!');
        addToFusionSequence('triangle', now);
      }
      
      // Set timeout to reset sequence after 5 seconds
      fusionSequenceTimeout = setTimeout(() => {
        fusionSequence = [];
        console.log('Fusion sequence reset due to timeout');
      }, 5000);
    }
    
    function addToFusionSequence(element, timestamp) {
      // Add to sequence (allow multiple clicks on same element)
      fusionSequence.push({ element, timestamp });
      console.log('✅ Added to fusion sequence:', element);
      console.log('📋 Current fusion sequence:', fusionSequence.map(item => item.element));
      
      // Check if sequence is complete
      if (fusionSequence.length === 6) {
        const expectedSequence = ['triangle', 'triangle', 'triangle', 'triangle', 'triangle', 'triangle'];
        const actualSequence = fusionSequence.map(item => item.element);
        
        console.log('🎯 Expected sequence:', expectedSequence);
        console.log('🎯 Actual sequence:', actualSequence);
        
        if (JSON.stringify(expectedSequence) === JSON.stringify(actualSequence)) {
          console.log('🎉 Fusion power sequence completed!');
          activateFusionPower();
          fusionSequence = []; // Reset sequence
        } else {
          console.log('❌ Fusion sequence incorrect, resetting');
          console.log('❌ Expected:', expectedSequence);
          console.log('❌ Got:', actualSequence);
          fusionSequence = [];
        }
      }
    }
    
    function activateGodsPower() {
      // Show gods power modal
      godsPowerModal.classList.add('active');
      document.body.style.overflow = 'hidden';
      
      // Create lightning effects
      createLightningEffects();
    }
    
    function activateFusionPower() {
      // Increment easter eggs found counter
      const currentEasterEggs = parseInt(localStorage.getItem('easterEggsFound') || '0');
      localStorage.setItem('easterEggsFound', (currentEasterEggs + 1).toString());
      console.log('🥚 Easter Egg found! Total:', currentEasterEggs + 1);
      
      // Update statistics display
      loadStats();
      
      // Show fusion power modal
      fusionPowerModal.classList.add('active');
      document.body.style.overflow = 'hidden';
      
      // Create fusion effects
      createFusionEffects();
    }
    
    function addOneCoin() {
      console.log('🪙 Adding 1 coin from Easter Egg...');
      
      // Get current coins
      let totalCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
      const newTotal = totalCoins + 1;
      
      // Update localStorage first
      localStorage.setItem('totalOrtizCoins', newTotal.toString());
      console.log(`✅ Local coins updated: ${totalCoins} -> ${newTotal}`);
      
      // Try to sync with Firebase using PlayerDataManager
      if (window.PlayerDataManager && typeof PlayerDataManager.safeAddCoins === 'function') {
        try {
          const success = PlayerDataManager.safeAddCoins(1, 'easter-egg-soldier-name');
          if (success) {
            console.log('✅ Firebase sync successful for Easter Egg coin');
          } else {
            console.log('⚠️ Firebase sync failed, but local update successful');
            // Force manual sync
            const playerName = localStorage.getItem('soldierName');
            if (playerName) {
              PlayerDataManager.savePlayerData(playerName, newTotal, {
                gamesPlayed: parseInt(localStorage.getItem('gamesPlayed') || '0'),
                totalWins: parseInt(localStorage.getItem('totalWins') || '0'),
                cluesFound: parseInt(localStorage.getItem('cluesFound') || '0'),
                lastSync: new Date().toISOString(),
                autoSync: true,
                gameType: 'easter-egg-soldier-name',
                coinChange: 1
              }).then(() => {
                console.log('✅ Manual Firebase sync completed');
              }).catch(error => {
                console.error('❌ Manual Firebase sync failed:', error);
              });
            }
          }
        } catch (error) {
          console.error('❌ Error in PlayerDataManager.safeAddCoins:', error);
          // Force manual sync as fallback
          const playerName = localStorage.getItem('soldierName');
          if (playerName && typeof PlayerDataManager.savePlayerData === 'function') {
            PlayerDataManager.savePlayerData(playerName, newTotal, {
              gamesPlayed: parseInt(localStorage.getItem('gamesPlayed') || '0'),
              totalWins: parseInt(localStorage.getItem('totalWins') || '0'),
              cluesFound: parseInt(localStorage.getItem('cluesFound') || '0'),
              lastSync: new Date().toISOString(),
              autoSync: true,
              gameType: 'easter-egg-soldier-name',
              coinChange: 1
            }).catch(error => {
              console.error('❌ Fallback Firebase sync failed:', error);
            });
          }
        }
      } else {
        console.log('⚠️ PlayerDataManager not available, local update only');
      }
      
      // Increment easter eggs found counter
      const currentEasterEggs = parseInt(localStorage.getItem('easterEggsFound') || '0');
      localStorage.setItem('easterEggsFound', (currentEasterEggs + 1).toString());
      console.log('🥚 Easter Egg found! Total:', currentEasterEggs + 1);
      
      // Track Easter Egg in Firebase
      const playerName = localStorage.getItem('soldierName');
      if (playerName && window.PlayerDataManager && typeof PlayerDataManager.trackEasterEgg === 'function') {
        try {
          PlayerDataManager.trackEasterEgg(playerName, 'soldier-name', 1);
          console.log('🥚 Easter Egg tracked in Firebase: soldier-name');
        } catch (error) {
          console.error('❌ Error tracking Easter Egg:', error);
        }
      }
      
      // Update statistics display
      loadStats();
      
      // Update display
      loadTotalCoins();
      
      // Create +1 coin effect
      createPlusOneEffect();
      
      console.log('🎉 Easter Egg coin addition completed!');
    }
    
    function addTwentyCoins() {
      console.log('🪙 Adding 20 coins from VEINTE Easter Egg...');
      
      // Mark as used (verification already done before calling this function)
      localStorage.setItem('veinteEasterEggUsed', 'true');
      console.log('✅ VEINTE Easter Egg marked as used');
      
      // Get current coins
      let totalCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
      const newTotal = totalCoins + 20;
      
      // Update localStorage first
      localStorage.setItem('totalOrtizCoins', newTotal.toString());
      console.log(`✅ Local coins updated: ${totalCoins} -> ${newTotal}`);
      
      // Try to sync with Firebase using PlayerDataManager
      if (window.PlayerDataManager && typeof PlayerDataManager.safeAddCoins === 'function') {
        try {
          const success = PlayerDataManager.safeAddCoins(20, 'easter-egg-gods-power');
          if (success) {
            console.log('✅ Firebase sync successful for Gods Power Easter Egg coins');
          } else {
            console.log('⚠️ Firebase sync failed, but local update successful');
            // Force manual sync
            const playerName = localStorage.getItem('soldierName');
            if (playerName) {
              PlayerDataManager.savePlayerData(playerName, newTotal, {
                gamesPlayed: parseInt(localStorage.getItem('gamesPlayed') || '0'),
                totalWins: parseInt(localStorage.getItem('totalWins') || '0'),
                cluesFound: parseInt(localStorage.getItem('cluesFound') || '0'),
                lastSync: new Date().toISOString(),
                autoSync: true,
                gameType: 'easter-egg-gods-power',
                coinChange: 20
              }).then(() => {
                console.log('✅ Manual Firebase sync completed for Gods Power');
              }).catch(error => {
                console.error('❌ Manual Firebase sync failed for Gods Power:', error);
              });
            }
          }
        } catch (error) {
          console.error('❌ Error in PlayerDataManager.safeAddCoins for Gods Power:', error);
          // Force manual sync as fallback
          const playerName = localStorage.getItem('soldierName');
          if (playerName && typeof PlayerDataManager.savePlayerData === 'function') {
            PlayerDataManager.savePlayerData(playerName, newTotal, {
              gamesPlayed: parseInt(localStorage.getItem('gamesPlayed') || '0'),
              totalWins: parseInt(localStorage.getItem('totalWins') || '0'),
              cluesFound: parseInt(localStorage.getItem('cluesFound') || '0'),
              lastSync: new Date().toISOString(),
              autoSync: true,
              gameType: 'easter-egg-gods-power',
              coinChange: 20
            }).catch(error => {
              console.error('❌ Fallback Firebase sync failed for Gods Power:', error);
            });
          }
        }
      } else {
        console.log('⚠️ PlayerDataManager not available, local update only');
      }
      
      // Increment easter eggs found counter
      const currentEasterEggs = parseInt(localStorage.getItem('easterEggsFound') || '0');
      localStorage.setItem('easterEggsFound', (currentEasterEggs + 1).toString());
      console.log('🥚 Easter Egg found! Total:', currentEasterEggs + 1);
      
      // Track Easter Egg in Firebase
      const playerName = localStorage.getItem('soldierName');
      if (playerName && window.PlayerDataManager && typeof PlayerDataManager.trackEasterEgg === 'function') {
        try {
          PlayerDataManager.trackEasterEgg(playerName, 'gods-power', 20);
          console.log('🥚 Easter Egg tracked in Firebase: gods-power');
        } catch (error) {
          console.error('❌ Error tracking Gods Power Easter Egg:', error);
        }
      }
      
      // Update statistics display
      loadStats();
      
      // Update display
      loadTotalCoins();
      
      // Create +20 coins effect
      createPlusTwentyEffect();
      
      console.log('🎉 VEINTE Easter Egg coin addition completed!');
    }
    
    function addDAGOCoinsSimple(currentCoins) {
      console.log('💰 Adding DAGO admin code coins (simple method)...');
      
      const coinsToAdd = 10000;
      const newCoins = currentCoins + coinsToAdd;
      
      // Update localStorage immediately (like VEINTE)
      localStorage.setItem('totalOrtizCoins', newCoins.toString());
      console.log(`✅ localStorage updated: ${currentCoins} -> ${newCoins}`);
      
      // Update display immediately
      if (typeof loadTotalCoins === 'function') {
        loadTotalCoins();
      }
      
      // Create simple coin effect (like VEINTE)
      createPlusDAGOEffect();
      
              // Sync with Firebase manually to avoid conflicts
        const playerName = localStorage.getItem('soldierName');
        if (playerName && window.firebase && window.firebase.database) {
            try {
                const db = window.firebase.database();
                const playerRef = db.ref(`players/${playerName}`);
                
                const updateData = {
                    coins: newCoins,
                    totalCoins: newCoins,
                    totalOrtizCoins: newCoins,
                    lastActivity: Date.now(),
                    lastSync: Date.now()
                };
                
                playerRef.update(updateData).then(() => {
                    console.log('✅ Firebase sync successful for DAGO admin code coins');
                }).catch(error => {
                    console.error('❌ Error syncing DAGO coins to Firebase:', error);
                });
            } catch (error) {
                console.error('❌ Error in Firebase sync for DAGO:', error);
            }
        }
      
      console.log(`✅ DAGO admin code coins added: ${currentCoins} -> ${newCoins}`);
    }
    
    function createPlusDAGOEffect() {
      console.log('🎬 Creating simple DAGO coin effect...');
      
      // Create the +10,000 effect element (like VEINTE)
      const plusDAGOEffect = document.createElement('div');
      plusDAGOEffect.className = 'plus-dago-effect';
      plusDAGOEffect.innerHTML = `
        <div class="plus-dago-content">
          <span class="plus-dago-icon">🪙</span>
          <span class="plus-dago-text">+10,000</span>
        </div>
      `;
      
      // Position it in the center of the screen
      plusDAGOEffect.style.cssText = `
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        z-index: 10000;
        pointer-events: none;
        font-family: 'Orbitron', Arial, sans-serif;
        font-size: 2rem;
        font-weight: bold;
        color: #FFD700;
        text-shadow: 0 0 20px #FFD700;
      `;
      
      document.body.appendChild(plusDAGOEffect);
      
      // Animate the effect (like VEINTE)
      plusDAGOEffect.animate([
        { 
          opacity: 0, 
          transform: 'translate(-50%, -50%) scale(0.5)',
          filter: 'brightness(1)'
        },
        { 
          opacity: 1, 
          transform: 'translate(-50%, -50%) scale(1.5)',
          filter: 'brightness(2)'
        },
        { 
          opacity: 0, 
          transform: 'translate(-50%, -200px) scale(1)',
          filter: 'brightness(1)'
        }
      ], {
        duration: 2000,
        easing: 'ease-out'
      });
      
      // Remove the effect after animation
      setTimeout(() => {
        if (plusDAGOEffect.parentNode) {
          plusDAGOEffect.parentNode.removeChild(plusDAGOEffect);
        }
      }, 2000);
    }
    
    function createDAGOCoinAnimation() {
      console.log('🎬 Creating DAGO coin animation...');
      
      // Create main animation container
      const animationContainer = document.createElement('div');
      animationContainer.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        pointer-events: none;
        z-index: 9999;
        overflow: hidden;
      `;
      
      document.body.appendChild(animationContainer);
      
      // Create multiple coin streams
      for (let stream = 0; stream < 5; stream++) {
        setTimeout(() => {
          for (let i = 0; i < 20; i++) {
            setTimeout(() => {
              const coin = document.createElement('div');
              coin.textContent = '🪙';
              coin.style.cssText = `
                position: absolute;
                font-size: 2rem;
                color: #FFD700;
                text-shadow: 0 0 20px #FFD700;
                pointer-events: none;
                z-index: 10000;
                animation: coinFall 3s ease-in forwards;
              `;
              
              // Random starting position at top
              coin.style.left = Math.random() * window.innerWidth + 'px';
              coin.style.top = '-50px';
              
              // Random target position (center area)
              const targetX = (window.innerWidth / 2) + (Math.random() - 0.5) * 400;
              const targetY = (window.innerHeight / 2) + (Math.random() - 0.5) * 200;
              
              animationContainer.appendChild(coin);
              
              // Animate coin falling
              coin.animate([
                { 
                  transform: 'translate(0, 0) rotate(0deg) scale(1)',
                  opacity: 1
                },
                { 
                  transform: `translate(${targetX - parseFloat(coin.style.left)}px, ${targetY + 50}px) rotate(360deg) scale(1.5)`,
                  opacity: 1
                },
                { 
                  transform: `translate(${targetX - parseFloat(coin.style.left)}px, ${targetY + 100}px) rotate(720deg) scale(0.8)`,
                  opacity: 0
                }
              ], {
                duration: 3000,
                easing: 'ease-in'
              });
              
              // Remove coin after animation
              setTimeout(() => {
                if (coin.parentNode) {
                  coin.parentNode.removeChild(coin);
                }
              }, 3000);
              
            }, i * 100); // Stagger coins in each stream
          }
        }, stream * 500); // Stagger streams
      }
      
      // Add CSS animation
      const style = document.createElement('style');
      style.textContent = `
        @keyframes coinFall {
          0% { 
            transform: translate(0, 0) rotate(0deg) scale(1);
            opacity: 1;
          }
          50% { 
            transform: translate(var(--target-x), var(--target-y)) rotate(360deg) scale(1.5);
            opacity: 1;
          }
          100% { 
            transform: translate(var(--target-x), calc(var(--target-y) + 100px)) rotate(720deg) scale(0.8);
            opacity: 0;
          }
        }
      `;
      document.head.appendChild(style);
      
      // Remove animation container after all animations complete
      setTimeout(() => {
        if (animationContainer.parentNode) {
          animationContainer.parentNode.removeChild(animationContainer);
        }
        if (style.parentNode) {
          style.parentNode.removeChild(style);
        }
      }, 8000);
    }
    
    function showDAGOCoinsNotification(newCoins) {
      console.log('💰 Showing DAGO admin code coins notification');
      
      // Create notification
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, #00ff00 0%, #00cc00 100%);
        border: 3px solid #00ff00;
        border-radius: 15px;
        padding: 25px 35px;
        color: white;
        font-family: 'Orbitron', Arial, sans-serif;
        font-size: 1.2rem;
        font-weight: bold;
        text-align: center;
        z-index: 10000;
        box-shadow: 0 0 40px #00ff00;
        animation: dagoCoinsPulse 2s ease-in-out infinite;
        max-width: 500px;
        line-height: 1.4;
      `;
      
      notification.innerHTML = `
        <div style="font-size: 2.5rem; margin-bottom: 15px;">🔐💰</div>
        <div style="margin-bottom: 15px; font-size: 1.4rem;">¡CÓDIGO ADMIN DAGO!</div>
        <div style="margin-bottom: 10px; font-size: 1.1rem;">Monedas añadidas: <span style="color: #ffff00;">+10,000</span></div>
        <div style="font-size: 1rem; opacity: 0.9;">Nuevo total: <span style="color: #ffff00;">${newCoins.toLocaleString()}</span></div>
        <div style="font-size: 0.9rem; margin-top: 15px; opacity: 0.8;">¡Bienvenido al panel de administración!</div>
      `;
      
      // Add CSS animation
      const style = document.createElement('style');
      style.textContent = `
        @keyframes dagoCoinsPulse {
          0% { transform: translate(-50%, -50%) scale(1); box-shadow: 0 0 40px #00ff00; }
          50% { transform: translate(-50%, -50%) scale(1.05); box-shadow: 0 0 60px #00ff00; }
          100% { transform: translate(-50%, -50%) scale(1); box-shadow: 0 0 40px #00ff00; }
        }
      `;
      document.head.appendChild(style);
      
      document.body.appendChild(notification);
      
      // Remove after 5 seconds
      setTimeout(() => {
        if (notification.parentNode) {
          notification.parentNode.removeChild(notification);
        }
        if (style.parentNode) {
          style.parentNode.removeChild(style);
        }
      }, 5000);
    }

    function showEasterEggAlreadyUsedMessage() {
      console.log('⚠️ Showing VEINTE Easter Egg already used message');
      
      // Debug: Show current status
      const veinteEasterEggUsed = localStorage.getItem('veinteEasterEggUsed');
      console.log('🔍 Debug - veinteEasterEggUsed:', veinteEasterEggUsed);
      console.log('🔍 Debug - Current player:', localStorage.getItem('soldierName'));
      
      // Create notification
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
        border: 3px solid #ff0000;
        border-radius: 15px;
        padding: 20px 30px;
        color: white;
        font-family: 'Orbitron', Arial, sans-serif;
        font-size: 1.1rem;
        font-weight: bold;
        text-align: center;
        z-index: 10000;
        box-shadow: 0 0 30px #ff0000;
        animation: easterEggUsedPulse 2s ease-in-out infinite;
        max-width: 400px;
        line-height: 1.4;
      `;
      
      notification.innerHTML = `
        <div style="font-size: 2rem; margin-bottom: 10px;">⚠️</div>
        <div style="margin-bottom: 15px;">¡YA USASTE ESTE HUEVO!</div>
        <div style="font-size: 0.9rem; opacity: 0.9;">El easter egg VEINTE solo se puede usar una vez por jugador.</div>
      `;
      
      // Add CSS animation
      const style = document.createElement('style');
      style.textContent = `
        @keyframes easterEggUsedPulse {
          0% { transform: translate(-50%, -50%) scale(1); }
          50% { transform: translate(-50%, -50%) scale(1.05); }
          100% { transform: translate(-50%, -50%) scale(1); }
        }
      `;
      document.head.appendChild(style);
      
      document.body.appendChild(notification);
      
      // Remove after 4 seconds
      setTimeout(() => {
        if (notification.parentNode) {
          notification.parentNode.removeChild(notification);
        }
        if (style.parentNode) {
          style.parentNode.removeChild(style);
        }
      }, 4000);
    }
    
    function createPlusOneEffect() {
      // Create the +1 effect element
      const plusOneEffect = document.createElement('div');
      plusOneEffect.className = 'plus-one-effect';
      plusOneEffect.innerHTML = `
        <div class="plus-one-content">
          <span class="plus-one-icon">🪙</span>
          <span class="plus-one-text">+1</span>
        </div>
      `;
      
      // Position it near the soldier name
      const soldierNameDisplay = document.getElementById('soldierNameDisplay');
      if (soldierNameDisplay) {
        const rect = soldierNameDisplay.getBoundingClientRect();
        plusOneEffect.style.position = 'fixed';
        plusOneEffect.style.left = (rect.left + rect.width / 2) + 'px';
        plusOneEffect.style.top = (rect.top - 20) + 'px';
        plusOneEffect.style.transform = 'translate(-50%, -50%)';
        plusOneEffect.style.zIndex = '10000';
        plusOneEffect.style.pointerEvents = 'none';
      }
      
      document.body.appendChild(plusOneEffect);
      
      // Animate the effect
      plusOneEffect.animate([
        { 
          opacity: 0, 
          transform: 'translate(-50%, -50%) scale(0.5)',
          filter: 'brightness(1)'
        },
        { 
          opacity: 1, 
          transform: 'translate(-50%, -50%) scale(1.2)',
          filter: 'brightness(1.5)'
        },
        { 
          opacity: 0, 
          transform: 'translate(-50%, -100px) scale(0.8)',
          filter: 'brightness(1)'
        }
      ], {
        duration: 1500,
        easing: 'ease-out'
      });
      
      // Remove the effect after animation
      setTimeout(() => {
        if (plusOneEffect.parentNode) {
          plusOneEffect.parentNode.removeChild(plusOneEffect);
        }
        }, 1500);
      }
    
    function createPlusTwentyEffect() {
      // Create the +20 effect element
      const plusTwentyEffect = document.createElement('div');
      plusTwentyEffect.className = 'plus-twenty-effect';
      plusTwentyEffect.innerHTML = `
        <div class="plus-twenty-content">
          <span class="plus-twenty-icon">🪙</span>
          <span class="plus-twenty-text">+20</span>
        </div>
      `;
      
      // Position it in the center of the screen
      plusTwentyEffect.style.position = 'fixed';
      plusTwentyEffect.style.left = '50%';
      plusTwentyEffect.style.top = '50%';
      plusTwentyEffect.style.transform = 'translate(-50%, -50%)';
      plusTwentyEffect.style.zIndex = '10000';
      plusTwentyEffect.style.pointerEvents = 'none';
      
      document.body.appendChild(plusTwentyEffect);
      
      // Create multiple coin particles
      for (let i = 0; i < 8; i++) {
        setTimeout(() => {
          const coinParticle = document.createElement('div');
          coinParticle.className = 'coin-particle';
          coinParticle.textContent = '🪙';
          coinParticle.style.position = 'fixed';
          coinParticle.style.left = '50%';
          coinParticle.style.top = '50%';
          coinParticle.style.transform = 'translate(-50%, -50%)';
          coinParticle.style.zIndex = '9999';
          coinParticle.style.pointerEvents = 'none';
          coinParticle.style.fontSize = '1.5rem';
          coinParticle.style.color = '#FFD700';
          coinParticle.style.textShadow = '0 0 10px #FFD700';
          
          document.body.appendChild(coinParticle);
          
          // Animate coin particle
          const angle = (i / 8) * Math.PI * 2;
          const distance = 150;
          const targetX = Math.cos(angle) * distance;
          const targetY = Math.sin(angle) * distance;
          
          coinParticle.animate([
            { 
              opacity: 1, 
              transform: 'translate(-50%, -50%) scale(1)',
              filter: 'brightness(1)'
            },
            { 
              opacity: 0.8, 
              transform: `translate(calc(-50% + ${targetX}px), calc(-50% + ${targetY}px)) scale(0.8)`,
              filter: 'brightness(1.5)'
            },
            { 
              opacity: 0, 
              transform: `translate(calc(-50% + ${targetX * 1.5}px), calc(-50% + ${targetY * 1.5}px)) scale(0.5)`,
              filter: 'brightness(1)'
            }
          ], {
            duration: 2000,
            easing: 'ease-out'
          });
          
          // Remove coin particle after animation
          setTimeout(() => {
            if (coinParticle.parentNode) {
              coinParticle.parentNode.removeChild(coinParticle);
            }
          }, 2000);
        }, i * 100);
      }
      
      // Animate the main +20 effect
      plusTwentyEffect.animate([
        { 
          opacity: 0, 
          transform: 'translate(-50%, -50%) scale(0.5)',
          filter: 'brightness(1)'
        },
        { 
          opacity: 1, 
          transform: 'translate(-50%, -50%) scale(1.5)',
          filter: 'brightness(2)'
        },
        { 
          opacity: 0, 
          transform: 'translate(-50%, -50%) scale(1)',
          filter: 'brightness(1)'
        }
      ], {
        duration: 2500,
        easing: 'ease-out'
      });
      
      // Remove the effect after animation
      setTimeout(() => {
        if (plusTwentyEffect.parentNode) {
          plusTwentyEffect.parentNode.removeChild(plusTwentyEffect);
        }
      }, 2500);
    }
    
    function createLightningEffects() {
      const lightningEffects = document.getElementById('lightningEffects');
      
      for (let i = 0; i < 8; i++) {
        setTimeout(() => {
          const lightning = document.createElement('div');
          lightning.className = 'lightning-bolt';
          lightning.textContent = '⚡';
          lightning.style.left = Math.random() * 100 + '%';
          lightning.style.top = Math.random() * 100 + '%';
          
          lightningEffects.appendChild(lightning);
          
          // Remove lightning after animation
          setTimeout(() => {
            if (lightning.parentNode) {
              lightning.parentNode.removeChild(lightning);
            }
          }, 1500);
        }, i * 200);
      }
    }
    
    function createFusionEffects() {
      const fusionEffects = document.getElementById('fusionEffects');
      
      for (let i = 0; i < 20; i++) {
        setTimeout(() => {
          const fusion = document.createElement('div');
          fusion.className = 'fusion-particle';
          fusion.textContent = '🔗';
          fusion.style.left = Math.random() * 100 + '%';
          fusion.style.animationDelay = Math.random() * 2 + 's';
          
          fusionEffects.appendChild(fusion);
          
          // Remove fusion particle after animation
          setTimeout(() => {
            if (fusion.parentNode) {
              fusion.parentNode.removeChild(fusion);
            }
          }, 3000);
        }, i * 100);
      }
    }
    
    // Close gods power modal
    closeGodsPowerBtn.addEventListener('click', () => {
      closeGodsPowerModal();
    });
    
    // Close modal when clicking anywhere on the modal
    godsPowerModal.addEventListener('click', (e) => {
      // Only close if clicking on the modal background, not on content
      if (e.target === godsPowerModal) {
        closeGodsPowerModal();
      }
    });
    
    function closeGodsPowerModal() {
      godsPowerModal.classList.remove('active');
      document.body.style.overflow = 'auto';
      
      // Clear lightning effects
      document.getElementById('lightningEffects').innerHTML = '';
      
      // Redirect to home after a short delay
      setTimeout(() => {
        window.location.href = 'index.html';
      }, 300);
    }
    
    // Add ESC key functionality to close gods power modal
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && godsPowerModal.classList.contains('active')) {
        closeGodsPowerModal();
      }
    });
    
    // Admin panel event listeners
    const adminPanelBtn = document.getElementById('adminPanelBtn');
    const forceSyncBtn = document.getElementById('forceSyncBtn');
    
    console.log('🔍 Admin panel button element:', adminPanelBtn);
    console.log('🔍 Admin panel element:', adminPanel);
    console.log('🔍 Force sync button element:', forceSyncBtn);
    console.log('🔍 Close admin button element:', closeAdminBtn);
    
    if (adminPanelBtn) {
      adminPanelBtn.addEventListener('click', () => {
        console.log('🔐 Admin panel button clicked!');
        if (adminPanel) {
          adminPanel.style.display = 'flex';
          document.body.style.overflow = 'hidden';
          loadAdminData();
          console.log('✅ Admin panel opened');
        } else {
          console.error('❌ Admin panel element not found!');
        }
      });
    } else {
      console.error('❌ Admin panel button not found!');
    }
    
    // Force sync button event listener is now added when admin panel opens
    
    if (closeAdminBtn) {
      closeAdminBtn.addEventListener('click', () => {
        console.log('❌ Close admin button clicked!');
        if (adminPanel) {
          adminPanel.style.display = 'none';
          document.body.style.overflow = 'auto';
          console.log('✅ Admin panel closed');
        } else {
          console.error('❌ Admin panel element not found for closing!');
        }
      });
    } else {
      console.error('❌ Close admin button not found!');
    }
    
    // Close admin panel when clicking outside
    if (adminPanel) {
      adminPanel.addEventListener('click', (e) => {
        if (e.target === adminPanel) {
          console.log('🖱️ Clicked outside admin panel, closing...');
          adminPanel.style.display = 'none';
          document.body.style.overflow = 'auto';
        }
      });
    }
    
    // Close fusion power modal
    closeFusionPowerBtn.addEventListener('click', () => {
      closeFusionPowerModal();
    });
    
    // Close modal when clicking anywhere on the modal
    fusionPowerModal.addEventListener('click', (e) => {
      // Only close if clicking on the modal background, not on content
      if (e.target === fusionPowerModal) {
        closeFusionPowerModal();
      }
    });
    
    function closeFusionPowerModal() {
      fusionPowerModal.classList.remove('active');
      document.body.style.overflow = 'auto';
      
      // Clear fusion effects
      document.getElementById('fusionEffects').innerHTML = '';
      
      // Redirect to home after a short delay
      setTimeout(() => {
        window.location.href = 'index.html';
      }, 300);
    }
    
    // Add ESC key functionality to close fusion power modal
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && fusionPowerModal.classList.contains('active')) {
        closeFusionPowerModal();
      }
    });
    
    // Easter Egg - Long press on LAST code input reveals last digit
    let codeInputPressTimer = null;
    let codeInputPressStart = 0;
    
    // Only add event listeners to the LAST input (4th digit)
    const lastCodeInput = document.querySelector('.code-input[data-index="3"]');
    
    if (lastCodeInput) {
      lastCodeInput.addEventListener('mousedown', startCodeInputPress);
      lastCodeInput.addEventListener('touchstart', startCodeInputPress);
      lastCodeInput.addEventListener('mouseup', endCodeInputPress);
      lastCodeInput.addEventListener('touchend', endCodeInputPress);
      lastCodeInput.addEventListener('mouseleave', endCodeInputPress);
    }
    
    function startCodeInputPress(e) {
      // Only activate if it's the last input
      if (e.target.getAttribute('data-index') === '3') {
        codeInputPressStart = Date.now();
        codeInputPressTimer = setTimeout(() => {
          revealLastDigit();
        }, 2000); // 2 seconds
      }
    }
    
    function endCodeInputPress(e) {
      if (codeInputPressTimer) {
        clearTimeout(codeInputPressTimer);
        codeInputPressTimer = null;
      }
    }
    
    function revealLastDigit() {
      console.log('🎯 Last digit revealed: 1');
      
      // Find the last input (4th digit)
      const lastInput = document.querySelector('.code-input[data-index="3"]');
      if (lastInput) {
        // Show the digit with a special effect
        lastInput.value = '1';
        lastInput.style.background = 'linear-gradient(45deg, #00ff00, #00cc00)';
        lastInput.style.color = '#000';
        lastInput.style.fontWeight = 'bold';
        lastInput.style.boxShadow = '0 0 20px #00ff00, inset 0 0 10px #00ff00';
        lastInput.style.border = '3px solid #00ff00';
        lastInput.style.transform = 'scale(1.1)';
        
        // Add a glow animation
        lastInput.style.animation = 'digitRevealGlow 2s infinite';
        
        // Create a visual effect
        createDigitRevealEffect(lastInput);
        
        // Show a message
        showDigitRevealMessage();
      }
    }
    
    function createDigitRevealEffect(input) {
      // Create particles around the input
      for (let i = 0; i < 8; i++) {
        setTimeout(() => {
          const particle = document.createElement('div');
          particle.textContent = '1';
          particle.style.position = 'absolute';
          particle.style.color = '#00ff00';
          particle.style.fontWeight = 'bold';
          particle.style.fontSize = '1.2rem';
          particle.style.pointerEvents = 'none';
          particle.style.zIndex = '1000';
          particle.style.textShadow = '0 0 10px #00ff00';
          
          const rect = input.getBoundingClientRect();
          particle.style.left = (rect.left + rect.width / 2) + 'px';
          particle.style.top = (rect.top + rect.height / 2) + 'px';
          
          document.body.appendChild(particle);
          
          // Animate particle
          const angle = (i / 8) * Math.PI * 2;
          const distance = 50;
          const targetX = Math.cos(angle) * distance;
          const targetY = Math.sin(angle) * distance;
          
          particle.animate([
            { 
              opacity: 1, 
              transform: 'translate(-50%, -50%) scale(1)',
            },
            { 
              opacity: 0.8, 
              transform: `translate(calc(-50% + ${targetX}px), calc(-50% + ${targetY}px)) scale(1.5)`,
            },
            { 
              opacity: 0, 
              transform: `translate(calc(-50% + ${targetX * 2}px), calc(-50% + ${targetY * 2}px)) scale(0.5)`,
            }
          ], {
            duration: 1500,
            easing: 'ease-out'
          });
          
          // Remove particle after animation
          setTimeout(() => {
            if (particle.parentNode) {
              particle.parentNode.removeChild(particle);
            }
          }, 1500);
        }, i * 100);
      }
    }
    
    function showDigitRevealMessage() {
      const message = document.createElement('div');
      message.textContent = '🎯 ÚLTIMO DÍGITO REVELADO: 1';
      message.style.position = 'fixed';
      message.style.top = '20%';
      message.style.left = '50%';
      message.style.transform = 'translate(-50%, -50%)';
      message.style.background = 'linear-gradient(45deg, #00ff00, #00cc00)';
      message.style.color = '#000';
      message.style.padding = '15px 25px';
      message.style.borderRadius = '10px';
      message.style.fontWeight = 'bold';
      message.style.fontSize = '1.2rem';
      message.style.zIndex = '10000';
      message.style.boxShadow = '0 0 30px #00ff00';
      message.style.animation = 'messageGlow 2s infinite';
      
      document.body.appendChild(message);
      
      // Remove message after 3 seconds
      setTimeout(() => {
        if (message.parentNode) {
          message.parentNode.removeChild(message);
        }
      }, 3000);
    }
    

    
    // Easter Egg 3 - Squid Power Detection
    let clickedLetters = new Set();
    let lastLetterClick = 0;
    const squidPowerModal = document.getElementById('squidPowerModal');
    const closeSquidPowerBtn = document.getElementById('closeSquidPower');
    const totalLetters = 20; // Total letters in "BIENVENIDO AL SISTEMA" (excluding spaces)
    
    // Easter Egg 6 - VEINTE Sequence Detection
    let veinteSequence = [];
    const veinteTarget = ['V', 'E', 'I', 'N', 'T', 'E'];
    
    // Detect clicks on individual letters
    document.addEventListener('click', (e) => {
      const target = e.target;
      
      // Check if clicked on a clickable letter
      if (target.classList.contains('clickable-letter')) {
        const letter = target.getAttribute('data-letter');
        const now = Date.now();
        
        // Reset if more than 5 seconds between clicks
        if (now - lastLetterClick > 5000) {
          clickedLetters.clear();
          veinteSequence = []; // Reset VEINTE sequence
          // Remove clicked class from all letters
          document.querySelectorAll('.clickable-letter').forEach(letter => {
            letter.classList.remove('clicked');
          });
        }
        
        lastLetterClick = now;
        
        // Add letter to clicked set
        if (letter !== ' ') { // Don't count spaces
          clickedLetters.add(letter);
          target.classList.add('clicked');
          
          console.log('Letter clicked:', letter);
          console.log('Total unique letters clicked:', clickedLetters.size);
          
          // Add visual feedback
          target.style.transform = 'scale(1.3)';
          target.style.textShadow = '0 0 30px #00FFFF, 0 0 60px #00FFFF, 0 0 90px #00FFFF';
          
          setTimeout(() => {
            target.style.transform = '';
            target.style.textShadow = '';
          }, 500);
          
          // Special Easter Egg: VEINTE sequence gives +20 coins
          veinteSequence.push(letter);
          
          // Check if we have enough letters to check the sequence
          if (veinteSequence.length >= 6) {
            // Keep only the last 6 letters
            veinteSequence = veinteSequence.slice(-6);
            
            // Check if the sequence matches VEINTE
            if (veinteSequence.join('') === 'VEINTE') {
              console.log('VEINTE sequence completed! Checking if easter egg is available...');
              
              // Check if this easter egg has already been used
              const veinteEasterEggUsed = localStorage.getItem('veinteEasterEggUsed');
              if (veinteEasterEggUsed === 'true') {
                console.log('⚠️ VEINTE Easter Egg already used by this player');
                showEasterEggAlreadyUsedMessage();
                veinteSequence = []; // Reset sequence
                return;
              }
              
              console.log('✅ VEINTE Easter Egg available! Activating...');
              addTwentyCoins();
              veinteSequence = []; // Reset sequence
            }
          }
        }
        
        // Check if all letters have been clicked
        if (clickedLetters.size >= totalLetters) {
          console.log('All letters clicked! Squid power activated!');
          activateSquidPower();
          // Reset for next time
          clickedLetters.clear();
          document.querySelectorAll('.clickable-letter').forEach(letter => {
            letter.classList.remove('clicked');
          });
        }
      }
    });
    
    function activateSquidPower() {
      // Increment easter eggs found counter
      const currentEasterEggs = parseInt(localStorage.getItem('easterEggsFound') || '0');
      localStorage.setItem('easterEggsFound', (currentEasterEggs + 1).toString());
      console.log('🥚 Easter Egg found! Total:', currentEasterEggs + 1);
      
      // Update statistics display
      loadStats();
      
      // Show squid power modal
      squidPowerModal.classList.add('active');
      document.body.style.overflow = 'hidden';
      
      // Create squid bubble effects
      createSquidBubbles();
    }
    
    function createSquidBubbles() {
      const squidEffects = document.getElementById('squidEffects');
      
      for (let i = 0; i < 15; i++) {
        setTimeout(() => {
          const bubble = document.createElement('div');
          bubble.className = 'squid-bubble';
          bubble.textContent = '🫧';
          bubble.style.left = Math.random() * 100 + '%';
          bubble.style.animationDelay = Math.random() * 2 + 's';
          
          squidEffects.appendChild(bubble);
          
          // Remove bubble after animation
          setTimeout(() => {
            if (bubble.parentNode) {
              bubble.parentNode.removeChild(bubble);
            }
          }, 3000);
        }, i * 150);
      }
    }
    
    // Close squid power modal
    closeSquidPowerBtn.addEventListener('click', () => {
      closeSquidPowerModal();
    });
    
    // Close modal when clicking anywhere on the modal
    squidPowerModal.addEventListener('click', (e) => {
      // Only close if clicking on the modal background, not on content
      if (e.target === squidPowerModal) {
        closeSquidPowerModal();
      }
    });
    
    function closeSquidPowerModal() {
      squidPowerModal.classList.remove('active');
      document.body.style.overflow = 'auto';
      
      // Clear squid effects
      document.getElementById('squidEffects').innerHTML = '';
      
      // Redirect to home after a short delay
      setTimeout(() => {
        window.location.href = 'index.html';
      }, 300);
    }
    
    // Add ESC key functionality to close squid power modal
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && squidPowerModal.classList.contains('active')) {
        closeSquidPowerModal();
      }
    });
    
    // Easter Egg 4 - Lock Power Detection
    let lockClicks = 0;
    let lastLockClick = 0;
    const lockPowerModal = document.getElementById('lockPowerModal');
    const closeLockPowerBtn = document.getElementById('closeLockPower');
    const lockIcon = document.getElementById('lockIcon');
    
    // Detect clicks on lock icon
    lockIcon.addEventListener('click', () => {
      console.log('🔒 Lock icon clicked!');
      
      // Check the code first
      checkCode();
      
      const now = Date.now();
      
      // Reset counter if more than 5 seconds between clicks
      if (now - lastLockClick > 5000) {
        lockClicks = 0;
      }
      
      lockClicks++;
      lastLockClick = now;
      
      console.log('Lock clicks:', lockClicks);
      
      // Add visual feedback for each click
      lockIcon.style.transform = 'scale(1.3)';
      lockIcon.style.textShadow = '0 0 30px #00FFFF, 0 0 60px #00FFFF';
      lockIcon.style.color = '#00FFFF';
      
      setTimeout(() => {
        lockIcon.style.transform = '';
        lockIcon.style.textShadow = '';
        lockIcon.style.color = '';
      }, 300);
      
      // Check if 7 clicks reached
      if (lockClicks >= 7) {
        console.log('Lock power activated!');
        activateLockPower();
        lockClicks = 0; // Reset counter
      }
    });
    
    function activateLockPower() {
      // Increment easter eggs found counter
      const currentEasterEggs = parseInt(localStorage.getItem('easterEggsFound') || '0');
      localStorage.setItem('easterEggsFound', (currentEasterEggs + 1).toString());
      console.log('🥚 Easter Egg found! Total:', currentEasterEggs + 1);
      
      // Update statistics display
      loadStats();
      
      // Show lock power modal
      lockPowerModal.classList.add('active');
      document.body.style.overflow = 'hidden';
      
      // Create lock particle effects
      createLockParticles();
    }
    
    function createLockParticles() {
      const lockEffects = document.getElementById('lockEffects');
      
      for (let i = 0; i < 15; i++) {
        setTimeout(() => {
          const particle = document.createElement('div');
          particle.className = 'lock-particle';
          particle.textContent = '🫧';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.top = Math.random() * 100 + '%';
          
          lockEffects.appendChild(particle);
          
          // Remove particle after animation
          setTimeout(() => {
            if (particle.parentNode) {
              particle.parentNode.removeChild(particle);
            }
          }, 3000);
        }, i * 150);
      }
    }
    
    // Close lock power modal
    closeLockPowerBtn.addEventListener('click', () => {
      closeLockPowerModal();
    });
    
    // Close modal when clicking anywhere on the modal
    lockPowerModal.addEventListener('click', (e) => {
      // Only close if clicking on the modal background, not on content
      if (e.target === lockPowerModal) {
        closeLockPowerModal();
      }
    });
    
    function closeLockPowerModal() {
      lockPowerModal.classList.remove('active');
      document.body.style.overflow = 'auto';
      
      // Clear lock effects
      document.getElementById('lockEffects').innerHTML = '';
      
      // Redirect to home after a short delay
      setTimeout(() => {
        window.location.href = 'index.html';
      }, 300);
    }
    
    // Add ESC key functionality to close lock power modal
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && lockPowerModal.classList.contains('active')) {
        closeLockPowerModal();
      }
    });

    // Firebase Data Sync Functions
    function syncPlayerDataToFirebase() {
      try {
        const playerName = localStorage.getItem('soldierName') || 'Jugador';
        const totalCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
        const gamesPlayed = parseInt(localStorage.getItem('gamesPlayed') || '0');
        const totalWins = parseInt(localStorage.getItem('totalWins') || '0');
        const cluesFound = parseInt(localStorage.getItem('cluesFound') || '0');

        // Save to Firebase
        if (window.PlayerDataManager) {
          PlayerDataManager.savePlayerData(playerName, totalCoins, {
            gamesPlayed: gamesPlayed,
            totalWins: totalWins,
            cluesFound: cluesFound
          });
          console.log('✅ Player data synced to Firebase');
        }
      } catch (error) {
        console.error('❌ Error syncing to Firebase:', error);
      }
    }

    // Migration function for old player data
    async function migrateOldPlayerData() {
      try {
        console.log('🔄 Checking for player data to sync...');
        
        // Wait for Firebase to be ready
        let attempts = 0;
        while (!window.PlayerDataManager && attempts < 10) {
          console.log('⏳ Waiting for Firebase to initialize...', attempts + 1);
          await new Promise(resolve => setTimeout(resolve, 1000));
          attempts++;
        }
        
        if (!window.PlayerDataManager) {
          console.error('❌ Firebase not ready after 10 attempts');
          return;
        }
        
        // Check for current data in localStorage
        const playerName = localStorage.getItem('soldierName');
        const totalCoins = localStorage.getItem('totalOrtizCoins');
        const gamesPlayed = localStorage.getItem('gamesPlayed');
        const totalWins = localStorage.getItem('totalWins');
        const cluesFound = localStorage.getItem('cluesFound');
        
        console.log('📊 Found localStorage data:', {
          name: playerName,
          coins: totalCoins,
          gamesPlayed: gamesPlayed,
          totalWins: totalWins,
          cluesFound: cluesFound
        });
        
        // Check if we have player data
        const hasPlayerData = playerName && (totalCoins || gamesPlayed || totalWins || cluesFound);
        const alreadyMigrated = localStorage.getItem('dataMigratedToFirebase');
        
        console.log('🔍 Sync check:', {
          hasPlayerData: hasPlayerData,
          alreadyMigrated: alreadyMigrated,
          PlayerDataManager: !!window.PlayerDataManager
        });
        
        if (hasPlayerData) {
          // Always sync current data, not just migrate once
          console.log('📦 Syncing current player data to Firebase...');
          
          // Prepare sync data
          const syncData = {
            name: playerName,
            coins: parseInt(totalCoins || '0'),
            gamesPlayed: parseInt(gamesPlayed || '0'),
            totalWins: parseInt(totalWins || '0'),
            cluesFound: parseInt(cluesFound || '0'),
            syncedAt: new Date().toISOString()
          };
          
          // Save to Firebase
          if (window.PlayerDataManager) {
            const result = await PlayerDataManager.savePlayerData(
              syncData.name, 
              syncData.coins, 
              {
                gamesPlayed: syncData.gamesPlayed,
                totalWins: syncData.totalWins,
                cluesFound: syncData.cluesFound
              }
            );
            
            if (result) {
              // Mark as synced
              if (!alreadyMigrated) {
                localStorage.setItem('dataMigratedToFirebase', 'true');
                localStorage.setItem('migrationTimestamp', new Date().toISOString());
                console.log('✅ Player data successfully migrated to Firebase:', syncData);
                
                // Show migration notification only for first time
                showMigrationNotification(syncData);
              } else {
                console.log('✅ Player data synced to Firebase (update):', syncData);
              }
            } else {
              console.error('❌ Failed to save data to Firebase');
            }
          }
        } else {
          console.log('📭 No player data found to sync');
        }
      } catch (error) {
        console.error('❌ Error during data sync:', error);
      }
    }

    // Show migration notification
    function showMigrationNotification(migrationData) {
      // Create notification element
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: linear-gradient(45deg, #00ff00, #00cc00);
        color: #000;
        padding: 15px 20px;
        border-radius: 10px;
        box-shadow: 0 5px 20px rgba(0, 255, 0, 0.3);
        z-index: 10000;
        font-family: 'Orbitron', Arial, sans-serif;
        font-weight: bold;
        max-width: 300px;
        animation: slideInRight 0.5s ease-out;
      `;
      
      notification.innerHTML = `
        <div style="display: flex; align-items: center; gap: 10px;">
          <span style="font-size: 1.5rem;">🔄</span>
          <div>
            <div style="font-size: 0.9rem; margin-bottom: 5px;">Datos Migrados</div>
            <div style="font-size: 0.8rem; opacity: 0.8;">
              ${migrationData.name}: ${migrationData.coins} monedas
            </div>
          </div>
        </div>
      `;
      
      // Add animation CSS
      const style = document.createElement('style');
      style.textContent = `
        @keyframes slideInRight {
          from { transform: translateX(100%); opacity: 0; }
          to { transform: translateX(0); opacity: 1; }
        }
      `;
      document.head.appendChild(style);
      
      // Add to page
      document.body.appendChild(notification);
      
      // Remove after 5 seconds
      setTimeout(() => {
        notification.style.animation = 'slideInRight 0.5s ease-out reverse';
        setTimeout(() => {
          if (notification.parentNode) {
            notification.parentNode.removeChild(notification);
          }
        }, 500);
      }, 5000);
    }

    // Sync data when coins are updated
    function updateCoinsAndSync(newCoins) {
      localStorage.setItem('totalOrtizCoins', newCoins.toString());
      updateCoinsDisplay();
      syncPlayerDataToFirebase();
    }

    // Auto-sync function that runs whenever player data changes
    function autoSyncPlayerData() {
      console.log('🔄 Auto-syncing player data to Firebase...');
      
      const playerName = localStorage.getItem('soldierName');
      const totalCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
      const gamesPlayed = parseInt(localStorage.getItem('gamesPlayed') || '0');
      const totalWins = parseInt(localStorage.getItem('totalWins') || '0');
      const cluesFound = parseInt(localStorage.getItem('cluesFound') || '0');
      
      if (playerName && window.PlayerDataManager) {
        PlayerDataManager.savePlayerData(playerName, totalCoins, {
          gamesPlayed: gamesPlayed,
          totalWins: totalWins,
          cluesFound: cluesFound,
          lastSync: new Date().toISOString(),
          autoSync: true
        }).then(result => {
          if (result) {
            console.log('✅ Auto-sync successful:', { playerName, totalCoins, gamesPlayed, totalWins, cluesFound });
          } else {
            console.log('⚠️ Auto-sync failed, will retry later');
          }
        }).catch(error => {
          console.error('❌ Auto-sync error:', error);
        });
      }
    }

    // No automatic sync - only manual sync through admin panel
    // localStorage.setItem override removed to prevent auto-sync

    // No periodic sync - only manual sync through admin panel
    // setInterval removed to prevent auto-sync



    // Daily Reward Functions
    function isDailyRewardAvailable() {
      const lastRewardDate = localStorage.getItem('lastDailyRewardDate');
      const today = new Date().toDateString();
      
      if (!lastRewardDate || lastRewardDate !== today) {
        return true;
      }
      return false;
    }

    function getDailyRewardAmount() {
      const rewards = [5, 10, 25, 50];
      const randomIndex = Math.floor(Math.random() * rewards.length);
      return rewards[randomIndex];
    }

    function showDailyRewardModal() {
      // Check if already claimed today
      if (!isDailyRewardAvailable()) {
        showDailyRewardMessage('Ya has cobrado tu recompensa diaria. Vuelve mañana.');
        return;
      }
      
      const rewardAmount = getDailyRewardAmount();
      const modal = document.getElementById('dailyRewardModal');
      const amountElement = document.getElementById('rewardAmount');
      
      amountElement.textContent = `+${rewardAmount} ORTIZ COINS`;
      
      // Create reward particles
      createRewardParticles();
      
      modal.style.display = 'flex';
      
      // Add event listener to close button
      const closeBtn = document.getElementById('closeDailyReward');
      if (closeBtn) {
        closeBtn.onclick = function() {
          claimDailyReward(rewardAmount);
          modal.style.display = 'none';
          // Disable the button immediately
          const dailyRewardBtn = document.getElementById('dailyRewardBtn');
          dailyRewardBtn.classList.add('disabled');
          dailyRewardBtn.querySelector('.envelope-text').textContent = '⏰ MAÑANA';
        };
      }
    }

    function createRewardParticles() {
      const effectsContainer = document.getElementById('rewardEffects');
      effectsContainer.innerHTML = '';
      
      for (let i = 0; i < 15; i++) {
        const particle = document.createElement('div');
        particle.className = 'reward-particle';
        particle.textContent = ['💰', '🎁', '⭐', '💎'][Math.floor(Math.random() * 4)];
        
        const size = 12 + Math.random() * 18;
        particle.style.fontSize = `${size}px`;
        particle.style.left = `${Math.random() * 100}%`;
        particle.style.top = `${Math.random() * 100}%`;
        particle.style.animationDelay = `${Math.random() * 2}s`;
        
        effectsContainer.appendChild(particle);
      }
    }

    function claimDailyReward(amount) {
      console.log('🎁 Claiming daily reward:', amount, 'coins');
      
      // Double check if already claimed today
      if (!isDailyRewardAvailable()) {
        console.log('⚠️ Daily reward already claimed today');
        showDailyRewardMessage('Ya has cobrado tu recompensa diaria. Vuelve mañana.');
        return;
      }
      
      // Add coins to player (only the exact amount shown)
      const currentCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
      const newCoins = currentCoins + amount;
      localStorage.setItem('totalOrtizCoins', newCoins.toString());
      
      // Track Daily Reward in Firebase
      const playerName = localStorage.getItem('soldierName');
      if (playerName && window.PlayerDataManager) {
        PlayerDataManager.trackEasterEgg(playerName, 'daily-reward', amount);
        console.log('🥚 Daily Reward tracked:', amount);
      }
      
      // Update achievement progress
      updateAchievementProgress('daily_reward', 1);
      
      // Mark as claimed today IMMEDIATELY to prevent multiple claims
      localStorage.setItem('lastDailyRewardDate', new Date().toDateString());
      
      // Update display
      loadTotalCoins();
      
      // Disable button immediately
      const dailyRewardBtn = document.getElementById('dailyRewardBtn');
      dailyRewardBtn.classList.add('disabled');
      dailyRewardBtn.querySelector('.envelope-text').textContent = '⏰ MAÑANA';
      
      // Close modal immediately
      const modal = document.getElementById('dailyRewardModal');
      modal.style.display = 'none';
      
      // Sync to Firebase with player data collection
      collectAndSyncPlayerData(amount);
      
      // Show success message
      showDailyRewardMessage(`¡Recompensa cobrada! +${amount} monedas`);
    }

    function collectAndSyncPlayerData(rewardAmount) {
      console.log('🎁 DAILY REWARD SYNC - Iniciando...');
      
      // Simple player data collection
      const playerName = localStorage.getItem('soldierName') || 'Unknown';
      const totalCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
      const gamesPlayed = parseInt(localStorage.getItem('gamesPlayed') || '0');
      const totalWins = parseInt(localStorage.getItem('totalWins') || '0');
      const cluesFound = parseInt(localStorage.getItem('cluesFound') || '0');
      
      const playerData = {
        coins: totalCoins,
        gamesPlayed: gamesPlayed,
        totalWins: totalWins,
        cluesFound: cluesFound,
        lastDailyReward: new Date().toISOString(),
        dailyRewardAmount: rewardAmount,
        timestamp: new Date().toISOString()
      };
      
      console.log('📊 Player data collected:', playerData);
      
      // Check Firebase availability
      if (typeof firebase === 'undefined') {
        console.error('❌ Firebase not defined');
        showDailyRewardMessage(`⚠️ Firebase no disponible - datos guardados localmente`);
        return;
      }
      
      if (!firebase.database) {
        console.error('❌ Firebase Database not available');
        showDailyRewardMessage(`⚠️ Firebase no disponible - datos guardados localmente`);
        return;
      }
      
      console.log('✅ Firebase available, connecting...');
      
      try {
        const database = firebase.database();
        const playerRef = database.ref(`players/${playerName.replace(/[.#$[\]]/g, '_')}`);
        
        console.log('📤 Sending data to Firebase...');
        
        playerRef.set(playerData).then(() => {
          console.log('✅ Daily reward data synced to Firebase successfully');
          showDailyRewardMessage(`✅ Datos enviados a Firebase! +${rewardAmount} monedas`);
        }).catch(error => {
          console.error('❌ Firebase sync failed:', error);
          showDailyRewardMessage(`⚠️ Error al enviar datos: ${error.message}`);
        });
      } catch (error) {
        console.error('❌ Firebase sync error:', error);
        showDailyRewardMessage(`⚠️ Error de conexión: ${error.message}`);
      }
    }

    function showDailyRewardMessage(message) {
      const messageEl = document.createElement('div');
      messageEl.textContent = message;
      messageEl.style.position = 'fixed';
      messageEl.style.top = '50%';
      messageEl.style.left = '50%';
      messageEl.style.transform = 'translate(-50%, -50%)';
      messageEl.style.color = '#FF6B35';
      messageEl.style.fontSize = '1.2rem';
      messageEl.style.fontWeight = 'bold';
      messageEl.style.textShadow = '0 0 20px #FF6B35';
      messageEl.style.zIndex = '2000';
      messageEl.style.pointerEvents = 'none';
      messageEl.style.fontFamily = 'Orbitron, Arial, sans-serif';
      
      document.body.appendChild(messageEl);
      
      // Animate message
      messageEl.animate([
        { opacity: 0, transform: 'translate(-50%, -50%) scale(0.5)' },
        { opacity: 1, transform: 'translate(-50%, -50%) scale(1)' },
        { opacity: 0, transform: 'translate(-50%, -50%) scale(1.2)' }
      ], {
        duration: 3000,
        easing: 'ease-in-out'
      });
      
      // Remove message
      setTimeout(() => {
        if (messageEl.parentNode) {
          messageEl.parentNode.removeChild(messageEl);
        }
      }, 3000);
    }

    // Initialize daily reward button state
    function initializeDailyReward() {
      const dailyRewardBtn = document.getElementById('dailyRewardBtn');
      if (!isDailyRewardAvailable()) {
        dailyRewardBtn.classList.add('disabled');
        dailyRewardBtn.querySelector('.envelope-text').textContent = '⏰ MAÑANA';
      }
    }

    // ACHIEVEMENTS SYSTEM
    // Daily achievements data
    const dailyAchievements = [
      {
        id: 'play_3_games',
        icon: '🎮',
        title: 'Jugador Activo',
        description: 'Juega 3 juegos hoy',
        target: 3,
        reward: 25,
        type: 'games'
      },
      {
        id: 'win_2_games',
        icon: '🏆',
        title: 'Ganador',
        description: 'Gana 2 juegos hoy',
        target: 2,
        reward: 50,
        type: 'wins'
      },
      {
        id: 'find_1_clue',
        icon: '🔍',
        title: 'Detective',
        description: 'Encuentra 1 pista hoy',
        target: 1,
        reward: 30,
        type: 'clues'
      },
      {
        id: 'earn_100_coins',
        icon: '💰',
        title: 'Rico',
        description: 'Gana 100 monedas hoy',
        target: 100,
        reward: 40,
        type: 'coins'
      },
      {
        id: 'use_daily_reward',
        icon: '🎁',
        title: 'Fiel',
        description: 'Cobra tu recompensa diaria',
        target: 1,
        reward: 20,
        type: 'daily_reward'
      }
    ];

    // Streak milestones
    const streakMilestones = [
      { days: 3, reward: 50, icon: '🥉' },
      { days: 7, reward: 200, icon: '🥈' },
      { days: 30, reward: 1000, icon: '🥇' },
      { days: 100, reward: 'Título "Leyenda"', icon: '👑' }
    ];

    function showAchievementsModal() {
      const modal = document.getElementById('achievementsModal');
      if (!modal) {
        console.error('Modal de logros no encontrado');
        return;
      }
      
      modal.style.display = 'flex';
      
      // Cargar datos solo una vez al abrir el modal
      if (!modal.dataset.loaded) {
        loadAchievementsData();
        modal.dataset.loaded = 'true';
      } else {
        // Solo actualizar datos si ya se cargaron antes
        refreshAchievementsData();
      }
      
      // Configurar tabs solo una vez
      if (!modal.dataset.tabsInitialized) {
        setupTabs();
        modal.dataset.tabsInitialized = 'true';
      }
      
      // Configurar botón de cerrar
      setupCloseButton();
    }

    function setupTabs() {
      const tabBtns = document.querySelectorAll('.tab-btn');
      const tabContents = document.querySelectorAll('.tab-content');
      
      tabBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          const tabName = btn.getAttribute('data-tab');
          
          // Update active tab
          tabBtns.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          
          // Show corresponding content
          tabContents.forEach(content => {
            content.classList.remove('active');
            if (content.id === `${tabName}-tab`) {
              content.classList.add('active');
            }
          });
        });
      });
    }

    function setupCloseButton() {
      const closeBtn = document.getElementById('closeAchievements');
      if (closeBtn) {
        closeBtn.onclick = function() {
          const modal = document.getElementById('achievementsModal');
          modal.style.display = 'none';
        };
      }
    }

    function refreshAchievementsData() {
      // Actualizar solo los datos que cambian frecuentemente
      loadStats();
      loadStreaks();
    }

    function loadAchievementsData() {
      // Load daily achievements
      loadDailyAchievements();
      
      // Load streaks
      loadStreaks();
      
      // Load stats
      loadStats();
    }

    function loadDailyAchievements() {
      const grid = document.getElementById('dailyAchievementsGrid');
      if (!grid) {
        console.error('Grid de logros diarios no encontrado');
        return;
      }
      
      // Limpiar grid solo si es necesario
      if (grid.children.length === 0) {
        const today = new Date().toDateString();
        const todayData = JSON.parse(localStorage.getItem(`achievements_${today}`) || '{}');
        
        // Crear fragmento para mejor rendimiento
        const fragment = document.createDocumentFragment();
        
        dailyAchievements.forEach(achievement => {
          const progress = todayData[achievement.id] || 0;
          const isCompleted = progress >= achievement.target;
          
          const achievementEl = document.createElement('div');
          achievementEl.className = `achievement-item ${isCompleted ? 'completed' : ''}`;
          
          const progressPercent = Math.min((progress / achievement.target) * 100, 100);
          
          achievementEl.innerHTML = `
            <div class="achievement-icon">${achievement.icon}</div>
            <div class="achievement-title">${achievement.title}</div>
            <div class="achievement-description">${achievement.description}</div>
            <div class="achievement-progress">
              <div class="achievement-bar" style="width: ${progressPercent}%"></div>
            </div>
            <div class="achievement-reward">+${achievement.reward} monedas</div>
          `;
          
          fragment.appendChild(achievementEl);
        });
        
        grid.appendChild(fragment);
      }
    }

    function loadStreaks() {
      const currentStreakEl = document.getElementById('currentStreak');
      const streakRewardEl = document.getElementById('streakReward');
      
      if (!currentStreakEl || !streakRewardEl) {
        console.error('Elementos de racha no encontrados');
        return;
      }
      
      const streakData = JSON.parse(localStorage.getItem('streakData') || '{}');
      const currentStreak = streakData.currentStreak || 0;
      
      currentStreakEl.textContent = `${currentStreak} días`;
      
      // Calculate streak reward
      let reward = 0;
      if (currentStreak >= 3) reward = 25;
      if (currentStreak >= 7) reward = 50;
      if (currentStreak >= 30) reward = 100;
      
      streakRewardEl.textContent = `+${reward} monedas`;
      
      // Update milestones
      const milestones = document.querySelectorAll('.milestone');
      milestones.forEach(milestone => {
        const days = parseInt(milestone.getAttribute('data-days'));
        if (currentStreak >= days) {
          milestone.classList.add('reached');
        } else {
          milestone.classList.remove('reached');
        }
      });
    }

    function loadStats() {
      // Use OrtizCoinManager for consistent coin handling
      const totalCoins = window.OrtizCoinManager ? window.OrtizCoinManager.getTotalCoins() : parseInt(localStorage.getItem('totalOrtizCoins') || '0');
      const gamesPlayed = parseInt(localStorage.getItem('gamesPlayed') || '0');
      const easterEggs = parseInt(localStorage.getItem('easterEggsFound') || '0');
      const daysActive = parseInt(localStorage.getItem('daysActive') || '0');
      
      // Actualizar elementos solo si existen
      const totalCoinsEl = document.getElementById('totalCoinsStat');
      const gamesPlayedEl = document.getElementById('gamesPlayedStat');
      const easterEggsEl = document.getElementById('easterEggsStat');
      const daysActiveEl = document.getElementById('daysActiveStat');
      
      if (totalCoinsEl) totalCoinsEl.textContent = totalCoins.toLocaleString();
      if (gamesPlayedEl) gamesPlayedEl.textContent = gamesPlayed;
      if (easterEggsEl) easterEggsEl.textContent = easterEggs;
      if (daysActiveEl) daysActiveEl.textContent = daysActive;
    }

    // Load and update Top 3 Leaderboard
    function loadTop3Leaderboard() {
      const leaderboardContent = document.getElementById('leaderboardContent');
      if (!leaderboardContent) {
        console.error('❌ Leaderboard content element not found');
        return;
      }

      console.log('🏆 Starting leaderboard update...');

      if (window.firebase && window.firebase.database) {
        const db = window.firebase.database();
        const playersRef = db.ref('players');
        
        console.log('📡 Fetching players from Firebase...');
        
        playersRef.once('value')
          .then((snapshot) => {
            console.log('📊 Firebase response:', snapshot.val());
            const players = [];
            
            snapshot.forEach((childSnapshot) => {
              const player = childSnapshot.val();
              console.log('🔍 Checking player:', childSnapshot.key, player);
              
              // Check for different possible name fields
              const playerName = player?.name || player?.username || player?.displayName || childSnapshot.key;
              
              if (player && playerName) {
                // Filter out test users
                const playerNameLower = playerName.toLowerCase();
                if (playerNameLower === 'yo' || playerNameLower === 'prueba' || playerNameLower === 'prueba 2') {
                  console.log('🚫 Skipping test user:', playerName);
                  return; // Skip these users
                }
                
                const coins = player.coins || player.totalCoins || player.totalOrtizCoins || 0;
                console.log('✅ Adding player to leaderboard:', playerName, 'with', coins, 'coins');
                
                players.push({
                  name: playerName,
                  coins: coins
                });
              } else {
                console.log('❌ Invalid player data:', player);
              }
            });
            
            console.log('📋 Total players found:', players.length);
            console.log('📋 Players array:', players);
            
            // Sort by coins (highest first) and take top 3
            players.sort((a, b) => b.coins - a.coins);
            const top3 = players.slice(0, 3);
            
            console.log('🏆 Top 3 players:', top3);
            
            // Generate HTML for leaderboard
            let html = '';
            
            if (top3.length === 0) {
              html = '<div class="loading-leaderboard">No hay jugadores registrados</div>';
            } else {
              top3.forEach((player, index) => {
                const rank = index + 1;
                const rankEmoji = rank === 1 ? '🥇' : rank === 2 ? '🥈' : '🥉';
                
                html += `
                  <div class="leaderboard-entry rank-${rank}">
                    <div class="leaderboard-rank">${rankEmoji}</div>
                    <div class="leaderboard-player">
                      <div class="leaderboard-name">${player.name}</div>
                      <div class="leaderboard-coins">🪙 ${player.coins.toLocaleString()} monedas</div>
                    </div>
                  </div>
                `;
              });
            }
            
            leaderboardContent.innerHTML = html;
            console.log('🏆 Top 3 Leaderboard updated successfully');
          })
          .catch((error) => {
            console.error('❌ Error loading leaderboard:', error);
            leaderboardContent.innerHTML = '<div class="loading-leaderboard">Error cargando ranking</div>';
          });
      } else {
        console.error('❌ Firebase not available');
        leaderboardContent.innerHTML = '<div class="loading-leaderboard">Firebase no disponible</div>';
      }
    }

    // Auto-update leaderboard every 30 seconds
    function startLeaderboardUpdates() {
      console.log('🏆 Initializing leaderboard updates...');
      
      // Test Firebase connection first
      testFirebaseConnection();
      
      // Load initial data after a short delay
      setTimeout(() => {
        console.log('🏆 Loading initial leaderboard data...');
        loadTop3Leaderboard();
      }, 2000);
      
      // Update every 30 seconds
      setInterval(() => {
        console.log('🏆 Auto-updating leaderboard...');
        loadTop3Leaderboard();
      }, 30000);
    }

    // Test Firebase connection
    function testFirebaseConnection() {
      console.log('🔍 Testing Firebase connection...');
      
      if (!window.firebase) {
        console.error('❌ Firebase SDK not loaded');
        return;
      }
      
      if (!window.firebase.database) {
        console.error('❌ Firebase Database not available');
        return;
      }
      
      console.log('✅ Firebase SDK and Database available');
      
      const db = window.firebase.database();
      const testRef = db.ref('test');
      
      testRef.set({ test: true, timestamp: Date.now() })
        .then(() => {
          console.log('✅ Firebase connection test successful');
          return testRef.remove();
        })
        .then(() => {
          console.log('✅ Firebase test data cleaned up');
        })
        .catch((error) => {
          console.error('❌ Firebase connection test failed:', error);
        });
    }

    function updateAchievementProgress(type, amount = 1) {
      const today = new Date().toDateString();
      const todayData = JSON.parse(localStorage.getItem(`achievements_${today}`) || '{}');
      
      let achievementCompleted = false;
      let completedAchievement = null;
      
      dailyAchievements.forEach(achievement => {
        if (achievement.type === type) {
          const currentProgress = todayData[achievement.id] || 0;
          const newProgress = currentProgress + amount;
          todayData[achievement.id] = newProgress;
          
          // Check if achievement completed
          if (newProgress >= achievement.target && currentProgress < achievement.target) {
            achievementCompleted = true;
            completedAchievement = achievement;
            
            // Achievement just completed
            const currentCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
            const newCoins = currentCoins + achievement.reward;
            localStorage.setItem('totalOrtizCoins', newCoins.toString());
            
            // Show achievement notification
            showAchievementNotification(achievement);
            
            // Update display
            loadTotalCoins();
          }
        }
      });
      
      localStorage.setItem(`achievements_${today}`, JSON.stringify(todayData));
      
      // Actualizar el modal de logros si está abierto
      const modal = document.getElementById('achievementsModal');
      if (modal && modal.style.display === 'flex') {
        updateAchievementDisplay();
      }
      
      return { achievementCompleted, completedAchievement };
    }

    function updateAchievementDisplay() {
      // Actualizar solo los logros que cambiaron
      const grid = document.getElementById('dailyAchievementsGrid');
      if (!grid) return;
      
      const today = new Date().toDateString();
      const todayData = JSON.parse(localStorage.getItem(`achievements_${today}`) || '{}');
      
      const achievementItems = grid.querySelectorAll('.achievement-item');
      achievementItems.forEach((item, index) => {
        if (index < dailyAchievements.length) {
          const achievement = dailyAchievements[index];
          const progress = todayData[achievement.id] || 0;
          const isCompleted = progress >= achievement.target;
          const progressPercent = Math.min((progress / achievement.target) * 100, 100);
          
          // Actualizar clases y barra de progreso
          item.className = `achievement-item ${isCompleted ? 'completed' : ''}`;
          const progressBar = item.querySelector('.achievement-bar');
          if (progressBar) {
            progressBar.style.width = `${progressPercent}%`;
          }
        }
      });
    }

    function showAchievementNotification(achievement) {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        border: 2px solid #FFD700;
        border-radius: 10px;
        padding: 1rem;
        color: #000;
        font-weight: bold;
        z-index: 10000;
        box-shadow: 0 0 20px #FFD700;
        animation: slideInRight 0.5s ease-out;
      `;
      
      notification.innerHTML = `
        <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">${achievement.icon}</div>
        <div style="font-size: 1rem; margin-bottom: 0.3rem;">¡${achievement.title}!</div>
        <div style="font-size: 0.8rem;">+${achievement.reward} monedas</div>
      `;
      
      document.body.appendChild(notification);
      
      // Remove after 3 seconds
      setTimeout(() => {
        if (notification.parentNode) {
          notification.parentNode.removeChild(notification);
        }
      }, 3000);
    }

    function updateStreak() {
      const today = new Date().toDateString();
      const streakData = JSON.parse(localStorage.getItem('streakData') || '{}');
      const lastPlayDate = streakData.lastPlayDate;
      
      if (lastPlayDate !== today) {
        // Check if it's consecutive
        if (lastPlayDate) {
          const lastDate = new Date(lastPlayDate);
          const todayDate = new Date(today);
          const diffTime = Math.abs(todayDate - lastDate);
          const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
          
          if (diffDays === 1) {
            // Consecutive day
            streakData.currentStreak = (streakData.currentStreak || 0) + 1;
          } else if (diffDays > 1) {
            // Streak broken
            streakData.currentStreak = 1;
          }
        } else {
          // First time playing
          streakData.currentStreak = 1;
        }
        
        streakData.lastPlayDate = today;
        localStorage.setItem('streakData', JSON.stringify(streakData));
        
        // Check for milestone rewards
        checkStreakMilestones(streakData.currentStreak);
      }
    }

    function checkStreakMilestones(currentStreak) {
      streakMilestones.forEach(milestone => {
        if (currentStreak === milestone.days) {
          // Milestone reached
          if (typeof milestone.reward === 'number') {
            const currentCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
            const newCoins = currentCoins + milestone.reward;
            localStorage.setItem('totalOrtizCoins', newCoins.toString());
            
            showStreakMilestoneNotification(milestone);
            loadTotalCoins();
          }
        }
      });
    }

    function showStreakMilestoneNotification(milestone) {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        border: 3px solid #FFD700;
        border-radius: 15px;
        padding: 2rem;
        color: #000;
        font-weight: bold;
        z-index: 10000;
        box-shadow: 0 0 30px #FFD700;
        text-align: center;
        animation: scaleIn 0.5s ease-out;
      `;
      
      notification.innerHTML = `
        <div style="font-size: 3rem; margin-bottom: 1rem;">${milestone.icon}</div>
        <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">¡Racha de ${milestone.days} días!</div>
        <div style="font-size: 1rem;">${typeof milestone.reward === 'number' ? `+${milestone.reward} monedas` : milestone.reward}</div>
      `;
      
      document.body.appendChild(notification);
      
      // Remove after 4 seconds
      setTimeout(() => {
        if (notification.parentNode) {
          notification.parentNode.removeChild(notification);
        }
      }, 4000);
    }

    // CENTRALIZED COIN MANAGEMENT SYSTEM
    window.OrtizCoinManager = {
      // Get current total coins
      getTotalCoins: function() {
        return parseInt(localStorage.getItem('totalOrtizCoins') || '0');
      },
      
      // Add coins safely (accumulate, don't overwrite)
      addCoins: function(amount, source = 'game') {
        const currentCoins = this.getTotalCoins();
        const newTotal = currentCoins + amount;
        localStorage.setItem('totalOrtizCoins', newTotal.toString());
        
        console.log(`💰 OrtizCoinManager: +${amount} coins from ${source}. Total: ${newTotal}`);
        
        // Update display if on main page
        if (typeof loadTotalCoins === 'function') {
          loadTotalCoins();
        }
        
        // Trigger event for other components
        window.dispatchEvent(new CustomEvent('ortizCoinsUpdated', { 
          detail: { totalCoins: newTotal, added: amount, source: source } 
        }));
        
        return newTotal;
      },
      
      // Set coins (overwrite total)
      setCoins: function(amount, source = 'game') {
        localStorage.setItem('totalOrtizCoins', amount.toString());
        
        console.log(`💰 OrtizCoinManager: Set to ${amount} coins from ${source}`);
        
        // Update display if on main page
        if (typeof loadTotalCoins === 'function') {
          loadTotalCoins();
        }
        
        // Trigger event for other components
        window.dispatchEvent(new CustomEvent('ortizCoinsUpdated', { 
          detail: { totalCoins: amount, source: source } 
        }));
        
        return amount;
      },
      
      // Deduct coins safely
      deductCoins: function(amount, source = 'game') {
        const currentCoins = this.getTotalCoins();
        const newTotal = Math.max(0, currentCoins - amount); // Don't go below 0
        localStorage.setItem('totalOrtizCoins', newTotal.toString());
        
        console.log(`💰 OrtizCoinManager: -${amount} coins from ${source}. Total: ${newTotal}`);
        
        // Update display if on main page
        if (typeof loadTotalCoins === 'function') {
          loadTotalCoins();
        }
        
        // Trigger event for other components
        window.dispatchEvent(new CustomEvent('ortizCoinsUpdated', { 
          detail: { totalCoins: newTotal, deducted: amount, source: source } 
        }));
        
        return newTotal;
      }
    };

    // Initialize achievements system
    function initializeAchievements() {
      updateStreak();
    }

    // ALL IN GAME FUNCTIONS (SIMPLE VERSION)
    function initializeAllInGame() {
      console.log('🎰 Initializing ALL IN game...');
      
      const allInContainer = document.getElementById('allInContainer');
      const allInBtn = document.getElementById('allInBtn');
      
      // Check if player has 15000+ coins and show/hide button
      function checkAllInVisibility() {
        const totalCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
        const allInUsed = localStorage.getItem('allInUsed') === 'true';
        
        // Show button if player has enough coins AND hasn't used it yet
        if (totalCoins >= 15000 && !allInUsed) {
          allInContainer.classList.add('visible');
          allInContainer.style.display = 'block';
          console.log('🎰 ALL IN button visible - player has', totalCoins, 'coins and hasn\'t used it');
        } else {
          allInContainer.classList.remove('visible');
          allInContainer.style.display = 'none';
          console.log('🎰 ALL IN button hidden - coins:', totalCoins, 'used:', allInUsed);
        }
      }
      
      // Check visibility on page load
      checkAllInVisibility();
      
      // ALL IN button click - show simple modal
      allInBtn.addEventListener('click', () => {
        console.log('🎰 ALL IN button clicked!');
        const totalCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
        
        if (totalCoins < 15000) {
          console.log('❌ Player does not have enough coins for ALL IN');
          return;
        }
        
        showAllInModal(totalCoins);
      });
    }
    
    function showAllInModal(totalCoins) {
      // Create modal HTML
      const modalHTML = `
        <div class="simple-all-in-modal" id="simpleAllInModal">
          <div class="simple-all-in-content">
            <h2>🎰 ¿TE JUEGAS TODO?</h2>
            <p class="all-in-question">¿Quieres jugarte <strong>${totalCoins.toLocaleString()} monedas</strong> a <strong>DOBLE O NADA</strong>?</p>
            <div class="all-in-buttons">
              <button class="all-in-yes-btn" id="allInYesBtn">🎰 ¡SÍ!</button>
              <button class="all-in-no-btn" id="allInNoBtn">❌ NO</button>
            </div>
          </div>
        </div>
      `;
      
      // Add modal to page
      document.body.insertAdjacentHTML('beforeend', modalHTML);
      
      // Add event listeners
      document.getElementById('allInYesBtn').addEventListener('click', () => {
        executeAllIn(totalCoins);
      });
      
      document.getElementById('allInNoBtn').addEventListener('click', () => {
        console.log('🎰 ALL IN rejected by player');
        closeSimpleAllInModal();
        // Don't hide the button permanently - let player decide later
      });
      
      // Close on outside click
      document.getElementById('simpleAllInModal').addEventListener('click', (e) => {
        if (e.target.id === 'simpleAllInModal') {
          closeSimpleAllInModal();
        }
      });
    }
    
    function executeAllIn(totalCoins) {
      console.log('🎰 ALL IN executed - player loses everything!');
      
      const playerName = localStorage.getItem('soldierName') || 'Unknown';
      
      // Reset coins to 0
      localStorage.setItem('totalOrtizCoins', '0');
      
      // Mark ALL IN as used permanently (only after losing)
      localStorage.setItem('allInUsed', 'true');
      
      // Hide ALL IN button permanently (only after losing)
      const allInContainer = document.getElementById('allInContainer');
      allInContainer.style.display = 'none';
      allInContainer.classList.remove('visible');
      
      // Update display
      loadTotalCoins();
      
      // Increment easter eggs found counter
      const currentEasterEggs = parseInt(localStorage.getItem('easterEggsFound') || '0');
      localStorage.setItem('easterEggsFound', (currentEasterEggs + 1).toString());
      console.log('🥚 Easter Egg found! Total:', currentEasterEggs + 1);
      
      // Update statistics display
      loadStats();
      
      // Track Easter Egg in Firebase
      if (window.PlayerDataManager) {
        PlayerDataManager.trackEasterEgg(playerName, 'all-in-lost', totalCoins);
        console.log('🥚 ALL IN Easter Egg tracked: lost', totalCoins, 'coins');
      }
      
      // Show lose message
      const modal = document.getElementById('simpleAllInModal');
      modal.innerHTML = `
        <div class="simple-all-in-content">
          <h2 style="color: #ff0000; font-size: 2.5rem;">😈 ¡CREÍAS QUE GANARÍAS?</h2>
          <p style="color: #ffffff; font-size: 1.5rem; margin: 20px 0;">¡Perdiste ${totalCoins.toLocaleString()} monedas!</p>
          <p style="color: #ff6666; font-size: 1.2rem;">¡La casa siempre gana! 😈</p>
          <button class="all-in-close-btn" id="allInCloseBtn">😈 ¡PERDISTE!</button>
        </div>
      `;
      
      // Add close button listener
      document.getElementById('allInCloseBtn').addEventListener('click', () => {
        closeSimpleAllInModal();
      });
    }
    
    function closeSimpleAllInModal() {
      const modal = document.getElementById('simpleAllInModal');
      if (modal) {
        modal.remove();
      }
    }

    // FRONT MAN CALL FUNCTIONS
    function initializeFrontManCall() {
      console.log('📞 Initializing Front Man call...');
      
      const frontmanContainer = document.getElementById('frontmanCallContainer');
      const frontmanBtn = document.getElementById('frontmanCallBtn');
      
      // Check if player has 20000+ coins and show/hide button
      function checkFrontManVisibility() {
        const totalCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
        if (totalCoins >= 20000) {
          frontmanContainer.classList.add('visible');
          console.log('📞 Front Man call button visible - player has', totalCoins, 'coins');
        } else {
          frontmanContainer.classList.remove('visible');
        }
      }
      
      // Check visibility on page load
      checkFrontManVisibility();
      
      // Front Man button click - show modal
      frontmanBtn.addEventListener('click', () => {
        console.log('📞 Front Man call button clicked!');
        const totalCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
        
        if (totalCoins < 20000) {
          console.log('❌ Player does not have enough coins for Front Man call');
          return;
        }
        
        showFrontManModal();
      });
    }
    
    function showFrontManModal() {
      // Create modal HTML
      const modalHTML = `
        <div class="frontman-modal" id="frontmanModal">
          <div class="frontman-content">
            <h2>📞 FRONT MAN</h2>
            <p class="frontman-question">¿Somos caballos?</p>
            <div class="frontman-buttons">
              <button class="frontman-yes-btn" id="frontmanYesBtn">🐎 SÍ</button>
              <button class="frontman-no-btn" id="frontmanNoBtn">❌ NO</button>
            </div>
          </div>
        </div>
      `;
      
      // Add modal to page
      document.body.insertAdjacentHTML('beforeend', modalHTML);
      
      // Add event listeners
      document.getElementById('frontmanYesBtn').addEventListener('click', () => {
        executeFrontManYes();
      });
      
      document.getElementById('frontmanNoBtn').addEventListener('click', () => {
        executeFrontManNo();
      });
      
      // Close on outside click
      document.getElementById('frontmanModal').addEventListener('click', (e) => {
        if (e.target.id === 'frontmanModal') {
          closeFrontManModal();
        }
      });
    }
    
    function executeFrontManYes() {
      console.log('🐎 Front Man YES - player loses 10000 coins');
      
      const currentCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
      const newCoins = Math.max(0, currentCoins - 10000);
      
      // Update coins
      localStorage.setItem('totalOrtizCoins', newCoins.toString());
      
      // Mark Front Man as used permanently
      localStorage.setItem('frontManUsed', 'true');
      
      // Hide Front Man button permanently
      const frontmanContainer = document.getElementById('frontmanCallContainer');
      frontmanContainer.style.display = 'none';
      frontmanContainer.classList.remove('visible');
      
      loadTotalCoins();
      
      // Show result message
      const modal = document.getElementById('frontmanModal');
      modal.innerHTML = `
        <div class="frontman-content">
          <h2 style="color: #ff0000;">😈 ¡YO SOY FRONT MAN!</h2>
          <p style="color: #ffffff; font-size: 1.3rem; margin: 20px 0;">Los caballos sois vosotros</p>
          <p style="color: #ff6666; font-size: 1.1rem;">Penalización: -10,000 monedas</p>
          <button class="frontman-close-btn" id="frontmanCloseBtn">😈 ¡PERDISTE!</button>
        </div>
      `;
      
      // Add close button listener
      document.getElementById('frontmanCloseBtn').addEventListener('click', () => {
        closeFrontManModal();
      });
    }
    
    function executeFrontManNo() {
      console.log('❌ Front Man NO - player is smart');
      
      // Mark Front Man as used permanently
      localStorage.setItem('frontManUsed', 'true');
      
      // Hide Front Man button permanently
      const frontmanContainer = document.getElementById('frontmanCallContainer');
      frontmanContainer.style.display = 'none';
      frontmanContainer.classList.remove('visible');
      
      // Show result message
      const modal = document.getElementById('frontmanModal');
      modal.innerHTML = `
        <div class="frontman-content">
          <h2 style="color: #00ff00;">🧠 ¡ERES LISTO!</h2>
          <p style="color: #ffffff; font-size: 1.3rem; margin: 20px 0;">Sois vosotros los jugadores</p>
          <p style="color: #00ff66; font-size: 1.1rem;">Por esta vez te libras</p>
          <p style="color: #ffff00; font-size: 1rem; margin: 15px 0; font-style: italic;">Te diré algo: 9</p>
          <button class="frontman-close-btn" id="frontmanCloseBtn">✅ CERRAR</button>
        </div>
      `;
      
      // Add close button listener
      document.getElementById('frontmanCloseBtn').addEventListener('click', () => {
        closeFrontManModal();
      });
    }
    
    function closeFrontManModal() {
      const modal = document.getElementById('frontmanModal');
      if (modal) {
        modal.remove();
      }
    }

    // PLAYER FIGHT FUNCTIONS (ROCK PAPER SCISSORS)
    function initializePlayerFight() {
      console.log('⚔️ Initializing Player Fight...');
      
      const playerFightContainer = document.getElementById('playerFightContainer');
      const playerFightBtn = document.getElementById('playerFightBtn');
      
      // Check if player has 25000+ coins and show/hide button
      function checkPlayerFightVisibility() {
        const totalCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
        if (totalCoins >= 25000) {
          playerFightContainer.classList.add('visible');
          console.log('⚔️ Player Fight button visible - player has', totalCoins, 'coins');
        } else {
          playerFightContainer.classList.remove('visible');
        }
      }
      
      // Check visibility on page load
      checkPlayerFightVisibility();
      
      // Player Fight button click - show RPS modal
      playerFightBtn.addEventListener('click', () => {
        console.log('⚔️ Player Fight button clicked!');
        const totalCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
        
        if (totalCoins < 25000) {
          console.log('❌ Player does not have enough coins for Player Fight');
          return;
        }
        
        showPlayerFightModal();
      });
    }
    
    function showPlayerFightModal() {
      // Create modal HTML
      const modalHTML = `
        <div class="player-fight-modal" id="playerFightModal">
          <div class="player-fight-content">
            <h2>⚔️ PELEA ENTRE JUGADORES</h2>
            <p class="player-fight-subtitle">¡Un grupo de jugadores te desafía!<br>Elige tu arma para defenderte:</p>
            <div class="rps-buttons">
              <button class="rps-btn" data-choice="rock">🪨</button>
              <button class="rps-btn" data-choice="paper">📄</button>
              <button class="rps-btn" data-choice="scissors">✂️</button>
            </div>
          </div>
        </div>
      `;
      
      // Add modal to page
      document.body.insertAdjacentHTML('beforeend', modalHTML);
      
      // Add event listeners for RPS buttons
      document.querySelectorAll('.rps-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const playerChoice = btn.dataset.choice;
          playRockPaperScissors(playerChoice);
        });
      });
      
      // Close on outside click
      document.getElementById('playerFightModal').addEventListener('click', (e) => {
        if (e.target.id === 'playerFightModal') {
          closePlayerFightModal();
        }
      });
    }
    
    function playRockPaperScissors(playerChoice) {
      console.log('⚔️ Player chose:', playerChoice);
      
      // Computer makes random choice
      const choices = ['rock', 'paper', 'scissors'];
      const computerChoice = choices[Math.floor(Math.random() * choices.length)];
      
      console.log('⚔️ Computer chose:', computerChoice);
      
      // Determine winner with wealth factor
      let result;
      let playerWins = false;
      
      if (playerChoice === computerChoice) {
        result = 'empate';
      } else if (
        (playerChoice === 'rock' && computerChoice === 'scissors') ||
        (playerChoice === 'paper' && computerChoice === 'rock') ||
        (playerChoice === 'scissors' && computerChoice === 'paper')
      ) {
        // Player should win based on game logic, but check wealth factor
        if (shouldPlayerWin()) {
          result = 'victoria';
          playerWins = true;
        } else {
          result = 'derrota';
        }
      } else {
        // Player should lose based on game logic, but check wealth factor
        if (shouldPlayerWin()) {
          result = 'victoria';
          playerWins = true;
        } else {
          result = 'derrota';
        }
      }
      
      // Show result
      showPlayerFightResult(playerChoice, computerChoice, result, playerWins);
    }
    
    function showPlayerFightResult(playerChoice, computerChoice, result, playerWins) {
      const choiceEmojis = {
        rock: '🪨',
        paper: '📄',
        scissors: '✂️'
      };
      
      const modal = document.getElementById('playerFightModal');
      
      // Mark Player Fight as used permanently
      localStorage.setItem('playerFightUsed', 'true');
      
      // Hide Player Fight button permanently
      const playerFightContainer = document.getElementById('playerFightContainer');
      playerFightContainer.style.display = 'none';
      playerFightContainer.classList.remove('visible');
      
      if (result === 'empate') {
        // Tie - no one wins or loses
        modal.innerHTML = `
          <div class="player-fight-content">
            <h2 style="color: #ffff00;">🤝 ¡EMPATE!</h2>
            <div class="fight-result fight-tie">
              <p style="font-size: 12px;">Tu elección: ${choiceEmojis[playerChoice]}</p>
              <p style="font-size: 12px;">Jugadores: ${choiceEmojis[computerChoice]}</p>
              <p style="font-size: 12px;">¡Empate! Nadie gana ni pierde.</p>
            </div>
            <button class="player-fight-close-btn" id="playerFightBackBtn" style="background: linear-gradient(45deg, #ffff00, #cccc00); color: black;">🔙 VOLVER</button>
          </div>
        `;
      } else if (playerWins) {
        // Player wins - lose 5000 coins
        const currentCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
        const lostCoins = 5000;
        const remainingCoins = Math.max(0, currentCoins - lostCoins);
        localStorage.setItem('totalOrtizCoins', remainingCoins.toString());
        loadTotalCoins();
        
        modal.innerHTML = `
          <div class="player-fight-content">
            <h2 style="color: #00ff00;">🏆 ¡VICTORIA!</h2>
            <div class="fight-result fight-win">
              <p style="font-size: 12px;">Tu elección: ${choiceEmojis[playerChoice]}</p>
              <p style="font-size: 12px;">Jugadores: ${choiceEmojis[computerChoice]}</p>
              <p style="font-size: 12px;">¡Consigues escapar, pero te roban 5000 monedas!</p>
              <p style="font-size: 12px;">Perdiste ${lostCoins.toLocaleString()} monedas</p>
              <p style="font-size: 12px;">Te quedan ${remainingCoins.toLocaleString()} monedas</p>
            </div>
            <button class="player-fight-close-btn" id="playerFightBackBtn" style="background: linear-gradient(45deg, #00ff00, #00cc00); color: white;">🔙 VOLVER</button>
          </div>
        `;
      } else {
        // Player loses - lose half coins
        const currentCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
        const lostCoins = Math.floor(currentCoins / 2);
        const remainingCoins = currentCoins - lostCoins;
        localStorage.setItem('totalOrtizCoins', remainingCoins.toString());
        loadTotalCoins();
        
        modal.innerHTML = `
          <div class="player-fight-content">
            <h2 style="color: #ff0000;">💀 ¡DERROTA!</h2>
            <div class="fight-result fight-lose">
              <p style="font-size: 12px;">Tu elección: ${choiceEmojis[playerChoice]}</p>
              <p style="font-size: 12px;">Jugadores: ${choiceEmojis[computerChoice]}</p>
              <p style="font-size: 12px;">¡Un grupo de jugadores te ha robado la mitad!</p>
              <p style="font-size: 12px;">Perdiste ${lostCoins.toLocaleString()} monedas</p>
              <p style="font-size: 12px;">Te quedan ${remainingCoins.toLocaleString()} monedas</p>
            </div>
            <button class="player-fight-close-btn" id="playerFightBackBtn" style="background: linear-gradient(45deg, #ff0000, #cc0000); color: white;">🔙 VOLVER</button>
          </div>
        `;
      }
      
      // Add back button listener
      document.getElementById('playerFightBackBtn').addEventListener('click', () => {
        closePlayerFightModal();
      });
    }
    
    function closePlayerFightModal() {
      const modal = document.getElementById('playerFightModal');
      if (modal) {
        modal.remove();
      }
    }

    // AUTOMATIC SYNC FUNCTIONS (NEW - DOESN'T AFFECT DAILY REWARD)
    function initializeAutomaticSync() {
      console.log('🔄 Initializing automatic sync every hour...');
      
      // Initial sync when page loads
      setTimeout(() => {
        console.log('🔄 Initial sync after page load...');
        syncPlayerDataToFirebase();
      }, 5000); // Wait 5 seconds after page load
      
      // Set up hourly sync
      setInterval(() => {
        console.log('🔄 Hourly automatic sync...');
        syncPlayerDataToFirebase();
      }, 60 * 60 * 1000); // 1 hour = 60 * 60 * 1000 ms
      
      console.log('✅ Automatic sync initialized - will sync every hour');
    }

    function syncPlayerDataToFirebase() {
      console.log('🔄 AUTOMATIC SYNC - Collecting player data...');
      
      // Collect all player data from localStorage
      const playerName = localStorage.getItem('soldierName') || 'Unknown';
      const totalCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
      const gamesPlayed = parseInt(localStorage.getItem('gamesPlayed') || '0');
      const totalWins = parseInt(localStorage.getItem('totalWins') || '0');
      const cluesFound = parseInt(localStorage.getItem('cluesFound') || '0');
      const totalEasterEggs = parseInt(localStorage.getItem('totalEasterEggs') || '0');
      const totalPlayTime = parseInt(localStorage.getItem('totalPlayTime') || '0');
      
      const playerData = {
        coins: totalCoins,
        gamesPlayed: gamesPlayed,
        totalWins: totalWins,
        cluesFound: cluesFound,
        totalEasterEggs: totalEasterEggs,
        totalPlayTime: totalPlayTime,
        lastAutoSync: new Date().toISOString(),
        timestamp: new Date().toISOString()
      };
      
      console.log('📊 Automatic sync data collected:', playerData);
      
      // Check Firebase availability
      if (typeof firebase === 'undefined' || !firebase.database) {
        console.log('⚠️ Firebase not available for automatic sync');
        return;
      }
      
      try {
        const database = firebase.database();
        const playerRef = database.ref(`players/${playerName.replace(/[.#$[\]]/g, '_')}`);
        
        console.log('📤 Sending automatic sync data to Firebase...');
        
        playerRef.update(playerData).then(() => {
          console.log('✅ Automatic sync completed successfully');
        }).catch(error => {
          console.error('❌ Automatic sync failed:', error);
        });
      } catch (error) {
        console.error('❌ Automatic sync error:', error);
      }
    }

    // WEALTH FACTOR SYSTEM - NEW
    function calculateWealthFactor() {
      const totalCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
      
      // Sistema de probabilidades basado en riqueza
      if (totalCoins >= 50001) {
        // Rico: 25% de probabilidad de ganar
        return 0.25;
      } else if (totalCoins >= 20001) {
        // Clase media-alta: 40% de probabilidad de ganar
        return 0.40;
      } else if (totalCoins >= 10001) {
        // Clase media: 50% de probabilidad de ganar
        return 0.50;
      } else if (totalCoins >= 5001) {
        // Clase media-baja: 60% de probabilidad de ganar
        return 0.60;
      } else {
        // Pobre: 70% de probabilidad de ganar (para ayudar a los nuevos)
        return 0.70;
      }
    }

    function shouldPlayerWin() {
      const wealthFactor = calculateWealthFactor();
      const random = Math.random();
      const won = random < wealthFactor;
      
      const totalCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
      console.log(`💰 Wealth Factor Check - Coins: ${totalCoins.toLocaleString()}, Factor: ${(wealthFactor * 100).toFixed(0)}%, Random: ${(random * 100).toFixed(1)}%, Result: ${won ? 'WIN' : 'LOSE'}`);
      
      return won;
    }

    // Initialize page
    document.addEventListener('DOMContentLoaded', () => {
      console.log('🚀 Page loaded...');
      console.log('🔍 PlayerDataManager available:', !!window.PlayerDataManager);
      console.log('🔍 Firebase available:', !!window.firebase);
      
      // Check Firebase status
      checkFirebaseStatus();
      
      // Initialize daily reward
      initializeDailyReward();
      
      // Initialize achievements system
      initializeAchievements();
      
      // Initialize ALL IN game for players with 15000+ coins
      initializeAllInGame();
      
      // Initialize Front Man call for players with 20000+ coins
      initializeFrontManCall();
      
      // Initialize Player Fight for players with 25000+ coins
      initializePlayerFight();
      
      // Initialize admin set coins functionality
      initializeAdminSetCoins();
      
      // Initialize automatic sync every hour
      initializeAutomaticSync();
      
      // Initialize Top 3 Leaderboard
      startLeaderboardUpdates();
      
      // Connection status system removed - no test button needed
      
      // DEBUG: Check ALL IN button status
      setTimeout(() => {
        const allInContainer = document.getElementById('allInContainer');
        const totalCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
        console.log('🔍 DEBUG - ALL IN Container:', allInContainer);
        console.log('🔍 DEBUG - Total coins:', totalCoins);
        console.log('🔍 DEBUG - Container visible:', allInContainer.classList.contains('visible'));
        console.log('🔍 DEBUG - Container display:', window.getComputedStyle(allInContainer).display);
        
        // Force show for testing if player has coins
        if (totalCoins >= 15000) {
          allInContainer.classList.add('visible');
          console.log('🔍 DEBUG - Forced ALL IN button to be visible');
        }
      }, 2000);
    });

    function loadAdminData() {
      console.log('📊 Loading admin data...');
      
      // Initialize admin panel with empty state - NO localStorage
      document.getElementById('totalPlayers').textContent = '0';
      document.getElementById('totalCoinsAdmin').textContent = '0';
      document.getElementById('totalEasterEggs').textContent = '0';
      document.getElementById('totalPlayTime').textContent = '0h';
      document.getElementById('totalGames').textContent = '0';
      document.getElementById('totalWins').textContent = '0';
      
      // Create empty players container
      const playersContainer = document.getElementById('playersContainer');
      playersContainer.innerHTML = `
        <div class="player-entry">
          <div class="player-info">
            <span class="player-name">Cargando datos de Firebase...</span>
            <span class="player-coins">🪙 0</span>
          </div>
          <div class="player-stats">
            <span>🎮 0 juegos</span>
            <span>🏆 0 victorias</span>
            <span>🔍 0 pistas</span>
            <span>🥚 0 easter eggs</span>
            <span>⏱️ 0 tiempo</span>
          </div>
        </div>
      `;
      
      console.log('✅ Admin panel initialized - waiting for Firebase data');
    }

    function updateAdminPanelWithFirebaseData(playersData) {
      console.log('📊 Updating admin panel with Firebase data...');
      
      const players = Object.keys(playersData);
      let totalCoins = 0;
      let totalEasterEggs = 0;
      let totalPlayTime = 0;
      let totalGames = 0;
      let totalWins = 0;
      
      // Calculate totals
      players.forEach(playerName => {
        const playerData = playersData[playerName];
        totalCoins += parseInt(playerData.coins || playerData.totalCoins || 0);
        totalEasterEggs += parseInt(playerData.totalEasterEggs || 0);
        totalPlayTime += parseInt(playerData.totalPlayTime || 0);
        totalGames += parseInt(playerData.gamesPlayed || 0);
        totalWins += parseInt(playerData.totalWins || 0);
      });
      
      // Format play time
      const formatPlayTime = (seconds) => {
        if (!seconds) return '0h';
        const hours = Math.floor(seconds / 3600);
        const minutes = Math.floor((seconds % 3600) / 60);
        if (hours > 0) {
          return `${hours}h ${minutes}m`;
        } else {
          return `${minutes}m`;
        }
      };
      
      // Count online players (simple version - just count total for now)
      const onlineCount = players.length; // For now, assume all are online
      
      // Update admin stats with animation
      const totalPlayersEl = document.getElementById('totalPlayers');
      const onlinePlayersEl = document.getElementById('onlinePlayers');
      const totalCoinsEl = document.getElementById('totalCoinsAdmin');
      const totalEasterEggsEl = document.getElementById('totalEasterEggs');
      const totalPlayTimeEl = document.getElementById('totalPlayTime');
      const totalGamesEl = document.getElementById('totalGames');
      const totalWinsEl = document.getElementById('totalWins');
      
      totalPlayersEl.textContent = players.length.toString();
      onlinePlayersEl.textContent = onlineCount.toString();
      totalCoinsEl.textContent = totalCoins.toLocaleString();
      totalEasterEggsEl.textContent = totalEasterEggs.toString();
      totalPlayTimeEl.textContent = formatPlayTime(totalPlayTime);
      totalGamesEl.textContent = totalGames.toString();
      totalWinsEl.textContent = totalWins.toString();
      
      // Add animation to stats
      totalPlayersEl.style.animation = 'statUpdate 0.5s ease-out';
      totalCoinsEl.style.animation = 'statUpdate 0.5s ease-out';
      totalEasterEggsEl.style.animation = 'statUpdate 0.5s ease-out';
      totalPlayTimeEl.style.animation = 'statUpdate 0.5s ease-out';
      totalGamesEl.style.animation = 'statUpdate 0.5s ease-out';
      totalWinsEl.style.animation = 'statUpdate 0.5s ease-out';
      
      // Create player entries with enhanced design
      const playersContainer = document.getElementById('playersContainer');
      let playersHTML = '';
      
      if (players.length === 0) {
        playersHTML = `
          <div class="player-entry" style="text-align: center; justify-content: center;">
            <div class="player-info">
              <span class="player-name" style="color: #888;">📭 No hay jugadores registrados</span>
              <span style="color: #666; font-size: 0.9rem;">Los datos aparecerán cuando los jugadores usen el juego y se sincronicen con Firebase</span>
            </div>
          </div>
        `;
      } else {
        // Sort players by coins (highest first)
        const sortedPlayers = players.sort((a, b) => {
          const coinsA = parseInt(playersData[a].coins || playersData[a].totalCoins || 0);
          const coinsB = parseInt(playersData[b].coins || playersData[b].totalCoins || 0);
          return coinsB - coinsA;
        });
        
        sortedPlayers.forEach((playerName, index) => {
          const playerData = playersData[playerName];
          const coins = parseInt(playerData.coins || playerData.totalCoins || 0);
          const gamesPlayed = parseInt(playerData.gamesPlayed || 0);
          const totalWins = parseInt(playerData.totalWins || 0);
          const cluesFound = parseInt(playerData.cluesFound || 0);
          const easterEggs = parseInt(playerData.totalEasterEggs || 0);
          const playTime = parseInt(playerData.totalPlayTime || 0);
          
          // Calculate win rate
          const winRate = gamesPlayed > 0 ? ((totalWins / gamesPlayed) * 100).toFixed(1) : 0;
          
          // Format play time
          const formatPlayTime = (seconds) => {
            if (!seconds) return '0s';
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            if (hours > 0) {
              return `${hours}h ${minutes}m`;
            } else if (minutes > 0) {
              return `${minutes}m`;
            } else {
              return `${seconds}s`;
            }
          };
          
          // Get rank emoji
          const rankEmoji = index === 0 ? '🥇' : index === 1 ? '🥈' : index === 2 ? '🥉' : '🏅';
          
          // Get Easter Eggs details
          const easterEggsDetails = playerData.easterEggs ? Object.keys(playerData.easterEggs).map(type => {
            const egg = playerData.easterEggs[type];
            const timesFound = egg.timesFound || 1;
            return `${type} (${timesFound}x)`;
          }).join(', ') : 'Ninguno';
          
          // Simple online indicator (green dot for all players for now)
          const onlineIndicator = '🟢 En línea';
          
          playersHTML += `
            <div class="player-entry" style="animation: playerEntrySlide 0.3s ease-out ${index * 0.1}s both;">
              <div class="player-info">
                <span class="player-name">${rankEmoji} ${playerName}</span>
                <span class="connection-status" style="color: #00ff00; font-size: 0.8rem; margin-left: 10px;">${onlineIndicator}</span>
                <span class="player-coins">🪙 ${coins.toLocaleString()} monedas</span>
              </div>
                <div class="player-stats">
                <span title="Juegos jugados">🎮 ${gamesPlayed}</span>
                <span title="Victorias totales">🏆 ${totalWins}</span>
                <span title="Pistas encontradas">🔍 ${cluesFound}</span>
                <span title="Easter Eggs encontrados">🥚 ${easterEggs}</span>
                <span title="Tiempo total jugado">⏱️ ${formatPlayTime(playTime)}</span>
                <span title="Porcentaje de victoria" style="background: linear-gradient(45deg, rgba(255, 215, 0, 0.2), rgba(255, 165, 0, 0.1)); border-color: rgba(255, 215, 0, 0.4);">📊 ${winRate}%</span>
                </div>
              <div class="player-easter-eggs" style="margin-top: 8px; font-size: 0.8rem; color: #ffd700; text-align: left;">
                <span title="Easter Eggs específicos">🥚 ${easterEggsDetails}</span>
              </div>
            </div>
          `;
        });
      }
      
      playersContainer.innerHTML = playersHTML;
      console.log('✅ Admin panel updated with Firebase data');
    }

    function checkFirebaseStatus() {
      console.log('🔍 Checking Firebase status...');
      
      if (window.firebase) {
        console.log('✅ Firebase SDK loaded');
        if (window.firebase.database) {
          console.log('✅ Firebase Database available');
          // Test connection
          try {
            const database = window.firebase.database();
            const testRef = database.ref('test');
            testRef.set({ test: true, timestamp: new Date().toISOString() }).then(() => {
              console.log('✅ Firebase connection test successful');
              testRef.remove(); // Clean up test data
            }).catch(error => {
              console.error('❌ Firebase connection test failed:', error);
            });
          } catch (error) {
            console.error('❌ Firebase database error:', error);
          }
        } else {
          console.log('⚠️ Firebase Database not available');
        }
      } else {
        console.log('❌ Firebase SDK not loaded');
      }
      
      if (window.PlayerDataManager) {
        console.log('✅ PlayerDataManager available');
        console.log('🔍 PlayerDataManager methods:', Object.keys(window.PlayerDataManager));
      } else {
        console.log('❌ PlayerDataManager not available');
      }
    }

    // Admin Set Coins Functionality
    function initializeAdminSetCoins() {
      const setCoinsInput = document.getElementById('adminSetCoinsInput');
      const setCoinsBtn = document.getElementById('adminSetCoinsBtn');
      const setCoinsMsg = document.getElementById('adminSetCoinsMsg');
      
      if (setCoinsInput && setCoinsBtn && setCoinsMsg) {
        setCoinsBtn.addEventListener('click', function() {
          const value = parseInt(setCoinsInput.value);
          if (!isNaN(value) && value >= 0) {
            localStorage.setItem('totalOrtizCoins', value.toString());
            if (typeof loadTotalCoins === 'function') loadTotalCoins();
            setCoinsMsg.textContent = `¡Monedas actualizadas a ${value.toLocaleString()}!`;
            setCoinsMsg.style.color = '#00ff00';
            setCoinsMsg.style.display = 'block';
            setTimeout(() => { setCoinsMsg.style.display = 'none'; }, 3000);
            console.log('🪙 Admin set coins to:', value);
          } else {
            setCoinsMsg.textContent = '❌ Valor no válido';
            setCoinsMsg.style.color = '#ff3333';
            setCoinsMsg.style.display = 'block';
            setTimeout(() => {
              setCoinsMsg.style.display = 'none';
              setCoinsMsg.textContent = '¡Monedas actualizadas!';
              setCoinsMsg.style.color = '#00ff00';
            }, 2000);
          }
        });
      }
    }

    // UNIFIED BUTTON VISIBILITY CHECKER
    function checkAllButtonVisibility() {
      console.log('🔍 Checking all button visibility...');
      
      const totalCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
      
      // Check ALL IN button (15000+ coins and not used)
      const allInContainer = document.getElementById('allInContainer');
      if (allInContainer) {
        const allInUsed = localStorage.getItem('allInUsed') === 'true';
        if (totalCoins >= 15000 && !allInUsed) {
          allInContainer.classList.add('visible');
          allInContainer.style.display = 'block';
          console.log('🎰 ALL IN button visible - player has', totalCoins, 'coins');
        } else {
          allInContainer.classList.remove('visible');
          allInContainer.style.display = 'none';
        }
      }
      
      // Check Front Man button (20000+ coins and not used)
      const frontmanContainer = document.getElementById('frontmanCallContainer');
      if (frontmanContainer) {
        const frontManUsed = localStorage.getItem('frontManUsed') === 'true';
        if (totalCoins >= 20000 && !frontManUsed) {
          frontmanContainer.classList.add('visible');
          frontmanContainer.style.display = 'block';
          console.log('📞 Front Man button visible - player has', totalCoins, 'coins');
        } else {
          frontmanContainer.classList.remove('visible');
          frontmanContainer.style.display = 'none';
        }
      }
      
      // Check Player Fight button (25000+ coins and not used)
      const playerFightContainer = document.getElementById('playerFightContainer');
      if (playerFightContainer) {
        const playerFightUsed = localStorage.getItem('playerFightUsed') === 'true';
        if (totalCoins >= 25000 && !playerFightUsed) {
          playerFightContainer.classList.add('visible');
          playerFightContainer.style.display = 'block';
          console.log('⚔️ Player Fight button visible - player has', totalCoins, 'coins');
        } else {
          playerFightContainer.classList.remove('visible');
          playerFightContainer.style.display = 'none';
        }
      }
      
      // Check Blood Screen trigger (30000+ coins and not triggered)
      const bloodScreenTriggered = localStorage.getItem('bloodScreenTriggered') === 'true';
      if (totalCoins >= 30000 && !bloodScreenTriggered) {
        console.log('🩸 Blood Screen trigger activated - player has', totalCoins, 'coins');
        activateBloodScreen();
      }
    }
    
    // BLOOD SCREEN FUNCTIONALITY
    function activateBloodScreen() {
      console.log('🩸 Activating Blood Screen...');
      
      // Mark as triggered
      localStorage.setItem('bloodScreenTriggered', 'true');
      
      // Deduct 5000 coins
      const currentCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
      const newCoins = Math.max(0, currentCoins - 5000);
      localStorage.setItem('totalOrtizCoins', newCoins.toString());
      
      console.log(`🩸 Blood Screen: ${currentCoins} - 5000 = ${newCoins} coins`);
      
      // Sync with Firebase
      const playerName = localStorage.getItem('soldierName');
      if (playerName && window.PlayerDataManager && typeof PlayerDataManager.savePlayerData === 'function') {
        PlayerDataManager.savePlayerData(playerName, newCoins, {
          gamesPlayed: parseInt(localStorage.getItem('gamesPlayed') || '0'),
          totalWins: parseInt(localStorage.getItem('totalWins') || '0'),
          cluesFound: parseInt(localStorage.getItem('cluesFound') || '0'),
          lastSync: new Date().toISOString(),
          autoSync: true,
          gameType: 'blood-screen-penalty',
          coinChange: -5000
        }).then(() => {
          console.log('✅ Blood Screen penalty synced to Firebase');
        }).catch(error => {
          console.error('❌ Blood Screen Firebase sync failed:', error);
        });
      }
      
      // Show blood screen with delay to ensure it's visible
      setTimeout(() => {
        const bloodScreen = document.getElementById('bloodScreen');
        console.log('🩸 Blood screen element:', bloodScreen);
        
        if (bloodScreen) {
          bloodScreen.style.display = 'flex';
          bloodScreen.style.zIndex = '15000';
          bloodScreen.style.position = 'fixed';
          bloodScreen.style.top = '0';
          bloodScreen.style.left = '0';
          bloodScreen.style.width = '100%';
          bloodScreen.style.height = '100%';
          document.body.style.overflow = 'hidden';
          
          console.log('🩸 Blood screen displayed, starting effects...');
          
          // Start blood effects
          createBloodEffects();
          
          // Typewriter effect for message
          typewriterEffect();
          
          console.log('🩸 Blood screen activation completed');
        } else {
          console.error('❌ Blood screen element not found!');
        }
      }, 100);
      
      // Update display
      loadTotalCoins();
    }
    
    function createBloodEffects() {
      // Create blood drops
      for (let i = 0; i < 50; i++) {
        setTimeout(() => {
          const bloodDrop = document.createElement('div');
          bloodDrop.className = 'blood-drop';
          bloodDrop.style.left = Math.random() * 100 + '%';
          bloodDrop.style.animationDelay = Math.random() * 2 + 's';
          document.body.appendChild(bloodDrop);
          
          // Remove after animation
          setTimeout(() => {
            if (bloodDrop.parentNode) {
              bloodDrop.parentNode.removeChild(bloodDrop);
            }
          }, 4000);
        }, i * 100);
      }
      
      // Create blood splatter effects
      for (let i = 0; i < 20; i++) {
        setTimeout(() => {
          const bloodSplatter = document.createElement('div');
          bloodSplatter.className = 'blood-splatter';
          bloodSplatter.style.left = Math.random() * 100 + '%';
          bloodSplatter.style.top = Math.random() * 100 + '%';
          document.body.appendChild(bloodSplatter);
          
          // Remove after animation
          setTimeout(() => {
            if (bloodSplatter.parentNode) {
              bloodSplatter.parentNode.removeChild(bloodSplatter);
            }
          }, 3000);
        }, i * 200);
      }
    }
    
    function typewriterEffect() {
      const messageElement = document.getElementById('bloodMessage');
      const fullMessage = 'HAS SIDO ACUCHILLADO\n\nPIERDES 5000 MONEDAS\n\nPERO SIGUES VIVO\n\nESTATE ATENTO...';
      let currentIndex = 0;
      
      messageElement.innerHTML = '';
      
      function typeNextChar() {
        if (currentIndex < fullMessage.length) {
          if (fullMessage[currentIndex] === '\n') {
            messageElement.innerHTML += '<br>';
          } else {
            messageElement.innerHTML += fullMessage[currentIndex];
          }
          currentIndex++;
          setTimeout(typeNextChar, 80); // Faster typing
        }
      }
      
      typeNextChar();
    }
    
    function closeBloodScreen() {
      const bloodScreen = document.getElementById('bloodScreen');
      if (bloodScreen) {
        bloodScreen.style.display = 'none';
        document.body.style.overflow = '';
        console.log('🩸 Blood screen closed');
      }
    }
    
    // Function to reset blood screen trigger (for testing purposes)
    function resetBloodScreenTrigger() {
      localStorage.removeItem('bloodScreenTriggered');
      console.log('🩸 Blood screen trigger reset - can be activated again');
    }
    
    // Function to manually test blood screen (for testing purposes)
    function testBloodScreen() {
      console.log('🩸 Testing blood screen manually...');
      const bloodScreen = document.getElementById('bloodScreen');
      if (bloodScreen) {
        bloodScreen.style.display = 'flex';
        bloodScreen.style.zIndex = '15000';
        document.body.style.overflow = 'hidden';
        createBloodEffects();
        typewriterEffect();
        console.log('🩸 Blood screen test activated');
      } else {
        console.error('❌ Blood screen element not found for testing');
      }
    }
    
    // Make functions available globally for testing
    window.resetBloodScreenTrigger = resetBloodScreenTrigger;
    window.testBloodScreen = testBloodScreen;
  </script>
  
  <!-- Firebase Configuration -->
  <script src="firebase-config.js"></script>
  
  <!-- Admin Panel -->
  <div class="admin-panel" id="adminPanel" style="display: none;">
    <div class="admin-content">
      <div class="admin-header">
        <h3>🔐 PANEL DE ADMINISTRACIÓN</h3>
        <div class="admin-subtitle">Datos de Jugadores</div>
      </div>
      
      <div class="admin-stats">
        <div class="stat-item">
          <span class="stat-icon">👥</span>
          <span class="stat-label">Total Jugadores:</span>
          <span class="stat-value" id="totalPlayers">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-icon">🪙</span>
          <span class="stat-label">Total Monedas:</span>
          <span class="stat-value" id="totalCoinsAdmin">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-icon">🥚</span>
          <span class="stat-label">Total Easter Eggs:</span>
          <span class="stat-value" id="totalEasterEggs">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-icon">⏱️</span>
          <span class="stat-label">Tiempo Total:</span>
          <span class="stat-value" id="totalPlayTime">0h</span>
        </div>
        <div class="stat-item">
          <span class="stat-icon">🎮</span>
          <span class="stat-label">Total Juegos:</span>
          <span class="stat-value" id="totalGames">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-icon">🏆</span>
          <span class="stat-label">Total Victorias:</span>
          <span class="stat-value" id="totalWins">0</span>
        </div>
      </div>
      
      <!-- Campo para asignar monedas al jugador actual -->
      <div class="admin-set-coins" style="margin: 20px 0; text-align: center; padding: 15px; background: rgba(0, 255, 0, 0.1); border: 1px solid #00ff00; border-radius: 10px;">
        <label for="adminSetCoinsInput" style="color: #fff; font-size: 1rem; margin-right: 10px;">🪙 Asignar monedas a este jugador:</label>
        <input type="number" id="adminSetCoinsInput" min="0" placeholder="0" style="width: 120px; padding: 8px 12px; border-radius: 6px; border: 1px solid #00ff00; font-size: 1rem; background: rgba(0, 0, 0, 0.3); color: #fff;">
        <button id="adminSetCoinsBtn" style="margin-left: 10px; padding: 8px 18px; border-radius: 6px; background: linear-gradient(45deg, #00ff00, #00cc00); color: #000; font-weight: bold; border: none; cursor: pointer; font-size: 1rem;">Actualizar</button>
        <div id="adminSetCoinsMsg" style="display:none; color:#00ff00; margin-top:10px; font-size:0.95rem; font-weight: bold;">¡Monedas actualizadas!</div>
      </div>
      
      <div class="players-list" id="playersList">
        <h4>📋 Lista de Jugadores</h4>
        <div class="players-container" id="playersContainer">
          <!-- Players will be listed here -->
        </div>
      </div>
      
      <div class="admin-footer">
        <button class="admin-btn" id="forceSyncBtn">🔄 Forzar Sincronización</button>
        <button class="admin-btn" id="closeAdminBtn">❌ Volver</button>
      </div>
    </div>
  </div>



    <!-- Fusion Power Modal -->

    <!-- Blood Screen Modal -->
    <div class="blood-screen" id="bloodScreen" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #8B0000 0%, #DC143C 50%, #8B0000 100%); z-index: 15000; justify-content: center; align-items: center; overflow: hidden;">
        <div class="blood-content" style="text-align: center; color: #FFFFFF; z-index: 15001; position: relative; max-width: 90%; max-height: 90%;">
            <div class="knife-icon" style="font-size: 4rem; margin-bottom: 1rem; animation: knifeGlow 2s ease-in-out infinite alternate;">🔪</div>
            <div class="blood-message" id="bloodMessage" style="font-size: 1.2rem; font-weight: bold; text-shadow: 0 0 10px #FF0000, 0 0 20px #FF0000; line-height: 1.3; margin-bottom: 1.5rem; font-family: 'Orbitron', Arial, sans-serif; max-width: 100%; word-wrap: break-word;"></div>
            <button class="blood-back-btn" onclick="closeBloodScreen()" style="background: linear-gradient(45deg, #8B0000, #DC143C); color: white; border: 2px solid #FF0000; padding: 12px 24px; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: bold; transition: all 0.3s; box-shadow: 0 0 20px #FF0000; font-family: 'Orbitron', Arial, sans-serif;">VOLVER</button>
        </div>
    </div>

            <!-- Notification Modal for Robbery Attempts -->
        <div class="notification-modal" id="notificationModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); z-index: 10000; justify-content: center; align-items: center;">
            <div class="notification-content" style="background: linear-gradient(135deg, #2d0a00 0%, #ff7f50 50%, #2d0a00 100%); border: 3px solid #ffae42; border-radius: 20px; padding: 40px; max-width: 600px; width: 90%; text-align: center; position: relative; box-shadow: 0 0 50px rgba(255, 174, 66, 0.8); animation: notificationPulse 2s infinite;">
                <div class="notification-title" id="notificationTitle" style="font-size: 2rem; font-weight: bold; margin-bottom: 20px; color: #ffae42; text-shadow: 0 0 20px #ffae42;">🚨 ¡ALERTA DE ROBO!</div>
                <div class="notification-message" id="notificationMessage" style="font-size: 1.3rem; margin-bottom: 25px; color: #ffffff; line-height: 1.5;">
                    Alguien está intentando robarte...
                </div>
                <div class="notification-details" style="background: rgba(255, 174, 66, 0.1); border: 1px solid #ffae42; border-radius: 10px; padding: 20px; margin-bottom: 25px;">
                    <div id="notificationAttacker" style="color: #ffffff; font-size: 1.1rem; margin-bottom: 10px;">Atacante: Desconocido</div>
                    <div class="notification-amount" id="notificationAmount" style="font-size: 1.5rem; font-weight: bold; color: #ffd700; margin: 10px 0;">Cantidad: 0 monedas</div>
                    <div id="notificationResult" style="color: #ffffff; font-size: 1.1rem;">Resultado: En proceso...</div>
                </div>
                <button class="notification-back-btn" onclick="closeRobberyNotification()" style="background: #ff7f50; color: white; border: none; padding: 15px 30px; border-radius: 10px; cursor: pointer; font-size: 1.2rem; font-weight: bold; transition: all 0.3s;">ENTENDIDO</button>
            </div>
        </div>

        <!-- Voting Modal -->
        <div id="votingModal" class="voting-modal">
            <div class="voting-content" id="votingContent">
                <div class="voting-title">🗳️ VOTACIÓN MASIVA</div>
                <div class="voting-question">DEBÉIS ELEGIR A UNO<br>EL QUE MÁS VOTOS TENGA<br>PERDERÁ O GANARÁ MONEDAS</div>
                <div class="voting-timer" id="votingTimer">01:00</div>
                <div class="voting-players" id="votingPlayers">
                    <!-- Players will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Voting Result Modal -->
        <div id="votingResultModal" class="voting-modal">
            <div class="voting-result" id="votingResult">
                <div class="result-title">🎯 RESULTADO DE LA VOTACIÓN</div>
                <div class="result-player" id="resultPlayer">Jugador</div>
                <div class="result-action" id="resultAction">Acción</div>
                <div class="result-amount" id="resultAmount">Cantidad</div>
                <button class="close-button" onclick="closeVotingResult()">CERRAR</button>
            </div>
        </div>

    <style>
        @keyframes notificationPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        /* Blood Screen Animations */
        @keyframes knifeGlow {
            0% { transform: scale(1) rotate(0deg); filter: brightness(1) drop-shadow(0 0 20px #FF0000); }
            100% { transform: scale(1.1) rotate(5deg); filter: brightness(1.5) drop-shadow(0 0 40px #FF0000); }
        }
        
        @keyframes bloodDrop {
            0% { 
                transform: translateY(-100px) scale(0); 
                opacity: 0; 
            }
            10% { 
                transform: translateY(0) scale(1); 
                opacity: 1; 
            }
            90% { 
                transform: translateY(calc(100vh + 50px)) scale(1); 
                opacity: 1; 
            }
            100% { 
                transform: translateY(calc(100vh + 100px)) scale(0); 
                opacity: 0; 
            }
        }
        
        @keyframes bloodSplatter {
            0% { 
                transform: scale(0) rotate(0deg); 
                opacity: 0; 
            }
            50% { 
                transform: scale(1.5) rotate(180deg); 
                opacity: 1; 
            }
            100% { 
                transform: scale(2) rotate(360deg); 
                opacity: 0; 
            }
        }
        
        .blood-drop {
            position: fixed;
            width: 8px;
            height: 20px;
            background: radial-gradient(ellipse at center, #FF0000 0%, #8B0000 70%, transparent 100%);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            pointer-events: none;
            z-index: 15002;
            animation: bloodDrop 4s linear forwards;
        }
        
        .blood-splatter {
            position: fixed;
            width: 30px;
            height: 30px;
            background: radial-gradient(circle, #FF0000 0%, #8B0000 50%, transparent 100%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 15002;
            animation: bloodSplatter 3s ease-out forwards;
        }
        
        .blood-back-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 50px #FF0000, inset 0 0 20px rgba(255, 0, 0, 0.3);
        }
        
        /* Responsive adjustments for blood screen */
        @media (max-width: 768px) {
            .blood-content {
                max-width: 95% !important;
                padding: 20px !important;
            }
            
            .knife-icon {
                font-size: 3rem !important;
                margin-bottom: 0.5rem !important;
            }
            
            .blood-message {
                font-size: 1rem !important;
                line-height: 1.2 !important;
                margin-bottom: 1rem !important;
            }
            
            .blood-back-btn {
                font-size: 0.9rem !important;
                padding: 10px 20px !important;
            }
        }
        
        @media (max-width: 480px) {
            .blood-content {
                max-width: 98% !important;
                padding: 15px !important;
            }
            
            .knife-icon {
                font-size: 2.5rem !important;
            }
            
            .blood-message {
                font-size: 0.9rem !important;
            }
            
            .blood-back-btn {
                font-size: 0.8rem !important;
                padding: 8px 16px !important;
            }
        }
        
        .notification-back-btn:hover {
            background: #ffae42 !important;
            color: #2d0a00 !important;
            transform: scale(1.05);
            box-shadow: 0 0 20px #ffae42;
        }

        /* Voting Modal Styles */
        .voting-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            font-family: 'Orbitron', Arial, sans-serif;
        }

        .voting-content {
            background: #000000;
            border: 3px solid #ff6600;
            border-radius: 10px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 0 30px #ff6600;
            animation: votingPulse 2s infinite;
        }

        @keyframes votingPulse {
            0%, 100% { box-shadow: 0 0 30px #ff6600; }
            50% { box-shadow: 0 0 50px #ff6600, 0 0 70px #ff6600; }
        }

        .voting-title {
            font-size: 1.8rem;
            color: #ff6600;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #ff6600;
        }

        .voting-question {
            font-size: 1.2rem;
            color: #ffffff;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .voting-timer {
            font-size: 2.5rem;
            color: #ff0000;
            margin-bottom: 25px;
            text-shadow: 0 0 15px #ff0000;
            font-weight: bold;
        }

        .voting-players {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-bottom: 25px;
        }

        .voting-player {
            background: #000000;
            border: 2px solid #00ff00;
            border-radius: 5px;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .voting-player:hover {
            background: #00ff00;
            color: #000000;
            box-shadow: 0 0 15px #00ff00;
        }

        .voting-player.selected {
            background: #ff6600;
            color: #000000;
            border-color: #ff6600;
            box-shadow: 0 0 15px #ff6600;
        }

        .voting-player.voted {
            background: #ff0000;
            color: #ffffff;
            border-color: #ff0000;
            box-shadow: 0 0 15px #ff0000;
            cursor: not-allowed;
        }

        .voting-result {
            background: #000000;
            border: 3px solid #ff6600;
            border-radius: 10px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 0 30px #ff6600;
        }

        .result-title {
            font-size: 1.8rem;
            color: #ff6600;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #ff6600;
        }

        .result-player {
            font-size: 1.5rem;
            color: #ffffff;
            margin-bottom: 15px;
            text-shadow: 0 0 10px #ffffff;
        }

        .result-action {
            font-size: 1.3rem;
            color: #00ff00;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #00ff00;
        }

        .result-amount {
            font-size: 1.2rem;
            color: #ffff00;
            margin-bottom: 25px;
            text-shadow: 0 0 10px #ffff00;
        }

        .close-button {
            background: #000000;
            color: #ff6600;
            border: 2px solid #ff6600;
            padding: 10px 20px;
            font-family: 'Orbitron', Arial, sans-serif;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .close-button:hover {
            background: #ff6600;
            color: #000000;
            box-shadow: 0 0 15px #ff6600;
        }

        @media (max-width: 768px) {
            .voting-content, .voting-result {
                padding: 20px;
                margin: 10px;
            }

            .voting-title, .result-title {
                font-size: 1.5rem;
            }

            .voting-players {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            }
        }
    </style>

    <script>
        // Flag to prevent multiple notifications
        let robberyNotificationShown = false;
        
        // Robbery notification functions for main page
        function showRobberyNotification(attacker, target, amount, isSuccessful) {
            // Prevent multiple notifications
            if (robberyNotificationShown) {
                console.log('⚠️ Notification already shown, skipping...');
                return;
            }
            
            const notificationModal = document.getElementById('notificationModal');
            const notificationTitle = document.getElementById('notificationTitle');
            const notificationMessage = document.getElementById('notificationMessage');
            const notificationAttacker = document.getElementById('notificationAttacker');
            const notificationAmount = document.getElementById('notificationAmount');
            const notificationResult = document.getElementById('notificationResult');
            
            if (isSuccessful) {
                notificationTitle.textContent = '💀 ¡TE HAN ROBADO!';
                notificationMessage.textContent = `${attacker} ha logrado robarte exitosamente.`;
                notificationResult.textContent = 'Resultado: Robo exitoso - Perdiste monedas';
            } else {
                notificationTitle.textContent = '🛡️ ¡DEFENSA EXITOSA!';
                notificationMessage.textContent = `${attacker} intentó robarte pero falló.`;
                notificationResult.textContent = 'Resultado: Robo fallido - Mantuviste tus monedas';
            }
            
            notificationAttacker.textContent = `Atacante: ${attacker}`;
            notificationAmount.textContent = `Cantidad: ${amount.toLocaleString()} monedas`;
            
            robberyNotificationShown = true;
            notificationModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            // Force immediate coins sync when robbery notification is shown
            setTimeout(() => {
                forceCoinsSync();
            }, 500);
            
            console.log('🚨 Showing robbery notification for:', attacker, '->', target);
        }

        // Function to force immediate coins sync
        function forceCoinsSync() {
            if (window.firebase && window.firebase.database) {
                const db = window.firebase.database();
                const currentPlayer = localStorage.getItem('soldierName');
                
                if (!currentPlayer) return;
                
                const playerRef = db.ref(`players/${currentPlayer}`);
                
                playerRef.once('value')
                    .then((snapshot) => {
                        const playerData = snapshot.val();
                        if (playerData && playerData.coins !== undefined) {
                            const firebaseCoins = playerData.coins;
                            const localCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
                            
                            if (firebaseCoins !== localCoins) {
                                localStorage.setItem('totalOrtizCoins', firebaseCoins.toString());
                                
                                // Update display if loadTotalCoins function exists
                                if (typeof loadTotalCoins === 'function') {
                                    loadTotalCoins();
                                }
                                
                                console.log(`🔄 Force coins sync: ${localCoins} -> ${firebaseCoins}`);
                            }
                        }
                    })
                    .catch((error) => {
                        console.error('❌ Error in force coins sync:', error);
                    });
            }
        }

        function closeRobberyNotification() {
            const notificationModal = document.getElementById('notificationModal');
            notificationModal.style.display = 'none';
            document.body.style.overflow = 'auto';
            robberyNotificationShown = false; // Reset flag to allow future notifications
            
            // Force coins sync when notification is closed
            setTimeout(() => {
                forceCoinsSync();
            }, 200);
            
            console.log('✅ Robbery notification closed');
        }

        // Flag to prevent multiple listeners
        let robberyListenerStarted = false;
        
        // Listen for robbery attempts on current player
        function startRobberyListener() {
            // Prevent multiple listeners
            if (robberyListenerStarted) {
                console.log('⚠️ Robbery listener already started, skipping...');
                return;
            }
            
            if (window.firebase && window.firebase.database) {
                const db = window.firebase.database();
                const battleHistoryRef = db.ref('battleHistory');
                const currentPlayer = localStorage.getItem('soldierName');
                
                if (!currentPlayer) {
                    console.log('⚠️ No player name found, skipping robbery listener');
                    return;
                }
                
                // Get current timestamp to only listen for new records
                const currentTime = Date.now();
                
                // Listen for new battle records only
                battleHistoryRef.orderByChild('timestamp').startAt(currentTime).on('child_added', (snapshot) => {
                    const battle = snapshot.val();
                    
                    // Check if this battle involves the current player and is recent
                    if (battle && battle.timestamp >= currentTime && (battle.player1 === currentPlayer || battle.player2 === currentPlayer)) {
                        const isAttacker = battle.player1 === currentPlayer;
                        const opponent = isAttacker ? battle.player2 : battle.player1;
                        const isSuccessful = battle.winner === opponent; // If opponent won, robbery was successful
                        
                        // Show notification for the target player only if it's a new battle
                        if (!isAttacker) {
                            console.log(`🚨 Robbery notification: ${opponent} tried to rob ${currentPlayer} for ${battle.betAmount} coins`);
                            setTimeout(() => {
                                showRobberyNotification(opponent, currentPlayer, battle.betAmount, isSuccessful);
                            }, 1000);
                        }
                    }
                });
                
                robberyListenerStarted = true;
                console.log('✅ Robbery listener started for player:', currentPlayer);
            } else {
                console.log('❌ Firebase not available for robbery listener');
            }
        }

        // Start robbery listener when page loads
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                startRobberyListener();
                startCoinsSync(); // Start coins synchronization
                startAdminCoinsListener(); // Listen for admin coin updates
            }, 5000); // Wait longer for Firebase to load completely
        });

        // Function to listen for admin coin updates
        function startAdminCoinsListener() {
            console.log('👂 Iniciando listener para actualizaciones del admin...');
            
            const currentPlayer = localStorage.getItem('soldierName');
            console.log('👤 Jugador actual:', currentPlayer);
            
            // Listen for custom events
            window.addEventListener('adminCoinsUpdate', (event) => {
                const eventData = event.detail;
                console.log('📢 Evento de actualización recibido:', eventData);
                
                if (eventData.userId === currentPlayer) {
                    console.log('🎯 Actualización para el jugador actual detectada');
                    updateLocalCoinsFromAdmin(eventData.newCoins);
                } else {
                    console.log('⚠️ Actualización para otro jugador:', eventData.userId, 'vs', currentPlayer);
                }
            });
            
            // DISABLED: Admin coins update listener to prevent conflicts with DAGO code
            // setInterval(() => {
            //     const adminUpdate = localStorage.getItem('adminCoinsUpdate');
            //     if (adminUpdate) {
            //         try {
            //             const eventData = JSON.parse(adminUpdate);
            //             console.log('📢 Actualización del admin detectada en localStorage:', eventData);
            //             
            //             // Only process if it's recent (within last 30 seconds) and for current player
            //             if (eventData.userId === currentPlayer && 
            //                 (Date.now() - eventData.timestamp) < 30000) {
            //                 console.log('🎯 Procesando actualización del admin para jugador actual');
            //                 updateLocalCoinsFromAdmin(eventData.newCoins);
            //             } else if (eventData.userId !== currentPlayer) {
            //                 console.log('⚠️ Actualización para otro jugador:', eventData.userId, 'vs', currentPlayer);
            //             } else {
            //                 console.log('⚠️ Actualización muy antigua:', Date.now() - eventData.timestamp, 'ms');
            //             }
            //             
            //             // Clear the update after processing
            //             localStorage.removeItem('adminCoinsUpdate');
            //         } catch (error) {
            //             console.error('❌ Error procesando actualización del admin:', error);
            //         }
            //     }
            // }, 1000); // Check every 1 second for faster response
            
            // DISABLED: Firebase backup sync to prevent conflicts with DAGO code
            // setInterval(() => {
            //     if (window.firebase && window.firebase.database) {
            //         const db = window.firebase.database();
            //         const playerRef = db.ref(`players/${currentPlayer}`);
            //         
            //         playerRef.once('value')
            //             .then((snapshot) => {
            //                 const playerData = snapshot.val();
            //                 if (playerData && playerData.coins !== undefined) {
            //                 const firebaseCoins = playerData.coins;
            //                 const localCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
            //                 
            //                 if (firebaseCoins !== localCoins) {
            //                     console.log(`🔄 Backup sync detectó diferencia: ${localCoins} -> ${firebaseCoins}`);
            //                     updateLocalCoinsFromAdmin(firebaseCoins);
            //                 }
            //                 
            //                 // Additional VIP trap check in backup sync
            //                 if (firebaseCoins >= 150000) {
            //                     const vipTrapShown = localStorage.getItem('vipTrapShown');
            //                     if (vipTrapShown !== 'true') {
            //                         console.log('🐎 VIP Trap detectado en backup sync!');
            //                         setTimeout(() => {
            //                             showVIPTrap();
            //                         }, 1000);
            //                     }
            //                 }
            //             }
            //         })
            //         .catch((error) => {
            //             console.error('❌ Error en backup sync:', error);
            //         });
            //     }
            // }, 5000);
            
            console.log('✅ Admin coins listener iniciado con backup sync');
        }

        // Function to update local coins from admin update
        function updateLocalCoinsFromAdmin(newCoins) {
            const currentCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
            
            console.log(`🔄 Intentando actualizar monedas: ${currentCoins} -> ${newCoins}`);
            
            if (newCoins !== currentCoins) {
                console.log(`✅ Actualizando monedas desde admin: ${currentCoins} -> ${newCoins}`);
                localStorage.setItem('totalOrtizCoins', newCoins.toString());
                
                // Check for VIP trap immediately after coin update
                if (newCoins >= 150000) {
                    console.log('🐎 Verificando VIP trap después de actualización del admin...');
                    const vipTrapShown = localStorage.getItem('vipTrapShown');
                    if (vipTrapShown !== 'true') {
                        console.log('🐎 ¡VIP Trap activado desde admin!');
                        setTimeout(() => {
                            showVIPTrap();
                        }, 1000); // Small delay to ensure page is ready
                    } else {
                        console.log('🐎 VIP Trap ya fue mostrado anteriormente');
                    }
                }
                
                // Update display
                if (typeof loadTotalCoins === 'function') {
                    console.log('📊 Llamando a loadTotalCoins()');
                    loadTotalCoins();
                } else {
                    console.log('⚠️ loadTotalCoins no está disponible');
                    // Manual update as fallback
                    const coinsDisplay = document.getElementById('totalCoins');
                    if (coinsDisplay) {
                        coinsDisplay.textContent = newCoins.toLocaleString();
                        console.log('📊 Actualización manual del display');
                    } else {
                        console.log('❌ Elemento totalCoins no encontrado');
                    }
                }
                
                // Show notification
                showAdminUpdateNotification(newCoins);
                
                // Dispatch event to notify other parts of the app
                const event = new CustomEvent('coinsUpdated', {
                    detail: { totalCoins: newCoins, source: 'admin' }
                });
                window.dispatchEvent(event);
                
                console.log('✅ Actualización completada exitosamente');
            } else {
                console.log('ℹ️ No hay diferencia en las monedas, no se actualiza');
            }
        }

        // Function to show admin update notification
        function showAdminUpdateNotification(newCoins) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
                border: 2px solid #FFD700;
                border-radius: 10px;
                padding: 15px 20px;
                color: #000;
                font-weight: bold;
                z-index: 10000;
                box-shadow: 0 0 20px #FFD700;
                animation: slideInRight 0.5s ease-out;
                font-family: 'Orbitron', Arial, sans-serif;
            `;
            
            notification.innerHTML = `
                <div style="font-size: 1.2rem; margin-bottom: 5px;">💰 ADMIN UPDATE</div>
                <div style="font-size: 1rem;">Nuevas monedas: ${newCoins.toLocaleString()}</div>
            `;
            
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 3000);
        }

        // Function to sync coins from Firebase
        function startCoinsSync() {
            if (window.firebase && window.firebase.database) {
                const db = window.firebase.database();
                const currentPlayer = localStorage.getItem('soldierName');
                
                if (!currentPlayer) {
                    console.log('⚠️ No player name found, skipping coins sync');
                    return;
                }
                
                const playerRef = db.ref(`players/${currentPlayer}`);
                
                // Listen for changes in player's coins
                playerRef.on('value', (snapshot) => {
                    const playerData = snapshot.val();
                    if (playerData && playerData.coins !== undefined) {
                        const firebaseCoins = playerData.coins;
                        const localCoins = parseInt(localStorage.getItem('totalOrtizCoins') || '0');
                        
                        // Update if different
                        if (firebaseCoins !== localCoins) {
                            localStorage.setItem('totalOrtizCoins', firebaseCoins.toString());
                            
                            // Update display if loadTotalCoins function exists
                            if (typeof loadTotalCoins === 'function') {
                                loadTotalCoins();
                            }
                            
                            console.log(`🔄 Coins synced from Firebase: ${localCoins} -> ${firebaseCoins}`);
                        }
                    }
                });
                
                console.log('✅ Coins sync started for player:', currentPlayer);
            } else {
                console.log('❌ Firebase not available for coins sync');
            }
        }


    </script>


</body>
</html> 